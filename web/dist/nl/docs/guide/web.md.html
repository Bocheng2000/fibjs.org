<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel="icon" type="image/png" href="../../../imgs/icon.png"><title>Praktijk voor krachtige webapplicaties - JavaScript op glasvezel</title><link href="../../../css/common.css" rel="stylesheet"><link href="../../../css/docs.css" rel="stylesheet"></head><body><div class="navbar navbar-default navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schakel tussen navigatie</font></font></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="../../index.html"><img src="../../../imgs/logo-dark.png"></a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right notranslate"><li><a href="../../index.html">HOME</a></li><li><a href="readme.md.html">GUIDE</a></li><li><a href="../manual/module/readme.md.html">MODULE</a></li><li><a href="../manual/object/readme.md.html">OBJECT</a></li><li><a href="../awesome/readme.md.html">AWESOME</a></li><li><a href="../../../download/index.html">DOWNLOAD</a></li><li class="nav-item dropdown"><a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">LANGUAGE</a><div class="dropdown-menu"><a href="../../../docs/guide/web.md.html">中文</a> <a href="../../../ca/docs/guide/web.md.html">Catalan</a> <a href="../../../de/docs/guide/web.md.html">Deutsch</a> <a href="../../../en/docs/guide/web.md.html">English</a> <a href="../../../es/docs/guide/web.md.html">Español</a> <a href="../../../fr/docs/guide/web.md.html">Français</a> <a href="../../../gl/docs/guide/web.md.html">Galego</a> <a href="../../../it/docs/guide/web.md.html">Italiano</a> <a href="../../../nl/docs/guide/web.md.html">Nederlands</a> <a href="../../../ru/docs/guide/web.md.html">Русский</a> <a href="../../../ja/docs/guide/web.md.html">日本語</a> <a href="../../../ko/docs/guide/web.md.html">한국어</a> <a href="../../../zh-tw/docs/guide/web.md.html">繁體中文</a></div></li></ul></div></div></div><div class="band"><div class="container"><span class="group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gids Ontwikkelingsgids</font></font></span><div class="search"><input type="text" class="searchbox" placeholder="Zoekopdracht"></div></div></div><div class="container"><ol class="breadcrumb"><li><a href="../../index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voorpagina</font></font></a></li><li><a href="readme.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ontwikkelingsgids</font></font></a></li><li class="active"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktijken voor hoogwaardige webapplicaties</font></font></li></ol></div><div class="page-body"><div class="container"><div class="sidebar hidden-xs"><div class="panel-group" id="accordion" role="tablist">  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_guide" aria-controls="collapse_guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ontwikkelingsgids</font></font></a></h4></div><div id="collapse_guide" class="panel-collapse collapse in" aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="about.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wat is fibjs?</font></font></a></li>
<li><a href="install.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installeer de besturingsomgeving</font></font></a></li>
<li><a href="hello.md.html" class="notranslate">hello, world</a></li>
<li><a href="test.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Een beter leven begint met een test</font></font></a></li>
<li><a href="profiler.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vind prestatiemoordenaars</font></font></a></li>
<li><a href="sync.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchroon en asynchroon</font></font></a></li>
<li><a href="server-hot-update.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hot-update voor servermodule</font></font></a></li>
<li class="active"><a href="web.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktijken voor hoogwaardige webapplicaties</font></font></a></li>
<li><a href="host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domeinroutering</font></font></a></li>
<li><a href="x509.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gebruik van X509-certificaat in fibjs</font></font></a></li>
<li><a href="contribute.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Native module toevoegen</font></font></a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_module" aria-controls="collapse_module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basismodule</font></font></a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/module/ifs/assert.md.html" class="notranslate">assert</a></li>
<li><a href="../manual/module/ifs/base32.md.html" class="notranslate">base32</a></li>
<li><a href="../manual/module/ifs/base58.md.html" class="notranslate">base58</a></li>
<li><a href="../manual/module/ifs/base64.md.html" class="notranslate">base64</a></li>
<li><a href="../manual/module/ifs/child_process.md.html" class="notranslate">child_process</a></li>
<li><a href="../manual/module/ifs/console.md.html" class="notranslate">console</a></li>
<li><a href="../manual/module/ifs/constants.md.html" class="notranslate">constants</a></li>
<li><a href="../manual/module/ifs/coroutine.md.html" class="notranslate">coroutine</a></li>
<li><a href="../manual/module/ifs/crypto.md.html" class="notranslate">crypto</a></li>
<li><a href="../manual/module/ifs/db.md.html" class="notranslate">db</a></li>
<li><a href="../manual/module/ifs/dgram.md.html" class="notranslate">dgram</a></li>
<li><a href="../manual/module/ifs/dns.md.html" class="notranslate">dns</a></li>
<li><a href="../manual/module/ifs/encoding.md.html" class="notranslate">encoding</a></li>
<li><a href="../manual/module/ifs/fs.md.html" class="notranslate">fs</a></li>
<li><a href="../manual/module/ifs/fs_constants.md.html" class="notranslate">fs_constants</a></li>
<li><a href="../manual/module/ifs/gd.md.html" class="notranslate">gd</a></li>
<li><a href="../manual/module/ifs/global.md.html" class="notranslate">global</a></li>
<li><a href="../manual/module/ifs/gui.md.html" class="notranslate">gui</a></li>
<li><a href="../manual/module/ifs/hash.md.html" class="notranslate">hash</a></li>
<li><a href="../manual/module/ifs/hex.md.html" class="notranslate">hex</a></li>
<li><a href="../manual/module/ifs/http.md.html" class="notranslate">http</a></li>
<li><a href="../manual/module/ifs/iconv.md.html" class="notranslate">iconv</a></li>
<li><a href="../manual/module/ifs/io.md.html" class="notranslate">io</a></li>
<li><a href="../manual/module/ifs/json.md.html" class="notranslate">json</a></li>
<li><a href="../manual/module/ifs/mq.md.html" class="notranslate">mq</a></li>
<li><a href="../manual/module/ifs/msgpack.md.html" class="notranslate">msgpack</a></li>
<li><a href="../manual/module/ifs/multibase.md.html" class="notranslate">multibase</a></li>
<li><a href="../manual/module/ifs/net.md.html" class="notranslate">net</a></li>
<li><a href="../manual/module/ifs/os.md.html" class="notranslate">os</a></li>
<li><a href="../manual/module/ifs/path.md.html" class="notranslate">path</a></li>
<li><a href="../manual/module/ifs/path_posix.md.html" class="notranslate">path_posix</a></li>
<li><a href="../manual/module/ifs/path_win32.md.html" class="notranslate">path_win32</a></li>
<li><a href="../manual/module/ifs/perf_hooks.md.html" class="notranslate">perf_hooks</a></li>
<li><a href="../manual/module/ifs/performance.md.html" class="notranslate">performance</a></li>
<li><a href="../manual/module/ifs/process.md.html" class="notranslate">process</a></li>
<li><a href="../manual/module/ifs/profiler.md.html" class="notranslate">profiler</a></li>
<li><a href="../manual/module/ifs/punycode.md.html" class="notranslate">punycode</a></li>
<li><a href="../manual/module/ifs/querystring.md.html" class="notranslate">querystring</a></li>
<li><a href="../manual/module/ifs/registry.md.html" class="notranslate">registry</a></li>
<li><a href="../manual/module/ifs/ssl.md.html" class="notranslate">ssl</a></li>
<li><a href="../manual/module/ifs/string_decoder.md.html" class="notranslate">string_decoder</a></li>
<li><a href="../manual/module/ifs/test.md.html" class="notranslate">test</a></li>
<li><a href="../manual/module/ifs/timers.md.html" class="notranslate">timers</a></li>
<li><a href="../manual/module/ifs/tty.md.html" class="notranslate">tty</a></li>
<li><a href="../manual/module/ifs/url.md.html" class="notranslate">url</a></li>
<li><a href="../manual/module/ifs/util.md.html" class="notranslate">util</a></li>
<li><a href="../manual/module/ifs/uuid.md.html" class="notranslate">uuid</a></li>
<li><a href="../manual/module/ifs/vm.md.html" class="notranslate">vm</a></li>
<li><a href="../manual/module/ifs/worker_threads.md.html" class="notranslate">worker_threads</a></li>
<li><a href="../manual/module/ifs/ws.md.html" class="notranslate">ws</a></li>
<li><a href="../manual/module/ifs/xml.md.html" class="notranslate">xml</a></li>
<li><a href="../manual/module/ifs/zip.md.html" class="notranslate">zip</a></li>
<li><a href="../manual/module/ifs/zlib.md.html" class="notranslate">zlib</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_object" aria-controls="collapse_object"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ingebouwd voorwerp</font></font></a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/object/ifs/blskey.md.html" class="notranslate">BlsKey</a></li>
<li><a href="../manual/object/ifs/buffer.md.html" class="notranslate">Buffer</a></li>
<li><a href="../manual/object/ifs/bufferedstream.md.html" class="notranslate">BufferedStream</a></li>
<li><a href="../manual/object/ifs/chain.md.html" class="notranslate">Chain</a></li>
<li><a href="../manual/object/ifs/childprocess.md.html" class="notranslate">ChildProcess</a></li>
<li><a href="../manual/object/ifs/cipher.md.html" class="notranslate">Cipher</a></li>
<li><a href="../manual/object/ifs/condition.md.html" class="notranslate">Condition</a></li>
<li><a href="../manual/object/ifs/dbconnection.md.html" class="notranslate">DbConnection</a></li>
<li><a href="../manual/object/ifs/dgramsocket.md.html" class="notranslate">DgramSocket</a></li>
<li><a href="../manual/object/ifs/digest.md.html" class="notranslate">Digest</a></li>
<li><a href="../manual/object/ifs/eckey.md.html" class="notranslate">ECKey</a></li>
<li><a href="../manual/object/ifs/ed25519key.md.html" class="notranslate">Ed25519Key</a></li>
<li><a href="../manual/object/ifs/event.md.html" class="notranslate">Event</a></li>
<li><a href="../manual/object/ifs/eventemitter.md.html" class="notranslate">EventEmitter</a></li>
<li><a href="../manual/object/ifs/fswatcher.md.html" class="notranslate">FSWatcher</a></li>
<li><a href="../manual/object/ifs/fiber.md.html" class="notranslate">Fiber</a></li>
<li><a href="../manual/object/ifs/file.md.html" class="notranslate">File</a></li>
<li><a href="../manual/object/ifs/handler.md.html" class="notranslate">Handler</a></li>
<li><a href="../manual/object/ifs/heapgraphedge.md.html" class="notranslate">HeapGraphEdge</a></li>
<li><a href="../manual/object/ifs/heapgraphnode.md.html" class="notranslate">HeapGraphNode</a></li>
<li><a href="../manual/object/ifs/heapsnapshot.md.html" class="notranslate">HeapSnapshot</a></li>
<li><a href="../manual/object/ifs/httpclient.md.html" class="notranslate">HttpClient</a></li>
<li><a href="../manual/object/ifs/httpcollection.md.html" class="notranslate">HttpCollection</a></li>
<li><a href="../manual/object/ifs/httpcookie.md.html" class="notranslate">HttpCookie</a></li>
<li><a href="../manual/object/ifs/httphandler.md.html" class="notranslate">HttpHandler</a></li>
<li><a href="../manual/object/ifs/httpmessage.md.html" class="notranslate">HttpMessage</a></li>
<li><a href="../manual/object/ifs/httprepeater.md.html" class="notranslate">HttpRepeater</a></li>
<li><a href="../manual/object/ifs/httprequest.md.html" class="notranslate">HttpRequest</a></li>
<li><a href="../manual/object/ifs/httpresponse.md.html" class="notranslate">HttpResponse</a></li>
<li><a href="../manual/object/ifs/httpserver.md.html" class="notranslate">HttpServer</a></li>
<li><a href="../manual/object/ifs/httpuploaddata.md.html" class="notranslate">HttpUploadData</a></li>
<li><a href="../manual/object/ifs/httpsserver.md.html" class="notranslate">HttpsServer</a></li>
<li><a href="../manual/object/ifs/image.md.html" class="notranslate">Image</a></li>
<li><a href="../manual/object/ifs/iterator.md.html" class="notranslate">Iterator</a></li>
<li><a href="../manual/object/ifs/leveldb.md.html" class="notranslate">LevelDB</a></li>
<li><a href="../manual/object/ifs/lock.md.html" class="notranslate">Lock</a></li>
<li><a href="../manual/object/ifs/lrucache.md.html" class="notranslate">LruCache</a></li>
<li><a href="../manual/object/ifs/memorystream.md.html" class="notranslate">MemoryStream</a></li>
<li><a href="../manual/object/ifs/message.md.html" class="notranslate">Message</a></li>
<li><a href="../manual/object/ifs/mongocollection.md.html" class="notranslate">MongoCollection</a></li>
<li><a href="../manual/object/ifs/mongocursor.md.html" class="notranslate">MongoCursor</a></li>
<li><a href="../manual/object/ifs/mongodb.md.html" class="notranslate">MongoDB</a></li>
<li><a href="../manual/object/ifs/mongoid.md.html" class="notranslate">MongoID</a></li>
<li><a href="../manual/object/ifs/mysql.md.html" class="notranslate">MySQL</a></li>
<li><a href="../manual/object/ifs/odbc.md.html" class="notranslate">Odbc</a></li>
<li><a href="../manual/object/ifs/pkey.md.html" class="notranslate">PKey</a></li>
<li><a href="../manual/object/ifs/rangestream.md.html" class="notranslate">RangeStream</a></li>
<li><a href="../manual/object/ifs/redis.md.html" class="notranslate">Redis</a></li>
<li><a href="../manual/object/ifs/redishash.md.html" class="notranslate">RedisHash</a></li>
<li><a href="../manual/object/ifs/redislist.md.html" class="notranslate">RedisList</a></li>
<li><a href="../manual/object/ifs/redisset.md.html" class="notranslate">RedisSet</a></li>
<li><a href="../manual/object/ifs/redissortedset.md.html" class="notranslate">RedisSortedSet</a></li>
<li><a href="../manual/object/ifs/routing.md.html" class="notranslate">Routing</a></li>
<li><a href="../manual/object/ifs/sqlite.md.html" class="notranslate">SQLite</a></li>
<li><a href="../manual/object/ifs/sandbox.md.html" class="notranslate">SandBox</a></li>
<li><a href="../manual/object/ifs/seekablestream.md.html" class="notranslate">SeekableStream</a></li>
<li><a href="../manual/object/ifs/semaphore.md.html" class="notranslate">Semaphore</a></li>
<li><a href="../manual/object/ifs/service.md.html" class="notranslate">Service</a></li>
<li><a href="../manual/object/ifs/smtp.md.html" class="notranslate">Smtp</a></li>
<li><a href="../manual/object/ifs/socket.md.html" class="notranslate">Socket</a></li>
<li><a href="../manual/object/ifs/sslhandler.md.html" class="notranslate">SslHandler</a></li>
<li><a href="../manual/object/ifs/sslserver.md.html" class="notranslate">SslServer</a></li>
<li><a href="../manual/object/ifs/sslsocket.md.html" class="notranslate">SslSocket</a></li>
<li><a href="../manual/object/ifs/stat.md.html" class="notranslate">Stat</a></li>
<li><a href="../manual/object/ifs/statswatcher.md.html" class="notranslate">StatsWatcher</a></li>
<li><a href="../manual/object/ifs/stream.md.html" class="notranslate">Stream</a></li>
<li><a href="../manual/object/ifs/stringdecoder.md.html" class="notranslate">StringDecoder</a></li>
<li><a href="../manual/object/ifs/ttyinputstream.md.html" class="notranslate">TTYInputStream</a></li>
<li><a href="../manual/object/ifs/ttyoutputstream.md.html" class="notranslate">TTYOutputStream</a></li>
<li><a href="../manual/object/ifs/tcpserver.md.html" class="notranslate">TcpServer</a></li>
<li><a href="../manual/object/ifs/textdecoder.md.html" class="notranslate">TextDecoder</a></li>
<li><a href="../manual/object/ifs/textencoder.md.html" class="notranslate">TextEncoder</a></li>
<li><a href="../manual/object/ifs/timer.md.html" class="notranslate">Timer</a></li>
<li><a href="../manual/object/ifs/urlobject.md.html" class="notranslate">UrlObject</a></li>
<li><a href="../manual/object/ifs/websocket.md.html" class="notranslate">WebSocket</a></li>
<li><a href="../manual/object/ifs/websocketmessage.md.html" class="notranslate">WebSocketMessage</a></li>
<li><a href="../manual/object/ifs/webview.md.html" class="notranslate">WebView</a></li>
<li><a href="../manual/object/ifs/worker.md.html" class="notranslate">Worker</a></li>
<li><a href="../manual/object/ifs/x509cert.md.html" class="notranslate">X509Cert</a></li>
<li><a href="../manual/object/ifs/x509crl.md.html" class="notranslate">X509Crl</a></li>
<li><a href="../manual/object/ifs/x509req.md.html" class="notranslate">X509Req</a></li>
<li><a href="../manual/object/ifs/xmlattr.md.html" class="notranslate">XmlAttr</a></li>
<li><a href="../manual/object/ifs/xmlcdatasection.md.html" class="notranslate">XmlCDATASection</a></li>
<li><a href="../manual/object/ifs/xmlcharacterdata.md.html" class="notranslate">XmlCharacterData</a></li>
<li><a href="../manual/object/ifs/xmlcomment.md.html" class="notranslate">XmlComment</a></li>
<li><a href="../manual/object/ifs/xmldocument.md.html" class="notranslate">XmlDocument</a></li>
<li><a href="../manual/object/ifs/xmldocumenttype.md.html" class="notranslate">XmlDocumentType</a></li>
<li><a href="../manual/object/ifs/xmlelement.md.html" class="notranslate">XmlElement</a></li>
<li><a href="../manual/object/ifs/xmlnamednodemap.md.html" class="notranslate">XmlNamedNodeMap</a></li>
<li><a href="../manual/object/ifs/xmlnode.md.html" class="notranslate">XmlNode</a></li>
<li><a href="../manual/object/ifs/xmlnodelist.md.html" class="notranslate">XmlNodeList</a></li>
<li><a href="../manual/object/ifs/xmlprocessinginstruction.md.html" class="notranslate">XmlProcessingInstruction</a></li>
<li><a href="../manual/object/ifs/xmltext.md.html" class="notranslate">XmlText</a></li>
<li><a href="../manual/object/ifs/zipfile.md.html" class="notranslate">ZipFile</a></li>
<li><a href="../manual/object/ifs/object.md.html" class="notranslate">object</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_awesome" aria-controls="collapse_awesome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gemeenschapsmodule</font></font></a></h4></div><div id="collapse_awesome" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../awesome/module/fib-session.md.html" class="notranslate">fib-session</a></li>
<li><a href="../awesome/module/fib-pool.md.html" class="notranslate">fib-pool</a></li>
<li><a href="../awesome/module/fib-orm.md.html" class="notranslate">fib-orm</a></li>
<li><a href="../awesome/module/fib-app.md.html" class="notranslate">fib-app</a></li>
<li><a href="../awesome/module/fib-kv.md.html" class="notranslate">fib-kv</a></li>
<li><a href="../awesome/module/fib-rpc.md.html" class="notranslate">fib-rpc</a></li>
<li><a href="../awesome/module/fib-qr.md.html" class="notranslate">fib-qr</a></li>
<li><a href="../awesome/module/fib-pug.md.html" class="notranslate">fib-pug</a></li>
<li><a href="../awesome/module/ejs.md.html" class="notranslate">ejs</a></li>
<li><a href="../awesome/module/juicer.md.html" class="notranslate">Juicer</a></li>
<li><a href="../awesome/module/highlight.js.md.html" class="notranslate">highlight.js</a></li>
<li><a href="../awesome/module/marked.md.html" class="notranslate">marked</a></li>
<li><a href="../awesome/module/node-cron.md.html" class="notranslate">node-cron</a></li>
<li><a href="../awesome/module/debug.md.html" class="notranslate">debug</a></li>
<li><a href="../awesome/module/benchmark.js.md.html" class="notranslate">benchmark.js</a></li>
<li><a href="../awesome/module/sinon.md.html" class="notranslate">sinon</a></li>
<li><a href="../awesome/module/node-mime.md.html" class="notranslate">node-mime</a></li>
<li><a href="../awesome/module/validatorjs.md.html" class="notranslate">validatorjs</a></li>
<li><a href="../awesome/module/superstruct.md.html" class="notranslate">superstruct</a></li>
<li><a href="../awesome/module/cluster-server.md.html" class="notranslate">cluster-server</a></li>
<li><a href="../awesome/module/synaptic.md.html" class="notranslate">synaptic</a></li>
<li><a href="../awesome/module/source-map.md.html" class="notranslate">source-map</a></li>
<li><a href="../awesome/module/json-format.md.html" class="notranslate">json-format</a></li>
<li><a href="../awesome/module/viz.js.md.html" class="notranslate">viz.js</a></li>
<li><a href="../awesome/module/nomnoml.md.html" class="notranslate">nomnoml</a></li>
<li><a href="../awesome/module/pegjs.md.html" class="notranslate">pegjs</a></li>
<li><a href="../awesome/module/uglify-js.md.html" class="notranslate">uglify-js</a></li>
<li><a href="../awesome/module/js-beautify.md.html" class="notranslate">js-beautify</a></li>
<li><a href="../awesome/module/chalk-animation.md.html" class="notranslate">chalk-animation</a></li>
<li><a href="../awesome/module/jsrsasign.md.html" class="notranslate">jsrsasign</a></li>
<li><a href="../awesome/module/crypto-js.md.html" class="notranslate">crypto-js</a></li>
<li><a href="../awesome/module/ascii-table.md.html" class="notranslate">ascii-table</a></li>
<li><a href="../awesome/module/logstream.md.html" class="notranslate">logstream</a></li>
<li><a href="../awesome/module/ci.md.html" class="notranslate">ci</a></li>
<li><a href="../awesome/module/fs-readdir-recursive.md.html" class="notranslate">fs-readdir-recursive</a></li>
<li><a href="../awesome/module/mkdirp.md.html" class="notranslate">mkdirp</a></li>
<li><a href="../awesome/module/rmdirr.md.html" class="notranslate">rmdirr</a></li>
<li><a href="../awesome/module/detect-port.md.html" class="notranslate">detect-port</a></li>
<li><a href="../awesome/module/bitcoinjs-lib.md.html" class="notranslate">bitcoinjs-lib</a></li>
<li><a href="../awesome/module/rakuten.md.html" class="notranslate">Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class="content"><div class="social-share share-component" data-sites="weibo,twitter" data-description="分享"></div> <h1 id="高性能-Web-应用程序实践"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktijken voor hoogwaardige webapplicaties</font></font></h1>
<h2 id="介绍"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voorstellen</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fibjs is een krachtig applicatieserverframework dat voornamelijk is ontworpen voor web-backend-ontwikkeling. </font><font style="vertical-align: inherit;">Het is gebouwd op basis van de Google v8 JavaScript-engine en kiest een andere concurrency-oplossing dan de traditionele callback. </font><font style="vertical-align: inherit;">fibjs gebruikt vezels om de zakelijke complexiteit te isoleren die wordt veroorzaakt door asynchrone oproepen op de framework-laag, waardoor de moeilijkheid van ontwikkeling aanzienlijk wordt verminderd en de prestatieproblemen worden verminderd die worden veroorzaakt door frequente asynchrone verwerking in de gebruikersruimte.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bij het ontwerp van fibjs is veel aandacht besteed aan prestaties.De ingebouwde netwerk-IO- en HTTP-modules maken gebruik van een gebeurtenisgestuurd niet-blokkerend I/O-model en ontwikkelaars kunnen eenvoudig uiterst betrouwbare servertoepassingen implementeren. </font><font style="vertical-align: inherit;">En omdat de onderste laag is geïmplementeerd door C++, heeft fibjs uitstekende prestaties, kan het gemakkelijk hoge gelijktijdige toegang aan en biedt het uiterst stabiele en betrouwbare services.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tegelijkertijd ondersteunt fibjs ook WebSocket, een full-duplex communicatieprotocol gebaseerd op het TCP-protocol.Het brengt een ononderbroken verbinding tot stand tussen de browser en de server, die real-time tweerichtingsgegevensoverdracht kan realiseren, en kan ondersteuning van gegevens in elk formaat transmissie. </font><font style="vertical-align: inherit;">Real-time communicatietoepassingen met betere communicatie-effecten kunnen eenvoudig worden gerealiseerd door WebSocket te gebruiken.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kortom, fibjs legt niet alleen de nadruk op hoge prestaties en hoge betrouwbaarheid, maar biedt ook real-time communicatiefuncties zoals WebSocket, een framework dat zeer geschikt is voor het ontwikkelen van snelle webapplicaties.</font></font></p>
<h2 id="开发环境搭建"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bouw de ontwikkelomgeving</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voordat we beginnen met de ontwikkeling van fibjs, moeten we eerst de ontwikkelomgeving voorbereiden. </font><font style="vertical-align: inherit;">In dit hoofdstuk wordt uitgelegd hoe u fibjs installeert, hoe u de fibjs-tool gebruikt om het project te initialiseren en hoe u de geïntegreerde IDE-ontwikkelomgeving gebruikt.</font></font></p>
<h3 id="安装-fibjs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installeer fibjs</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voor verschillende besturingssystemen is de manier om fibjs te installeren ook iets anders.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voor Linux- en macOS-gebruikers kan fibjs worden geïnstalleerd met de volgende opdracht:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -s https://fibjs.org/download/installer.sh | sh
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als u macOS gebruikt en de Homebrew-pakketbeheerder gebruikt, kunt u deze ook installeren met:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>brew install fibjs
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voor Windows-gebruikers moet u het installatieprogramma downloaden van de officiële website van fibjs en vervolgens de instructies volgen om het te installeren.</font></font></p>
<h3 id="使用-fibjs-–init-创建新项目"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maak een nieuw project aan met fibjs --init</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na het installeren van fibjs, kunt u de fibjs-tool gebruiken om snel nieuwe projecten te maken. </font><font style="vertical-align: inherit;">Met de volgende opdracht kan een basisprojectsjabloon worden gemaakt:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --init
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deze opdracht maakt een nieuwe projectstructuur aan in de huidige directory, inclusief package.json, die wordt gebruikt om de basisinformatie van het project en afhankelijkheidsinformatie op te slaan.</font></font></p>
<h2 id="编写-Web-应用程序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schrijf een webapplicatie</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De ontwikkeling van webapplicaties is momenteel het meest gebruikte applicatiescenario voor fibjs. fibjs biedt een reeks tools en modules om ons te helpen sneller webapplicaties te bouwen.</font></font></p>
<h3 id="编写-HTTP-服务器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schrijf een HTTP-server</font></font></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importeer eerst de http-module;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maak een instantiëring van http.Server en luister naar verzoeken.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De server wordt gestart met de startfunctie.</font></font></li>
</ul>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {<font></font>
    req.response.write(<span class="hljs-string">'Hello World!'</span>);<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<h3 id="解析-URL-参数和请求体"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parseer URL-parameters en aanvraagtekst</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Het parseren van URL-parameters en de hoofdtekst van het verzoek is erg belangrijk en wordt toegepast op verschillende servertoepassingen. </font><font style="vertical-align: inherit;">In fibjs kunnen de inkomende URL-parameters rechtstreeks worden geparseerd via req.query, terwijl de aanvraagtekst wordt gelezen via req.body.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">var</span> name = req.query.first(<span class="hljs-string">'name'</span>);
    <span class="hljs-keyword">var</span> msg = name ? <span class="hljs-string">`Hello <span class="hljs-subst">${name}</span>!`</span> : <span class="hljs-string">'Hello world!'</span>;<font></font>
    req.response.write(msg);<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<h3 id="实现接口访问控制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementeer interfacetoegangscontrole</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Het beperken van gebruikerstoegang via interfaces is een veel voorkomend scenario. </font><font style="vertical-align: inherit;">Hieronder is een eenvoudig voorbeeld.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">if</span> (req.headers.first(<span class="hljs-string">'auth'</span>) === <span class="hljs-string">'ok'</span>) {<font></font>
        req.response.write(<span class="hljs-string">'Hello World!'</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        req.response.write(<span class="hljs-string">'Access Denied!'</span>);<font></font>
    }<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<h3 id="增加路由处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Routeringsverwerking toevoegen</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Routing is een van de belangrijkste concepten in een webapplicatie en verwijst naar het volgens bepaalde regels distribueren van ontvangen verzoeken naar verwerkers. </font><font style="vertical-align: inherit;">In fibjs kunt u uw eigen routeringsmodule schrijven en deze aan de http-server binden en vervolgens URL-overeenkomsten en overeenkomstige verwerking uitvoeren via aangepaste routeringsparsing.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> { Router } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mq'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> router = <span class="hljs-keyword">new</span> Router();<font></font>
router.get(<span class="hljs-string">'/hello/:name'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, name</span>) </span>{<font></font>
    req.response.write(<span class="hljs-string">'hello, '</span> + name);<font></font>
});<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, router);<font></font>
svr.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Het bovenstaande voorbeeld kan ook worden geïmplementeerd met een eenvoudigere syntaxis:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
    <span class="hljs-string">'/hello/:name'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, name</span>) </span>{<font></font>
        req.response.write(<span class="hljs-string">'hello, '</span> + name);<font></font>
    }<font></font>
});<font></font>
svr.start();<font></font>
</code></pre>
<h3 id="错误处理与日志记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foutafhandeling en logboekregistratie</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs kun je logische uitzonderingen opvangen via het try-catch-blok en ze uitvoeren naar het logbestand voor foutopsporingsrecord; als het een fatale uitzondering is, kun je deze direct naar het bovenste raamwerk gooien voor verwerking.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10</div><span class="hljs-keyword">const</span> <span class="hljs-built_in">console</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'console'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ...</span>
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-built_in">console</span>.log(e.message, e.stack);<font></font>
    }<font></font>
});<font></font>
</code></pre>
<h2 id="WebSocket"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebSocket</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Het WebSocket-protocol is een full-duplex communicatieprotocol op basis van het TCP-protocol, dat een ononderbroken verbinding tot stand brengt tussen de browser en de server, real-time tweerichtingsgegevensoverdracht kan realiseren en gegevensoverdracht in elk formaat kan ondersteunen. </font><font style="vertical-align: inherit;">In fibjs biedt de WebSocket-ondersteuningsmodule de bijbehorende API-interface, die de ontwikkeling van WebSocket-server en -client kan realiseren.</font></font></p>
<h3 id="使用-fibjs-原生-WebSocket-模块实现-WebSocket-服务器端"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gebruik fibjs native WebSocket-module om WebSocket-serverzijde te implementeren</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aan de serverzijde kunnen HTTP-verzoeken worden geconverteerd naar WebSocket-verbindingen via de upgradefunctie. </font><font style="vertical-align: inherit;">Wanneer u een http-serverobject maakt, kunt u ws.upgrade(callback) gebruiken en dit doorgeven aan de methode http.start() om het http-verzoek om te zetten in WebSocket.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
  <span class="hljs-string">'/ws'</span>: ws.upgrade(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">conn, req</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'a client connected.'</span>);<font></font>
<font></font>
    <span class="hljs-comment">// 监听消息事件</span>
    conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'received message: '</span>, evt.data);
      <span class="hljs-comment">// echo 消息回客户端</span>
      conn.send(<span class="hljs-string">'Server: '</span> + evt.data);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听关闭事件</span>
    conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'closed.'</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听错误事件</span>
    conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      <span class="hljs-built_in">console</span>.log(err);<font></font>
    };<font></font>
  })<font></font>
});<font></font>
<font></font>
server.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In het bovenstaande voorbeeld kunnen we de berichtgebeurtenis controleren die door de client is verzonden en de gebeurtenis voor het sluiten van de verbinding tussen de server en de client. </font><font style="vertical-align: inherit;">Wanneer de server een clientbericht ontvangt, stuurt het hetzelfde bericht terug naar de client. </font><font style="vertical-align: inherit;">Op dit punt wordt eenvoudige WebSocket point-to-point-communicatie gerealiseerd.</font></font></p>
<h3 id="实现与数据存储的交互"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interactie met datastores implementeren</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bij het gebruik van WebSocket voor communicatie moeten naast het eenvoudig verzenden en ontvangen van berichten ook rekening worden gehouden met bewerkingen zoals permanente opslag en het opvragen van gegevens. </font><font style="vertical-align: inherit;">Op dit moment moet u de database gebruiken en kunt u de ingebouwde db-module van fibjs gebruiken om met de database te communiceren.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De voorbeeldcode is als volgt:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">"ws"</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">var</span> db = <span class="hljs-built_in">require</span>(<span class="hljs-string">"db"</span>);<font></font>
<font></font>
<span class="hljs-comment">// 创建一个 MySQL 数据库连接对象</span>
<span class="hljs-keyword">var</span> mysql = db.openMySQL(<span class="hljs-string">"mysql://root:password@localhost/dbname"</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
  <span class="hljs-string">"/ws"</span>: ws.upgrade(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">conn, req</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"a client connected."</span>);<font></font>
<font></font>
    <span class="hljs-comment">// 监听消息事件</span>
    conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"received message: "</span>, evt.data);<font></font>
<font></font>
      <span class="hljs-comment">// 查询数据库，返回满足条件的记录</span>
      <span class="hljs-keyword">var</span> rs = mysql.execute(<span class="hljs-string">"SELECT * FROM user WHERE name=?"</span>, evt.data.toString());<font></font>
      conn.send(<span class="hljs-built_in">JSON</span>.stringify(rs));<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听关闭事件</span>
    conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"closed."</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听错误事件</span>
    conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      <span class="hljs-built_in">console</span>.log(err);<font></font>
    };<font></font>
  })<font></font>
});<font></font>
<font></font>
server.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In het bovenstaande voorbeeld gebruiken we eerst de openMySQL-methode van de db-module om een ​​MySQL-databaseverbindingsobject mysql te maken, en gebruiken we vervolgens de execute-methode om direct SQL-query's uit te voeren na het beluisteren van berichten van de client om records te verkrijgen die aan de voorwaarden voldoen. </font><font style="vertical-align: inherit;">Ten slotte worden de queryresultaten teruggestuurd naar de client via het WebSocket-protocol.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opgemerkt moet worden dat bij de daadwerkelijke ontwikkeling de afhandeling van uitzonderingen en gegevensbeveiliging goed moeten worden gedaan.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kortom, via de db-module kunnen we eenvoudig communiceren met de database, in combinatie met het WebSocket-protocol, om real-time, krachtige webapplicaties te realiseren.</font></font></p>
<h3 id="实现-WebSocket-客户端与服务器端通信"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementeer WebSocket-client-server-communicatie</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aan de clientzijde kunt u verbinding maken met een WebSocket-server door een WebSocket-instantie te maken en een URL op te geven, en vervolgens berichten naar de server te sturen.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);<font></font>
<font></font>
<span class="hljs-comment">// 创建 WebSocket 实例</span>
<span class="hljs-keyword">var</span> conn = <span class="hljs-keyword">new</span> ws.Socket(<span class="hljs-string">'ws://localhost:8080/ws'</span>);<font></font>
<font></font>
<span class="hljs-comment">// 监听打开事件</span>
conn.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
  conn.send(<span class="hljs-string">'hello'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// 监听消息事件</span>
conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'received message:'</span>, evt.data);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// 监听关闭事件</span>
conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'closed.'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// 监听错误事件</span>
conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
  <span class="hljs-built_in">console</span>.log(err);<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In de bovenstaande clientcode maken we een WebSocket-instantie en specificeren we de URL. Nadat de verbinding tot stand is gebracht, kunnen we berichten naar de server sturen. </font><font style="vertical-align: inherit;">Wanneer de server een clientbericht ontvangt, stuurt het hetzelfde bericht terug naar de client. </font><font style="vertical-align: inherit;">Op dit punt wordt eenvoudige WebSocket point-to-point-communicatie gerealiseerd.</font></font></p>
<h3 id="WebSocket-的优势和使用场景"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voordelen en gebruiksscenario's van WebSocket</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Het WebSocket-protocol heeft een typisch tweerichtingscommunicatiemodel, waardoor de server actief gegevens naar de client kan pushen, en wordt vaak gebruikt om chats, online games en andere gelegenheden te implementeren die realtime en hoge directheid vereisen. </font><font style="vertical-align: inherit;">In vergelijking met andere transportprotocollen heeft het WebSocket-protocol de volgende voordelen:</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Hoge real-time prestaties, ondersteuning voor tweerichtingscommunicatie • Eenvoudige protocolspecificatie, gebruiksvriendelijk • Kan een groot aantal gelijktijdige verbindingen aan • Ondersteunt lange verbindingen, waardoor het tijdsverbruik van netwerktransmissie wordt verminderd</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De meest voorkomende gebruiksscenario's van WebSocket zijn onder meer webchat, game battle, online spelen en instant messaging, enz.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kortom, met de WebSocket-ondersteuningsmodule is het heel eenvoudig te implementeren en kunnen ontwikkelaars snel hun eigen webapplicaties bouwen.</font></font></p>
<h2 id="单元测试"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hoofdstuk toets</font></font></h2>
<h3 id="测试框架和测试方法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testkader en testmethode</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In het software ontwikkelproces is testen een zeer belangrijke schakel, en unit testing is daar een belangrijk onderdeel van.Unit testing kan effectief verifiëren of de code voldoet aan het ontwerp en de eisen, en voorkomt fouten die ontstaan ​​bij het wijzigen van de code. </font><font style="vertical-align: inherit;">Over het algemeen is het principe van het testen van eenheden het testen van elke functie en methode om er zeker van te zijn dat de input en output van elke functie en methode correct zijn.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Een testframework is een codebasis voor het schrijven, uitvoeren en verifiëren van testcases, die functies biedt zoals testcasebeheer, uitvoeren en rapporteren. </font><font style="vertical-align: inherit;">In JavaScript en Node.js zijn populaire frameworks voor het testen van eenheden onder andere Mocha, Jest en Jasmine. </font><font style="vertical-align: inherit;">In fibjs hebben we ook ons ​​eigen testraamwerk, de testmodule.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In het unit-testproces omvatten algemeen gebruikte testmethoden black-box-testen en white-box-testen.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Black-box-testen is een testmethode die alleen rekening houdt met de invoer en uitvoer van een functie, zonder rekening te houden met de implementatiedetails binnen de functie. </font><font style="vertical-align: inherit;">Black-box-testen zijn gebaseerd op vereistenanalyse en ontwerpspecificaties, door middel van testcase-analyse en -uitvoering, om te bepalen of er logische fouten, grensfouten en beveiligingsproblemen in het programma zijn. </font><font style="vertical-align: inherit;">Het voordeel is dat het testproces eenvoudig is en de testresultaten betrouwbaar zijn, maar het nadeel is dat de test niet alle programmapaden kan dekken.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">White box-testen is een testmethode die rekening houdt met de interne implementatiedetails van functies, waaronder voorwaardelijke statements, lusstatements, recursie en codedekking. </font><font style="vertical-align: inherit;">Door middel van deze tests kun je mogelijke problemen vinden in de interactie tussen gedeelde data en code. </font><font style="vertical-align: inherit;">Het voordeel van white-box-testen is dat het alle programmapaden kan bestrijken, het nadeel is dat het testproces gecompliceerder is en de testresultaten worden beïnvloed door de omgeving en implementatiemethoden.</font></font></p>
<h3 id="使用-test-模块编写测试用例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schrijf testgevallen met behulp van de testmodule</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs kunnen we de testmodule gebruiken om testcases voor de webserver te schrijven. </font><font style="vertical-align: inherit;">Hier is een eenvoudig voorbeeld:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14</div><span class="hljs-keyword">var</span> test = <span class="hljs-built_in">require</span>(<span class="hljs-string">'test'</span>);<font></font>
test.setup();<font></font>
<font></font>
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
describe(<span class="hljs-string">'Web server test'</span>, () =&gt; {<font></font>
    it(<span class="hljs-string">'should return hello world'</span>, () =&gt; {
        <span class="hljs-keyword">var</span> r = http.get(<span class="hljs-string">'http://localhost:8080/hello'</span>);<font></font>
        assert.equal(r.statusCode, <span class="hljs-number">200</span>);<font></font>
        assert.equal(r.data.toString(), <span class="hljs-string">'Hello World'</span>);<font></font>
    });<font></font>
});<font></font>
<font></font>
test.run();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In dit voorbeeld gebruiken we de functies description en it om respectievelijk de testmodule en testcases te definiëren, en gebruiken we de assert-functie voor assertion-verificatie.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In de functie beschrijven kunnen we meerdere it-functies definiëren om respectievelijk verschillende scenario's te testen. </font><font style="vertical-align: inherit;">In elke it-functie kunnen we de http.get-functie gebruiken om een ​​HTTP GET-verzoek te simuleren, het verzoekantwoord te verkrijgen en beweringsverificatie uit te voeren, zoals assertTrue en assertEqual.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Door testcases te schrijven, kunt u de juistheid van functies en modules effectief testen, de productkwaliteit waarborgen en de onderhoudbaarheid van code verbeteren.</font></font></p>
<h2 id="热更新"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hete updates</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hot update verwijst naar het bijwerken van de servercode zonder de service te stoppen. </font><font style="vertical-align: inherit;">Om snel te kunnen itereren, is het tijdens het ontwikkelen van programma's vaak nodig om de code aan te passen en nieuwe functies toe te voegen. </font><font style="vertical-align: inherit;">Het gebruik van hot update kan nieuwe code gebruiken om iteratiewerk efficiënter te voltooien zonder de service te stoppen.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs kunnen we de SandBox-module gebruiken om soepele hot-updates te bereiken. </font><font style="vertical-align: inherit;">De SandBox-module kan een veilige uitvoeringsomgeving bieden, globale variabelen en andere functies simuleren. </font><font style="vertical-align: inherit;">Raadpleeg de volgende stappen voor een specifieke implementatie:</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laad de codebestanden die moeten worden bijgewerkt (zoals web.js).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maak via SandBox een nieuwe beveiligingsmodule, laad web.js in deze module en genereer een beveiligingsmodule. </font><font style="vertical-align: inherit;">Koppel de handler van de actieve service opnieuw via de gegenereerde beveiligingsmodule.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De server gaat door met het verwerken van eerdere verzoeken en nieuwe verzoeken worden aan de nieuwe handler gekoppeld.</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier is een voorbeeldcode voor soepele hot-updates met behulp van de SandBox-module:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</div><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> { SandBox } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vm'</span>);<font></font>
<font></font>
<span class="hljs-keyword">let</span> FILE_PATH = <span class="hljs-string">'./web.js'</span>;
<span class="hljs-keyword">let</span> handler = <span class="hljs-keyword">new</span> SandBox().require(FILE_PATH).handler;<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, handler);<font></font>
<font></font>
server.start();<font></font>
<font></font>
fs.watch(FILE_PATH, (event, filename) =&gt; {<font></font>
  handler = <span class="hljs-keyword">new</span> SandBox().require(FILE_PATH).handler;<font></font>
  server.handler = handler;<font></font>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleString()}</span>] server reloaded.`</span>);<font></font>
});<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In deze code laden we de code eerst een keer in web.js wanneer het programma start, maken vervolgens een SandBox-instantie aan en laden de code in de instantie. </font><font style="vertical-align: inherit;">Daarna hebben we een nieuwe HTTP-server gemaakt en de methode in handler gebruikt om het verzoek te verwerken.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In de code gebruiken we fs.watch om de wijzigingen van het web.js-bestand te volgen. Zodra het bestand is gewijzigd, laden we de code opnieuw en werken we de implementatie in de handler bij.</font></font></p>
<h2 id="性能优化"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prestatie optimalisatie</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tijdens het ontwikkelingsproces hebben we vaak te maken met prestatieproblemen. </font><font style="vertical-align: inherit;">Het optimaliseren van code en het verbeteren van de prestaties is een van de noodzakelijke vaardigheden voor ontwikkelaars. </font><font style="vertical-align: inherit;">In fibjs kunnen we CPU Profiler gebruiken om ons te helpen de lopende status van het programma te analyseren en de code te optimaliseren.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs hoeft u alleen de opdrachtregelparameter --prof te gebruiken om fibjs te starten, dat wil zeggen dat u CPU Profiler kunt starten (het standaardinterval is 1000 ms). </font><font style="vertical-align: inherit;">Als u analyselogboeken met een hogere precisie nodig hebt, kunt u de parameter --prof-interval gebruiken om het loginterval in te stellen. </font><font style="vertical-align: inherit;">Bijvoorbeeld:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2</div>$ fibjs --prof test.js   <span class="hljs-comment"># 启动 CPU Profiler，默认以 1000ms 为间隔</span>
$ fibjs --prof --prof-interval=10ms test.js <span class="hljs-comment"># 启动 CPU Profiler，以 10000us（即 10ms）为间隔</span>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wanneer fibjs klaar is met draaien, wordt een map met de naam van het bronbestand gegenereerd in de huidige map, die een logbestand en enkele hulpbestanden bevat. </font><font style="vertical-align: inherit;">De standaardnaam van het logbestand is fibjs-xxxx.log, waarbij xxxx een tijdstempel is. </font><font style="vertical-align: inherit;">De naam van het logbestand kan worden opgegeven met de optie --log. </font><font style="vertical-align: inherit;">Op dit punt kunt u de gegenereerde logboeken </font></font><code>--prof-process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verwerken :</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --prof-process fibjs-xxxx.log prof.svg
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open na het uitvoeren prof.svg met een browser om de vlamgrafiek van dit logboek te bekijken:
 </font></font><img src="./imgs/prof.svg" alt="prof"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
U kunt klikken om de afbeelding op volledige grootte te bekijken.In de afbeelding op volledige grootte kunt u de muis gebruiken om meer gedetailleerde informatie te bekijken: </font></font><a href="./imgs/prof.svg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prof.svg. svg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In het gegenereerde vlamdiagram vertegenwoordigt elk kleurblok een opnamepunt. Hoe langer het kleurblok, hoe vaker het is opgenomen; elke lijn vertegenwoordigt een laag van oproepstapel, en hoe meer lagen, hoe meer lagen van oproepen; De opstelling van de stapel is omgekeerd, hoe lager het kleurblok, hoe meer de originele functie.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Er zijn twee soorten kleurblokken, de ene is rood en de andere is blauw. </font><font style="vertical-align: inherit;">In de profiler van fibjs staat rood voor JavaScript-bewerkingen en blauw voor io-bewerkingen of native bewerkingen. </font><font style="vertical-align: inherit;">Afhankelijk van het probleem dat u moet oplossen, variëren de gebieden waarop u zich moet concentreren. </font><font style="vertical-align: inherit;">Als u bijvoorbeeld het probleem van een hoog CPU-gebruik moet oplossen, moet u op dit moment op het rode kleurenblok letten; en als uw toepassing een laag CPU-gebruik heeft maar traag reageert, moet u op het blauwe letten kleur blok. </font><font style="vertical-align: inherit;">Hoe groter het kleurblok bovenaan, hoe meer aandacht en optimalisatie er nodig is.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We kunnen proberen de functies aan te passen die meer CPU-bronnen in beslag nemen, IO implementeren via asynchrone methoden of de code optimaliseren tijdens het schrijven.</font></font></p>
<h2 id="部署上线"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">online inzetten</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Om ons project in productie te laten gaan, moeten we het compileren en implementeren. </font><font style="vertical-align: inherit;">Hier laten we zien hoe u het bestand package.json kunt gebruiken om compilatie en implementatie te configureren.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In het project kunnen we package.json gebruiken om projectafhankelijkheden te beheren, compilatie en implementatie te configureren. </font><font style="vertical-align: inherit;">Neem een ​​eenvoudig voorbeeld package.json als voorbeeld:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"my-project"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"fib-pool"</span>: <span class="hljs-string">"^1.0.0"</span><font></font>
  }<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wanneer we het project moeten compileren en implementeren, hoeven we alleen de projectdirectory in de terminal in te voeren en vervolgens de volgende opdracht uit te voeren:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --install
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Met deze opdracht worden automatisch de modules geïnstalleerd waarvan het project afhankelijk is. </font><font style="vertical-align: inherit;">Daarna kunnen we het project starten met de volgende opdracht:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs app.js
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">👉 【</font></font><a href="host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Routering van domeinnamen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">】</font></font></p>
 </div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id="toc"></div></div></div></div><div class="footer"><div class="container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">© Copyright 2012-2021 fibjs.org | </font></font><a href="../../support.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steun ons</font></font></a></div></div><a id="back-to-top" href="#" class="btn btn-default btn-lg back-to-top" role="button" title="" data-toggle="tooltip" data-placement="left" data-original-title=""><span class="glyphicon glyphicon-chevron-up"></span></a><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript" src="../../../js/common.js"></script><script type="text/javascript" src="../../../js/docs.js"></script></body></html>