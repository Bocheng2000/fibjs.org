<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel="icon" type="image/png" href="../../../imgs/icon.png"><title>Практика высокопроизводительных веб-приложений — JavaScript по оптоволокну</title><link href="../../../css/common.css" rel="stylesheet"><link href="../../../css/docs.css" rel="stylesheet"></head><body><div class="navbar navbar-default navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="../../index.html"><img src="../../../imgs/logo-dark.png"></a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right notranslate"><li><a href="../../index.html">HOME</a></li><li><a href="readme.md.html">GUIDE</a></li><li><a href="../manual/module/readme.md.html">MODULE</a></li><li><a href="../manual/object/readme.md.html">OBJECT</a></li><li><a href="../awesome/readme.md.html">AWESOME</a></li><li><a href="../../../download/index.html">DOWNLOAD</a></li><li class="nav-item dropdown"><a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">LANGUAGE</a><div class="dropdown-menu"><a href="../../../docs/guide/web.md.html">中文</a> <a href="../../../ca/docs/guide/web.md.html">Catalan</a> <a href="../../../de/docs/guide/web.md.html">Deutsch</a> <a href="../../../en/docs/guide/web.md.html">English</a> <a href="../../../es/docs/guide/web.md.html">Español</a> <a href="../../../fr/docs/guide/web.md.html">Français</a> <a href="../../../gl/docs/guide/web.md.html">Galego</a> <a href="../../../it/docs/guide/web.md.html">Italiano</a> <a href="../../../nl/docs/guide/web.md.html">Nederlands</a> <a href="../../../ru/docs/guide/web.md.html">Русский</a> <a href="../../../ja/docs/guide/web.md.html">日本語</a> <a href="../../../ko/docs/guide/web.md.html">한국어</a> <a href="../../../zh-tw/docs/guide/web.md.html">繁體中文</a></div></li></ul></div></div></div><div class="band"><div class="container"><span class="group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Руководство по разработке руководства</font></font></span><div class="search"><span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="text" class="searchbox ds-input" placeholder="Поиск" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-label="ввод поиска" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Avenir, &quot;Segoe UI&quot;, Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span></div></div></div><div class="container"><ol class="breadcrumb"><li><a href="../../index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">титульная страница</font></font></a></li><li><a href="readme.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Руководство по разработке</font></font></a></li><li class="active"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Практика высокопроизводительных веб-приложений</font></font></li></ol></div><div class="page-body"><div class="container"><div class="sidebar hidden-xs"><div class="panel-group" id="accordion" role="tablist">  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_guide" aria-controls="collapse_guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Руководство по разработке</font></font></a></h4></div><div id="collapse_guide" class="panel-collapse collapse in" aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="about.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Что такое фибджс?</font></font></a></li>
<li><a href="install.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Установить операционную среду</font></font></a></li>
<li><a href="hello.md.html" class="notranslate">hello, world</a></li>
<li><a href="test.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Лучшая жизнь начинается с тестирования</font></font></a></li>
<li><a href="profiler.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Найдите убийцу производительности</font></font></a></li>
<li><a href="sync.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Синхронный и асинхронный</font></font></a></li>
<li><a href="server-hot-update.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Горячее обновление серверного модуля</font></font></a></li>
<li class="active"><a href="web.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Практика высокопроизводительных веб-приложений</font></font></a></li>
<li><a href="host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Маршрутизация доменного имени</font></font></a></li>
<li><a href="x509.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Использование сертификатов X509 в fibjs</font></font></a></li>
<li><a href="contribute.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Добавить родной модуль</font></font></a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_module" aria-controls="collapse_module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Базовый модуль</font></font></a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/module/ifs/assert.md.html" class="notranslate">assert</a></li>
<li><a href="../manual/module/ifs/base32.md.html" class="notranslate">base32</a></li>
<li><a href="../manual/module/ifs/base58.md.html" class="notranslate">base58</a></li>
<li><a href="../manual/module/ifs/base64.md.html" class="notranslate">base64</a></li>
<li><a href="../manual/module/ifs/child_process.md.html" class="notranslate">child_process</a></li>
<li><a href="../manual/module/ifs/console.md.html" class="notranslate">console</a></li>
<li><a href="../manual/module/ifs/constants.md.html" class="notranslate">constants</a></li>
<li><a href="../manual/module/ifs/coroutine.md.html" class="notranslate">coroutine</a></li>
<li><a href="../manual/module/ifs/crypto.md.html" class="notranslate">crypto</a></li>
<li><a href="../manual/module/ifs/db.md.html" class="notranslate">db</a></li>
<li><a href="../manual/module/ifs/dgram.md.html" class="notranslate">dgram</a></li>
<li><a href="../manual/module/ifs/dns.md.html" class="notranslate">dns</a></li>
<li><a href="../manual/module/ifs/encoding.md.html" class="notranslate">encoding</a></li>
<li><a href="../manual/module/ifs/fs.md.html" class="notranslate">fs</a></li>
<li><a href="../manual/module/ifs/fs_constants.md.html" class="notranslate">fs_constants</a></li>
<li><a href="../manual/module/ifs/gd.md.html" class="notranslate">gd</a></li>
<li><a href="../manual/module/ifs/global.md.html" class="notranslate">global</a></li>
<li><a href="../manual/module/ifs/gui.md.html" class="notranslate">gui</a></li>
<li><a href="../manual/module/ifs/hash.md.html" class="notranslate">hash</a></li>
<li><a href="../manual/module/ifs/hex.md.html" class="notranslate">hex</a></li>
<li><a href="../manual/module/ifs/http.md.html" class="notranslate">http</a></li>
<li><a href="../manual/module/ifs/iconv.md.html" class="notranslate">iconv</a></li>
<li><a href="../manual/module/ifs/io.md.html" class="notranslate">io</a></li>
<li><a href="../manual/module/ifs/json.md.html" class="notranslate">json</a></li>
<li><a href="../manual/module/ifs/mq.md.html" class="notranslate">mq</a></li>
<li><a href="../manual/module/ifs/msgpack.md.html" class="notranslate">msgpack</a></li>
<li><a href="../manual/module/ifs/multibase.md.html" class="notranslate">multibase</a></li>
<li><a href="../manual/module/ifs/net.md.html" class="notranslate">net</a></li>
<li><a href="../manual/module/ifs/os.md.html" class="notranslate">os</a></li>
<li><a href="../manual/module/ifs/path.md.html" class="notranslate">path</a></li>
<li><a href="../manual/module/ifs/path_posix.md.html" class="notranslate">path_posix</a></li>
<li><a href="../manual/module/ifs/path_win32.md.html" class="notranslate">path_win32</a></li>
<li><a href="../manual/module/ifs/perf_hooks.md.html" class="notranslate">perf_hooks</a></li>
<li><a href="../manual/module/ifs/performance.md.html" class="notranslate">performance</a></li>
<li><a href="../manual/module/ifs/process.md.html" class="notranslate">process</a></li>
<li><a href="../manual/module/ifs/profiler.md.html" class="notranslate">profiler</a></li>
<li><a href="../manual/module/ifs/punycode.md.html" class="notranslate">punycode</a></li>
<li><a href="../manual/module/ifs/querystring.md.html" class="notranslate">querystring</a></li>
<li><a href="../manual/module/ifs/registry.md.html" class="notranslate">registry</a></li>
<li><a href="../manual/module/ifs/ssl.md.html" class="notranslate">ssl</a></li>
<li><a href="../manual/module/ifs/string_decoder.md.html" class="notranslate">string_decoder</a></li>
<li><a href="../manual/module/ifs/test.md.html" class="notranslate">test</a></li>
<li><a href="../manual/module/ifs/timers.md.html" class="notranslate">timers</a></li>
<li><a href="../manual/module/ifs/tty.md.html" class="notranslate">tty</a></li>
<li><a href="../manual/module/ifs/types.md.html" class="notranslate">types</a></li>
<li><a href="../manual/module/ifs/url.md.html" class="notranslate">url</a></li>
<li><a href="../manual/module/ifs/util.md.html" class="notranslate">util</a></li>
<li><a href="../manual/module/ifs/uuid.md.html" class="notranslate">uuid</a></li>
<li><a href="../manual/module/ifs/vm.md.html" class="notranslate">vm</a></li>
<li><a href="../manual/module/ifs/worker_threads.md.html" class="notranslate">worker_threads</a></li>
<li><a href="../manual/module/ifs/ws.md.html" class="notranslate">ws</a></li>
<li><a href="../manual/module/ifs/xml.md.html" class="notranslate">xml</a></li>
<li><a href="../manual/module/ifs/zip.md.html" class="notranslate">zip</a></li>
<li><a href="../manual/module/ifs/zlib.md.html" class="notranslate">zlib</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_object" aria-controls="collapse_object"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">встроенные объекты</font></font></a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/object/ifs/blskey.md.html" class="notranslate">BlsKey</a></li>
<li><a href="../manual/object/ifs/buffer.md.html" class="notranslate">Buffer</a></li>
<li><a href="../manual/object/ifs/bufferedstream.md.html" class="notranslate">BufferedStream</a></li>
<li><a href="../manual/object/ifs/chain.md.html" class="notranslate">Chain</a></li>
<li><a href="../manual/object/ifs/childprocess.md.html" class="notranslate">ChildProcess</a></li>
<li><a href="../manual/object/ifs/cipher.md.html" class="notranslate">Cipher</a></li>
<li><a href="../manual/object/ifs/condition.md.html" class="notranslate">Condition</a></li>
<li><a href="../manual/object/ifs/dbconnection.md.html" class="notranslate">DbConnection</a></li>
<li><a href="../manual/object/ifs/dgramsocket.md.html" class="notranslate">DgramSocket</a></li>
<li><a href="../manual/object/ifs/digest.md.html" class="notranslate">Digest</a></li>
<li><a href="../manual/object/ifs/eckey.md.html" class="notranslate">ECKey</a></li>
<li><a href="../manual/object/ifs/ed25519key.md.html" class="notranslate">Ed25519Key</a></li>
<li><a href="../manual/object/ifs/event.md.html" class="notranslate">Event</a></li>
<li><a href="../manual/object/ifs/eventemitter.md.html" class="notranslate">EventEmitter</a></li>
<li><a href="../manual/object/ifs/fswatcher.md.html" class="notranslate">FSWatcher</a></li>
<li><a href="../manual/object/ifs/fiber.md.html" class="notranslate">Fiber</a></li>
<li><a href="../manual/object/ifs/file.md.html" class="notranslate">File</a></li>
<li><a href="../manual/object/ifs/filehandle.md.html" class="notranslate">FileHandle</a></li>
<li><a href="../manual/object/ifs/handler.md.html" class="notranslate">Handler</a></li>
<li><a href="../manual/object/ifs/heapgraphedge.md.html" class="notranslate">HeapGraphEdge</a></li>
<li><a href="../manual/object/ifs/heapgraphnode.md.html" class="notranslate">HeapGraphNode</a></li>
<li><a href="../manual/object/ifs/heapsnapshot.md.html" class="notranslate">HeapSnapshot</a></li>
<li><a href="../manual/object/ifs/httpclient.md.html" class="notranslate">HttpClient</a></li>
<li><a href="../manual/object/ifs/httpcollection.md.html" class="notranslate">HttpCollection</a></li>
<li><a href="../manual/object/ifs/httpcookie.md.html" class="notranslate">HttpCookie</a></li>
<li><a href="../manual/object/ifs/httphandler.md.html" class="notranslate">HttpHandler</a></li>
<li><a href="../manual/object/ifs/httpmessage.md.html" class="notranslate">HttpMessage</a></li>
<li><a href="../manual/object/ifs/httprepeater.md.html" class="notranslate">HttpRepeater</a></li>
<li><a href="../manual/object/ifs/httprequest.md.html" class="notranslate">HttpRequest</a></li>
<li><a href="../manual/object/ifs/httpresponse.md.html" class="notranslate">HttpResponse</a></li>
<li><a href="../manual/object/ifs/httpserver.md.html" class="notranslate">HttpServer</a></li>
<li><a href="../manual/object/ifs/httpuploaddata.md.html" class="notranslate">HttpUploadData</a></li>
<li><a href="../manual/object/ifs/httpsserver.md.html" class="notranslate">HttpsServer</a></li>
<li><a href="../manual/object/ifs/image.md.html" class="notranslate">Image</a></li>
<li><a href="../manual/object/ifs/iterator.md.html" class="notranslate">Iterator</a></li>
<li><a href="../manual/object/ifs/leveldb.md.html" class="notranslate">LevelDB</a></li>
<li><a href="../manual/object/ifs/lock.md.html" class="notranslate">Lock</a></li>
<li><a href="../manual/object/ifs/lrucache.md.html" class="notranslate">LruCache</a></li>
<li><a href="../manual/object/ifs/memorystream.md.html" class="notranslate">MemoryStream</a></li>
<li><a href="../manual/object/ifs/message.md.html" class="notranslate">Message</a></li>
<li><a href="../manual/object/ifs/mysql.md.html" class="notranslate">MySQL</a></li>
<li><a href="../manual/object/ifs/odbc.md.html" class="notranslate">Odbc</a></li>
<li><a href="../manual/object/ifs/pkey.md.html" class="notranslate">PKey</a></li>
<li><a href="../manual/object/ifs/rangestream.md.html" class="notranslate">RangeStream</a></li>
<li><a href="../manual/object/ifs/redis.md.html" class="notranslate">Redis</a></li>
<li><a href="../manual/object/ifs/redishash.md.html" class="notranslate">RedisHash</a></li>
<li><a href="../manual/object/ifs/redislist.md.html" class="notranslate">RedisList</a></li>
<li><a href="../manual/object/ifs/redisset.md.html" class="notranslate">RedisSet</a></li>
<li><a href="../manual/object/ifs/redissortedset.md.html" class="notranslate">RedisSortedSet</a></li>
<li><a href="../manual/object/ifs/routing.md.html" class="notranslate">Routing</a></li>
<li><a href="../manual/object/ifs/sqlite.md.html" class="notranslate">SQLite</a></li>
<li><a href="../manual/object/ifs/sandbox.md.html" class="notranslate">SandBox</a></li>
<li><a href="../manual/object/ifs/script.md.html" class="notranslate">Script</a></li>
<li><a href="../manual/object/ifs/seekablestream.md.html" class="notranslate">SeekableStream</a></li>
<li><a href="../manual/object/ifs/semaphore.md.html" class="notranslate">Semaphore</a></li>
<li><a href="../manual/object/ifs/service.md.html" class="notranslate">Service</a></li>
<li><a href="../manual/object/ifs/smtp.md.html" class="notranslate">Smtp</a></li>
<li><a href="../manual/object/ifs/socket.md.html" class="notranslate">Socket</a></li>
<li><a href="../manual/object/ifs/sslhandler.md.html" class="notranslate">SslHandler</a></li>
<li><a href="../manual/object/ifs/sslserver.md.html" class="notranslate">SslServer</a></li>
<li><a href="../manual/object/ifs/sslsocket.md.html" class="notranslate">SslSocket</a></li>
<li><a href="../manual/object/ifs/stat.md.html" class="notranslate">Stat</a></li>
<li><a href="../manual/object/ifs/statswatcher.md.html" class="notranslate">StatsWatcher</a></li>
<li><a href="../manual/object/ifs/stream.md.html" class="notranslate">Stream</a></li>
<li><a href="../manual/object/ifs/stringdecoder.md.html" class="notranslate">StringDecoder</a></li>
<li><a href="../manual/object/ifs/ttyinputstream.md.html" class="notranslate">TTYInputStream</a></li>
<li><a href="../manual/object/ifs/ttyoutputstream.md.html" class="notranslate">TTYOutputStream</a></li>
<li><a href="../manual/object/ifs/tcpserver.md.html" class="notranslate">TcpServer</a></li>
<li><a href="../manual/object/ifs/textdecoder.md.html" class="notranslate">TextDecoder</a></li>
<li><a href="../manual/object/ifs/textencoder.md.html" class="notranslate">TextEncoder</a></li>
<li><a href="../manual/object/ifs/timer.md.html" class="notranslate">Timer</a></li>
<li><a href="../manual/object/ifs/urlobject.md.html" class="notranslate">UrlObject</a></li>
<li><a href="../manual/object/ifs/websocket.md.html" class="notranslate">WebSocket</a></li>
<li><a href="../manual/object/ifs/websocketmessage.md.html" class="notranslate">WebSocketMessage</a></li>
<li><a href="../manual/object/ifs/webview.md.html" class="notranslate">WebView</a></li>
<li><a href="../manual/object/ifs/worker.md.html" class="notranslate">Worker</a></li>
<li><a href="../manual/object/ifs/x509cert.md.html" class="notranslate">X509Cert</a></li>
<li><a href="../manual/object/ifs/x509crl.md.html" class="notranslate">X509Crl</a></li>
<li><a href="../manual/object/ifs/x509req.md.html" class="notranslate">X509Req</a></li>
<li><a href="../manual/object/ifs/xmlattr.md.html" class="notranslate">XmlAttr</a></li>
<li><a href="../manual/object/ifs/xmlcdatasection.md.html" class="notranslate">XmlCDATASection</a></li>
<li><a href="../manual/object/ifs/xmlcharacterdata.md.html" class="notranslate">XmlCharacterData</a></li>
<li><a href="../manual/object/ifs/xmlcomment.md.html" class="notranslate">XmlComment</a></li>
<li><a href="../manual/object/ifs/xmldocument.md.html" class="notranslate">XmlDocument</a></li>
<li><a href="../manual/object/ifs/xmldocumenttype.md.html" class="notranslate">XmlDocumentType</a></li>
<li><a href="../manual/object/ifs/xmlelement.md.html" class="notranslate">XmlElement</a></li>
<li><a href="../manual/object/ifs/xmlnamednodemap.md.html" class="notranslate">XmlNamedNodeMap</a></li>
<li><a href="../manual/object/ifs/xmlnode.md.html" class="notranslate">XmlNode</a></li>
<li><a href="../manual/object/ifs/xmlnodelist.md.html" class="notranslate">XmlNodeList</a></li>
<li><a href="../manual/object/ifs/xmlprocessinginstruction.md.html" class="notranslate">XmlProcessingInstruction</a></li>
<li><a href="../manual/object/ifs/xmltext.md.html" class="notranslate">XmlText</a></li>
<li><a href="../manual/object/ifs/zipfile.md.html" class="notranslate">ZipFile</a></li>
<li><a href="../manual/object/ifs/object.md.html" class="notranslate">object</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_awesome" aria-controls="collapse_awesome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">модуль сообщества</font></font></a></h4></div><div id="collapse_awesome" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../awesome/module/fib-session.md.html" class="notranslate">fib-session</a></li>
<li><a href="../awesome/module/fib-pool.md.html" class="notranslate">fib-pool</a></li>
<li><a href="../awesome/module/fib-orm.md.html" class="notranslate">fib-orm</a></li>
<li><a href="../awesome/module/fib-app.md.html" class="notranslate">fib-app</a></li>
<li><a href="../awesome/module/fib-kv.md.html" class="notranslate">fib-kv</a></li>
<li><a href="../awesome/module/fib-rpc.md.html" class="notranslate">fib-rpc</a></li>
<li><a href="../awesome/module/fib-qr.md.html" class="notranslate">fib-qr</a></li>
<li><a href="../awesome/module/fib-pug.md.html" class="notranslate">fib-pug</a></li>
<li><a href="../awesome/module/ejs.md.html" class="notranslate">ejs</a></li>
<li><a href="../awesome/module/juicer.md.html" class="notranslate">Juicer</a></li>
<li><a href="../awesome/module/highlight.js.md.html" class="notranslate">highlight.js</a></li>
<li><a href="../awesome/module/marked.md.html" class="notranslate">marked</a></li>
<li><a href="../awesome/module/node-cron.md.html" class="notranslate">node-cron</a></li>
<li><a href="../awesome/module/debug.md.html" class="notranslate">debug</a></li>
<li><a href="../awesome/module/benchmark.js.md.html" class="notranslate">benchmark.js</a></li>
<li><a href="../awesome/module/sinon.md.html" class="notranslate">sinon</a></li>
<li><a href="../awesome/module/node-mime.md.html" class="notranslate">node-mime</a></li>
<li><a href="../awesome/module/validatorjs.md.html" class="notranslate">validatorjs</a></li>
<li><a href="../awesome/module/superstruct.md.html" class="notranslate">superstruct</a></li>
<li><a href="../awesome/module/cluster-server.md.html" class="notranslate">cluster-server</a></li>
<li><a href="../awesome/module/synaptic.md.html" class="notranslate">synaptic</a></li>
<li><a href="../awesome/module/source-map.md.html" class="notranslate">source-map</a></li>
<li><a href="../awesome/module/json-format.md.html" class="notranslate">json-format</a></li>
<li><a href="../awesome/module/viz.js.md.html" class="notranslate">viz.js</a></li>
<li><a href="../awesome/module/nomnoml.md.html" class="notranslate">nomnoml</a></li>
<li><a href="../awesome/module/pegjs.md.html" class="notranslate">pegjs</a></li>
<li><a href="../awesome/module/uglify-js.md.html" class="notranslate">uglify-js</a></li>
<li><a href="../awesome/module/js-beautify.md.html" class="notranslate">js-beautify</a></li>
<li><a href="../awesome/module/chalk-animation.md.html" class="notranslate">chalk-animation</a></li>
<li><a href="../awesome/module/jsrsasign.md.html" class="notranslate">jsrsasign</a></li>
<li><a href="../awesome/module/crypto-js.md.html" class="notranslate">crypto-js</a></li>
<li><a href="../awesome/module/ascii-table.md.html" class="notranslate">ascii-table</a></li>
<li><a href="../awesome/module/logstream.md.html" class="notranslate">logstream</a></li>
<li><a href="../awesome/module/ci.md.html" class="notranslate">ci</a></li>
<li><a href="../awesome/module/fs-readdir-recursive.md.html" class="notranslate">fs-readdir-recursive</a></li>
<li><a href="../awesome/module/mkdirp.md.html" class="notranslate">mkdirp</a></li>
<li><a href="../awesome/module/rmdirr.md.html" class="notranslate">rmdirr</a></li>
<li><a href="../awesome/module/detect-port.md.html" class="notranslate">detect-port</a></li>
<li><a href="../awesome/module/bitcoinjs-lib.md.html" class="notranslate">bitcoinjs-lib</a></li>
<li><a href="../awesome/module/rakuten.md.html" class="notranslate">Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class="content"><div class="social-share share-component" data-sites="weibo,twitter" data-description="分享"></div> <div name="高性能-Web-应用程序实践" data-unique="高性能-Web-应用程序实践"></div><h1 id="高性能-Web-应用程序实践"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Практика высокопроизводительных веб-приложений</font></font></h1>
<div name="介绍" data-unique="介绍"></div><h2 id="介绍"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">представлять</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fibjs — это высокопроизводительная среда сервера приложений, предназначенная в первую очередь для разработки веб-серверов. Он построен на движке JavaScript Google v8 и использует другое решение для параллелизма, чем традиционные обратные вызовы. fibjs использует волокна для изоляции сложностей бизнеса, вызванных асинхронными вызовами на уровне платформы, что значительно снижает сложность разработки и снижает проблемы с производительностью, вызванные частой асинхронной обработкой в ​​пользовательском пространстве.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">При разработке fibjs большое внимание уделяется производительности.Встроенные сетевые модули ввода-вывода и HTTP используют событийно-управляемую неблокирующую модель ввода-вывода, поэтому разработчики могут легко реализовывать высоконадежные серверные приложения. А поскольку нижний уровень реализован на C++, fibjs имеет очень высокую производительность и может легко справляться с высокой степенью одновременного доступа и предоставлять чрезвычайно стабильные и надежные услуги.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В то же время fibjs также поддерживает WebSocket, полнодуплексный протокол связи, основанный на протоколе TCP.Он устанавливает непрерывное соединение между браузером и сервером, обеспечивает двустороннюю передачу данных в реальном времени и может поддерживать данные. в любом формате.передача. WebSocket можно использовать для простой реализации приложений связи в реальном времени с лучшими коммуникационными эффектами.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Короче говоря, fibjs не только подчеркивает высокую производительность и высокую надежность, но также предоставляет функции связи в реальном времени, такие как WebSocket.Это среда, которая очень подходит для разработки высокоскоростных веб-приложений.</font></font></p>
<div name="开发环境搭建" data-unique="开发环境搭建"></div><h2 id="开发环境搭建"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Настройка среды разработки</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Прежде чем приступить к разработке fibjs, нам необходимо подготовить среду разработки. В этой главе рассказывается, как установить fibjs, как использовать инструмент fibjs для инициализации проекта и как использовать интегрированную среду разработки IDE.</font></font></p>
<div name="安装-fibjs" data-unique="安装-fibjs"></div><h3 id="安装-fibjs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Установить фибджс</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Для разных операционных систем способы установки fibjs немного отличаются.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Для пользователей Linux и macOS fibjs можно установить с помощью следующей команды:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -s https://fibjs.org/download/installer.sh | sh
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Если вы используете macOS и используете менеджер пакетов Homebrew, вы также можете установить его с помощью следующей команды:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>brew install fibjs
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Пользователям Windows необходимо загрузить установщик с официального сайта fibjs, а затем следовать инструкциям по его установке.</font></font></p>
<div name="使用-fibjs-–init-创建新项目" data-unique="使用-fibjs-–init-创建新项目"></div><h3 id="使用-fibjs-–init-创建新项目"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Создайте новый проект, используя fibjs –init.</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">После установки fibjs вы можете использовать инструмент fibjs для быстрого создания новых проектов. Используйте следующую команду, чтобы создать базовый шаблон проекта:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --init
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Эта команда создаст новую структуру проекта в текущем каталоге, включая package.json, который используется для хранения основной информации о проекте и информации о зависимостях.</font></font></p>
<div name="编写-Web-应用程序" data-unique="编写-Web-应用程序"></div><h2 id="编写-Web-应用程序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Написание веб-приложений</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Разработка веб-приложений в настоящее время является наиболее часто используемым сценарием применения fibjs. fibjs предоставляет ряд инструментов и модулей, которые помогают нам быстрее создавать веб-приложения.</font></font></p>
<div name="编写-HTTP-服务器" data-unique="编写-HTTP-服务器"></div><h3 id="编写-HTTP-服务器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Написание HTTP-сервера</font></font></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Сначала импортируйте модуль http;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Создайте экземпляр http.Server и прослушивайте запросы.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Сервер запускается через функцию start.</font></font></li>
</ul>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {<font></font>
    req.response.write(<span class="hljs-string">'Hello World!'</span>);<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<div name="解析-URL-参数和请求体" data-unique="解析-URL-参数和请求体"></div><h3 id="解析-URL-参数和请求体"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Анализ параметров URL и тела запроса</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Анализ параметров URL и тела запроса очень важен и используется в различных серверных приложениях. В fibjs параметры входящего URL-адреса могут анализироваться непосредственно через req.query, а тело запроса считывается через req.body.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">var</span> name = req.query.get(<span class="hljs-string">'name'</span>);
    <span class="hljs-keyword">var</span> msg = name ? <span class="hljs-string">`Hello <span class="hljs-subst">${name}</span>!`</span> : <span class="hljs-string">'Hello world!'</span>;<font></font>
    req.response.write(msg);<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<div name="实现接口访问控制" data-unique="实现接口访问控制"></div><h3 id="实现接口访问控制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Внедрить контроль доступа к интерфейсу</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ограничение доступа пользователей через интерфейсы — очень распространенный сценарий. Ниже приведен простой пример.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">if</span> (req.headers.get(<span class="hljs-string">'auth'</span>) === <span class="hljs-string">'ok'</span>) {<font></font>
        req.response.write(<span class="hljs-string">'Hello World!'</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        req.response.write(<span class="hljs-string">'Access Denied!'</span>);<font></font>
    }<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<div name="增加路由处理" data-unique="增加路由处理"></div><h3 id="增加路由处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Добавить обработку маршрутизации</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Маршрутизация — одна из наиболее важных концепций веб-приложения.Маршрутизация подразумевает распределение полученных запросов по процессорам в соответствии с определенными правилами. В fibjs вы можете написать свой собственный модуль маршрутизации и привязать его к http-серверу, а затем выполнить сопоставление URL-адресов и соответствующую обработку посредством настраиваемого анализа маршрутов.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> { Router } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mq'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> router = <span class="hljs-keyword">new</span> Router();<font></font>
router.get(<span class="hljs-string">'/hello/:name'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, name</span>) </span>{<font></font>
    req.response.write(<span class="hljs-string">'hello, '</span> + name);<font></font>
});<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, router);<font></font>
svr.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Приведенный выше пример также можно реализовать с помощью более простого синтаксиса:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
    <span class="hljs-string">'/hello/:name'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, name</span>) </span>{<font></font>
        req.response.write(<span class="hljs-string">'hello, '</span> + name);<font></font>
    }<font></font>
});<font></font>
svr.start();<font></font>
</code></pre>
<div name="错误处理与日志记录" data-unique="错误处理与日志记录"></div><h3 id="错误处理与日志记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Обработка и протоколирование ошибок</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В fibjs можно перехватывать логические исключения через блоки try-catch и выводить их в файлы журналов для отладки и записи; если они являются фатальными исключениями, их можно перебрасывать непосредственно в верхний фреймворк для обработки.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10</div><span class="hljs-keyword">const</span> <span class="hljs-built_in">console</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'console'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ...</span>
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-built_in">console</span>.log(e.message, e.stack);<font></font>
    }<font></font>
});<font></font>
</code></pre>
<div name="跨域请求" data-unique="跨域请求"></div><h3 id="跨域请求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">междоменный запрос</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В fibjs мы можем использовать метод EnableCrossOrigin, чтобы разрешить междоменные запросы. Вот пример кода того, как создать http-сервер и разрешить междоменные запросы:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {<font></font>
    req.response.write(<span class="hljs-string">'Hello World!'</span>);<font></font>
});<font></font>
<font></font>
server.enableCrossOrigin(); <span class="hljs-comment">// enable cross domain request</span><font></font>
server.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В приведенном выше примере мы создали http-сервер с портом 8080. Метод EnableCrossOrigin() позволяет выполнять запросы из разных источников.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">При использовании EnableCrossOrigin для разрешения междоменных запросов вы можете указать междоменные заголовки, которые разрешено получать, передав параметрallowHeaders. По умолчанию значениемallowHeaders является Content-Type.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Пример кода выглядит следующим образом:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2</div><span class="hljs-comment">// enable "Content-Type" and "Authorization" headers in cross domain request</span>
server.enableCrossOrigin(<span class="hljs-string">"Content-Type, Authorization"</span>);
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В приведенном выше коде значениемallowHeaders является «Content-Type, Authorization», что означает, что серверу разрешено получать два междоменных заголовка «Content-Type» и «Authorization». Если запрос содержит другие заголовки, он будет отклонен сервером.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Следует отметить, что когда мы используем EnableCrossOrigin для настройки возможности получения междоменных заголовков, нам также необходимо установить соответствующий заголовок запроса при отправке междоменных запросов, иначе он также будет отклонен сервером.</font></font></p>
<div name="WebSocket" data-unique="WebSocket"></div><h2 id="WebSocket"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Вебсокеты</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Протокол WebSocket — это полнодуплексный протокол связи, основанный на протоколе TCP. Он устанавливает бесперебойное соединение между браузером и сервером, может реализовать двустороннюю передачу данных в реальном времени и может поддерживать передачу данных в любом формате. В fibjs модуль поддержки WebSocket предоставляет соответствующие интерфейсы API, которые могут реализовать разработку сервера и клиента WebSocket.</font></font></p>
<div name="使用-fibjs-原生-WebSocket-模块实现-WebSocket-服务器端" data-unique="使用-fibjs-原生-WebSocket-模块实现-WebSocket-服务器端"></div><h3 id="使用-fibjs-原生-WebSocket-模块实现-WebSocket-服务器端"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Используйте собственный модуль WebSocket fibjs для реализации серверной части WebSocket.</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">На стороне сервера HTTP-запросы можно преобразовать в соединения WebSocket с помощью функции обновления. При создании объекта http-сервера вы можете использовать ws.upgrade(callback) и передать его в метод http.start() для преобразования http-запроса в WebSocket.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
  <span class="hljs-string">'/ws'</span>: ws.upgrade(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">conn, req</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'a client connected.'</span>);<font></font>
<font></font>
    <span class="hljs-comment">// listening for message events</span>
    conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'received message: '</span>, evt.data);
      <span class="hljs-comment">// echo the message back to client</span>
      conn.send(<span class="hljs-string">'Server: '</span> + evt.data);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// listening for close events</span>
    conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'closed.'</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// listening for error events</span>
    conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      <span class="hljs-built_in">console</span>.log(err);<font></font>
    };<font></font>
  })<font></font>
});<font></font>
<font></font>
server.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В приведенном выше примере мы можем отслеживать событие сообщения, отправленное клиентом, и событие закрытия соединения между сервером и клиентом. Когда сервер получает сообщение клиента, он отправляет то же сообщение обратно клиенту. На этом этапе реализована простая двухточечная связь WebSocket.</font></font></p>
<div name="实现与数据存储的交互" data-unique="实现与数据存储的交互"></div><h3 id="实现与数据存储的交互"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Реализуйте взаимодействие с хранилищем данных</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">При использовании WebSocket для связи помимо простой отправки и получения сообщений вам также необходимо учитывать такие операции, как постоянное хранение и запрос данных. На данный момент вам необходимо использовать базу данных.Вы можете использовать модуль db, встроенный в fibjs, для взаимодействия с базой данных.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Пример кода выглядит следующим образом:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">"ws"</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">var</span> db = <span class="hljs-built_in">require</span>(<span class="hljs-string">"db"</span>);<font></font>
<font></font>
<span class="hljs-comment">// open a mysql connection</span>
<span class="hljs-keyword">var</span> mysql = db.openMySQL(<span class="hljs-string">"mysql://root:password@localhost/dbname"</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
  <span class="hljs-string">"/ws"</span>: ws.upgrade(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">conn, req</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"a client connected."</span>);<font></font>
<font></font>
    <span class="hljs-comment">// listening for message events</span>
    conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"received message: "</span>, evt.data);<font></font>
<font></font>
      <span class="hljs-comment">// use execute to query the data</span>
      <span class="hljs-keyword">var</span> rs = mysql.execute(<span class="hljs-string">"SELECT * FROM user WHERE name=?"</span>, evt.data.toString());<font></font>
      conn.send(<span class="hljs-built_in">JSON</span>.stringify(rs));<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// listening for close events</span>
    conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"closed."</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// listening for error events</span>
    conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      <span class="hljs-built_in">console</span>.log(err);<font></font>
    };<font></font>
  })<font></font>
});<font></font>
<font></font>
server.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В приведенном выше примере мы сначала использовали метод openMySQL модуля db для создания объекта подключения к базе данных MySQL mysql, а затем, прослушав сообщение от клиента, мы использовали метод выполнения для непосредственного выполнения SQL-запроса и получения записей, которые выполнить условия. Наконец, результаты запроса отправляются обратно клиенту через протокол WebSocket.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Следует отметить, что в реальной разработке необходимо хорошо выполнять обработку исключений и безопасность данных.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Подводя итог, с помощью модуля db мы можем легко и просто взаимодействовать с базой данных в сочетании с протоколом WebSocket для реализации высокопроизводительных веб-приложений в реальном времени.</font></font></p>
<div name="实现-WebSocket-客户端与服务器端通信" data-unique="实现-WebSocket-客户端与服务器端通信"></div><h3 id="实现-WebSocket-客户端与服务器端通信"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Реализация клиент-серверной связи WebSocket.</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">На стороне клиента вы можете подключиться к серверу WebSocket, создав экземпляр WebSocket и указав URL-адрес, а затем отправлять сообщения на сервер.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);<font></font>
<font></font>
<span class="hljs-comment">// create a WebSocket object and connect to ws://localhost:8080/ws</span>
<span class="hljs-keyword">var</span> conn = <span class="hljs-keyword">new</span> ws.Socket(<span class="hljs-string">'ws://localhost:8080/ws'</span>);<font></font>
<font></font>
<span class="hljs-comment">// listening for open events</span>
conn.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
  conn.send(<span class="hljs-string">'hello'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// listening for message events</span>
conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'received message:'</span>, evt.data);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// listening for close events</span>
conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'closed.'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// listening for error events</span>
conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
  <span class="hljs-built_in">console</span>.log(err);<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В приведенном выше клиентском коде мы создаем экземпляр WebSocket и указываем его URL-адрес.После успешного установления соединения мы можем отправлять сообщения на сервер. Когда сервер получает сообщение клиента, он отправляет то же сообщение обратно клиенту. На этом этапе реализована простая двухточечная связь WebSocket.</font></font></p>
<div name="WebSocket-的优势和使用场景" data-unique="WebSocket-的优势和使用场景"></div><h3 id="WebSocket-的优势和使用场景"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Преимущества и сценарии использования WebSocket</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Протокол WebSocket имеет типичную модель двусторонней связи, позволяющую серверу активно передавать данные клиенту.Он часто используется для реализации чата, онлайн-игр и других случаев, требующих работы в режиме реального времени и высокой оперативности. По сравнению с другими протоколами передачи протокол WebSocket имеет следующие преимущества:</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Высокая производительность в реальном времени, поддержка двусторонней связи • Простая спецификация протокола, простота в использовании • Возможность обработки большого количества одновременных подключений • Поддерживает длинные соединения, сокращая время передачи по сети</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Наиболее распространенные сценарии использования WebSocket включают веб-чат, игровые сражения, онлайн-воспроизведение и обмен мгновенными сообщениями.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Подводя итог, можно сказать, что с помощью модуля поддержки WebSocket его очень просто реализовать, и разработчики могут быстро создавать свои собственные веб-приложения.</font></font></p>
<div name="单元测试" data-unique="单元测试"></div><h2 id="单元测试"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">модульный тест</font></font></h2>
<div name="测试框架和测试方法" data-unique="测试框架和测试方法"></div><h3 id="测试框架和测试方法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Среды тестирования и методы тестирования</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В процессе разработки программного обеспечения тестирование является очень важным звеном, и модульное тестирование является важной его частью. Модульное тестирование может эффективно проверить, соответствует ли код дизайну и требованиям, и избежать ошибок, возникающих при изменении кода. Вообще говоря, принцип модульного тестирования заключается в проверке каждой функции и метода, чтобы убедиться в правильности входных и выходных данных каждой функции и метода.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Платформа тестирования&nbsp;— это база кода, используемая для написания, запуска и проверки тестовых примеров. Она обеспечивает управление тестовыми примерами, выполнение функций и создание отчетов. В JavaScript и Node.js популярные среды модульного тестирования включают Mocha, Jest и Jasmine. В fibjs также есть собственная среда тестирования — тестовый модуль.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В процессе модульного тестирования обычно используемые методы тестирования включают тестирование «черного ящика» и тестирование «белого ящика».</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Тестирование «черного ящика» — это метод тестирования, который учитывает только входные и выходные данные функции, не принимая во внимание детали реализации внутри функции. Тестирование «черного ящика» основано на анализе требований и проектных спецификациях.Посредством анализа и выполнения тестовых примеров определяется, есть ли в программе логические ошибки, граничные ошибки, проблемы безопасности и т. д. Его преимуществом является простота процесса тестирования и надежность результатов, а недостатком — то, что тест не может охватить все пути программы.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Тестирование белого ящика — это метод тестирования, который учитывает детали внутренней реализации функции, включая условные операторы, операторы цикла, рекурсию и покрытие кода. Эти тесты могут выявить возможные проблемы во взаимодействии общих данных и кода. Преимущество тестирования «белого ящика» заключается в том, что оно может охватывать все пути программы, а недостаток — в том, что процесс тестирования более сложен, а на результаты тестирования влияют среда и методы реализации.</font></font></p>
<div name="使用-test-模块编写测试用例" data-unique="使用-test-模块编写测试用例"></div><h3 id="使用-test-模块编写测试用例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Написание тестовых случаев с использованием тестового модуля</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В fibjs мы можем использовать тестовый модуль для написания тестовых примеров для веб-сервера. Вот простой пример:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14</div><span class="hljs-keyword">var</span> test = <span class="hljs-built_in">require</span>(<span class="hljs-string">'test'</span>);<font></font>
test.setup();<font></font>
<font></font>
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
describe(<span class="hljs-string">'Web server test'</span>, () =&gt; {<font></font>
    it(<span class="hljs-string">'should return hello world'</span>, () =&gt; {
        <span class="hljs-keyword">var</span> r = http.get(<span class="hljs-string">'http://localhost:8080/hello'</span>);<font></font>
        assert.equal(r.statusCode, <span class="hljs-number">200</span>);<font></font>
        assert.equal(r.data.toString(), <span class="hljs-string">'Hello World'</span>);<font></font>
    });<font></font>
});<font></font>
<font></font>
test.run();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В этом примере мы используем функции описания и it для определения тестового модуля и тестового примера соответственно, а также используем функцию утверждения для проверки утверждений.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В функции описания мы можем определить несколько ИТ-функций для тестирования различных сценариев соответственно. В каждой функции it мы можем использовать функцию http.get для имитации HTTP-запроса GET, получения ответа на запрос и выполнения проверки утверждений, например, AssertTrue и AssertEqual.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Написав тестовые примеры, вы сможете эффективно проверить корректность функций и модулей, обеспечить качество продукта, а также повысить удобство сопровождения кода.</font></font></p>
<div name="热更新" data-unique="热更新"></div><h2 id="热更新"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Горячее обновление</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Горячее обновление означает обновление кода сервера без остановки службы. В процессе разработки программы для быстрой итерации часто требуются корректировки кода и новые функции. Используя горячее обновление, вы можете использовать новый код для более эффективного выполнения итерации без остановки службы.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В fibjs мы можем использовать модуль SandBox для обеспечения плавных горячих обновлений. Модуль SandBox может обеспечить безопасную среду выполнения и моделировать глобальные переменные и другие функции. Для конкретной реализации, пожалуйста, обратитесь к следующим шагам:</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Загрузите файлы кода, которые необходимо обновить (например, web.js).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">С помощью SandBox создайте новый модуль безопасности, загрузите в него web.js и сгенерируйте модуль безопасности. Перемонтируйте обработчик запущенного сервиса через сгенерированный модуль безопасности.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Сервер продолжает обрабатывать предыдущие запросы, а новые запросы будут монтироваться на новом обработчике.</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ниже приведен пример кода, который использует модуль SandBox для реализации плавных горячих обновлений:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</div><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> { SandBox } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vm'</span>);<font></font>
<font></font>
<span class="hljs-keyword">let</span> FILE_PATH = <span class="hljs-string">'./web.js'</span>;
<span class="hljs-keyword">let</span> handler = <span class="hljs-keyword">new</span> SandBox().require(FILE_PATH).handler;<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, handler);<font></font>
<font></font>
server.start();<font></font>
<font></font>
fs.watch(FILE_PATH, (event, filename) =&gt; {<font></font>
  handler = <span class="hljs-keyword">new</span> SandBox().require(FILE_PATH).handler;<font></font>
  server.handler = handler;<font></font>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleString()}</span>] server reloaded.`</span>);<font></font>
});<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В этом коде мы сначала загружаем код в web.js при запуске программы, затем создаем экземпляр SandBox и загружаем в него код. После этого мы создали новый HTTP-сервер и использовали методы обработчика для обработки запроса.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В коде мы используем fs.watch для отслеживания изменений в файле web.js. Как только файл изменится, мы перезагружаем код и обновляем реализацию в обработчике.</font></font></p>
<div name="性能优化" data-unique="性能优化"></div><h2 id="性能优化"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Оптимизация производительности</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В процессе разработки нам часто приходится сталкиваться с проблемами производительности. Оптимизация кода и повышение производительности — одни из важнейших навыков для разработчиков. В fibjs мы можем использовать CPU Profiler, который поможет нам проанализировать рабочее состояние программы и оптимизировать код.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В fibjs вам нужно использовать только параметр командной строки --prof, чтобы запустить fibjs и запустить профилировщик ЦП (интервал по умолчанию — 1000 мс). Если вам нужен более точный анализ журнала, вы можете использовать параметр --prof-interval, чтобы установить интервал журнала. Например:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2</div>$ fibjs --prof test.js   <span class="hljs-comment"># 启动 CPU Profiler，默认以 1000ms 为间隔</span>
$ fibjs --prof --prof-interval=10ms test.js <span class="hljs-comment"># 启动 CPU Profiler，以 10000us（即 10ms）为间隔</span>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Когда fibjs завершит работу, в текущем каталоге будет создан каталог с именем исходного файла. Этот каталог содержит файл журнала и некоторые вспомогательные файлы. Имя файла журнала по умолчанию — fibjs-xxxx.log, где xxxx — это временная метка. Вы можете использовать опцию --log, чтобы указать имя файла журнала. На этом этапе вы можете </font></font><code>--prof-process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">обработать сгенерированные журналы, используя:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --prof-process fibjs-xxxx.log prof.svg
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">После завершения операции используйте браузер, чтобы открыть prof.svg, чтобы просмотреть график пламени этого журнала:
 </font></font><img src="./imgs/prof.svg" alt="проф"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
вы можете нажать, чтобы просмотреть полноразмерное изображение. В полноразмерном изображении вы можете использовать мышь, чтобы просмотреть более подробную информацию. информация: </font></font><a href="./imgs/prof.svg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">проф.svg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В сгенерированном графе пламени каждый цветовой блок представляет точку записи. Чем длиннее цветовой блок, тем больше раз он записывается; каждая линия представляет собой слой стека вызовов, и чем больше слоев, тем больше слоев вызывается; вызовы Стек располагается в перевернутом виде, чем ниже цветовой блок, тем оригинальнее функция.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Существует два типа цветных блоков: красный и синий. В профилировщике fibjs красный цвет представляет операции JavaScript, а синий — операции ввода-вывода или собственные операции. В зависимости от проблемы, которую вам нужно решить, области, на которых вам нужно сосредоточиться, будут различаться. Например, если вам нужно решить проблему высокой загрузки ЦП, вам нужно обратить внимание на блоки красного цвета.Если ваше приложение имеет низкую загрузку ЦП, но медленный отклик, вам нужно обратить внимание на блоки синего цвета. Чем больше цветовой блок вверху, тем больше внимания и оптимизации он требует.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Мы можем попытаться настроить функции, которые потребляют больше ресурсов ЦП, реализовать асинхронный ввод-вывод и т. д. или оптимизировать код при написании.</font></font></p>
<div name="部署上线" data-unique="部署上线"></div><h2 id="部署上线"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Развертывание и онлайн</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Чтобы наш проект мог работать в производственной среде, нам необходимо его скомпилировать и развернуть. Здесь мы покажем, как использовать файл package.json для настройки компиляции и развертывания.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">В проекте мы можем использовать package.json для управления зависимостями проекта, настройки компиляции и развертывания. В качестве примера возьмем простой пример package.json:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"my-project"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"fib-pool"</span>: <span class="hljs-string">"^1.0.0"</span><font></font>
  }<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Когда нам нужно скомпилировать и развернуть проект, нам нужно всего лишь войти в каталог проекта в терминале и выполнить следующую команду:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --install
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Эта команда автоматически установит модули, от которых зависит проект. После этого мы можем запустить проект, используя следующую команду:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs app.js
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">👉【</font></font><a href="host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Маршрутизация доменных имен</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">】</font></font></p>
 <div class="commentbox" id="commentbox" data-loaded="true"><iframe src="https://app.commentbox.io/5670558372986880-proj?id=commentbox&amp;url=file%3A%2F%2F%2FUsers%2Flion%2Fworks%2Ffibjs%2Fdocs%2Fweb%2Fdist%2Fdocs%2Fguide%2Fweb.md.html%23commentbox&amp;tlc_param=tlc&amp;background_color=&amp;text_color=&amp;subtext_color=&amp;sort_order=best" frameborder="0" scrolling="no" style="width: 100%" data-comments-loaded="true" height="298px"></iframe></div></div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id="toc" class="tocify"></div></div></div></div><div class="footer"><div class="container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">© Copyright 2012-2024 fibjs.org | </font></font><a href="../../support.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Поддержите нас</font></font></a></div></div><a id="back-to-top" href="#" class="btn btn-default btn-lg back-to-top" role="button" title="" data-toggle="tooltip" data-placement="left" data-original-title=""><span class="glyphicon glyphicon-chevron-up"></span></a><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script><script>commentBox('5670558372986880-proj')</script><script type="text/javascript" src="../../../js/common.js"></script><script type="text/javascript" src="../../../js/docs.js"></script></body></html>