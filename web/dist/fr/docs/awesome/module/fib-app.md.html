<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel="icon" type="image/png" href="../../../../imgs/icon.png"><title>fib-app - JavaScript sur fibre</title><link href="../../../../css/common.css" rel="stylesheet"><link href="../../../../css/docs.css" rel="stylesheet"></head><body><div class="navbar navbar-default navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basculer la navigation</font></font></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="../../../index.html"><img src="../../../../imgs/logo-dark.png"></a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right notranslate"><li><a href="../../../index.html">HOME</a></li><li><a href="../../guide/readme.md.html">GUIDE</a></li><li><a href="../../manual/module/readme.md.html">MODULE</a></li><li><a href="../../manual/object/readme.md.html">OBJECT</a></li><li><a href="../readme.md.html">AWESOME</a></li><li><a href="../../../../download/index.html">DOWNLOAD</a></li><li class="nav-item dropdown"><a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">LANGUAGE</a><div class="dropdown-menu"><a href="../../../../docs/awesome/module/fib-app.md.html">中文</a> <a href="../../../../ca/docs/awesome/module/fib-app.md.html">Catalan</a> <a href="../../../../de/docs/awesome/module/fib-app.md.html">Deutsch</a> <a href="../../../../en/docs/awesome/module/fib-app.md.html">English</a> <a href="../../../../es/docs/awesome/module/fib-app.md.html">Español</a> <a href="../../../../fr/docs/awesome/module/fib-app.md.html">Français</a> <a href="../../../../gl/docs/awesome/module/fib-app.md.html">Galego</a> <a href="../../../../it/docs/awesome/module/fib-app.md.html">Italiano</a> <a href="../../../../nl/docs/awesome/module/fib-app.md.html">Nederlands</a> <a href="../../../../ru/docs/awesome/module/fib-app.md.html">Русский</a> <a href="../../../../ja/docs/awesome/module/fib-app.md.html">日本語</a> <a href="../../../../ko/docs/awesome/module/fib-app.md.html">한국어</a> <a href="../../../../zh-tw/docs/awesome/module/fib-app.md.html">繁體中文</a></div></li></ul></div></div></div><div class="band"><div class="container"><span class="group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Super module communautaire</font></font></span><div class="search"><input type="text" class="searchbox" placeholder="Recherche"></div></div></div><div class="container"><ol class="breadcrumb"><li><a href="../../../index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page de garde</font></font></a></li><li><a href="../readme.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module communautaire</font></font></a></li><li class="active"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fib-app</font></font></li></ol></div><div class="page-body"><div class="container"><div class="sidebar hidden-xs"><div class="panel-group" id="accordion" role="tablist">  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_guide" aria-controls="collapse_guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guide de développement</font></font></a></h4></div><div id="collapse_guide" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../../guide/about.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que fibjs?</font></font></a></li>
<li><a href="../../guide/install.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer l'environnement d'exploitation</font></font></a></li>
<li><a href="../../guide/hello.md.html" class="notranslate">hello, world</a></li>
<li><a href="../../guide/test.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une vie meilleure commence par un test</font></font></a></li>
<li><a href="../../guide/profiler.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez des tueurs de performance</font></font></a></li>
<li><a href="../../guide/sync.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchrone et asynchrone</font></font></a></li>
<li><a href="../../guide/server-hot-update.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour à chaud du module serveur</font></font></a></li>
<li><a href="../../guide/web.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pratiques d'application Web haute performance</font></font></a></li>
<li><a href="../../guide/host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Routage de domaine</font></font></a></li>
<li><a href="../../guide/x509.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation du certificat X509 dans fibjs</font></font></a></li>
<li><a href="../../guide/contribute.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter un module natif</font></font></a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_module" aria-controls="collapse_module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module de base</font></font></a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../../manual/module/ifs/assert.md.html" class="notranslate">assert</a></li>
<li><a href="../../manual/module/ifs/base32.md.html" class="notranslate">base32</a></li>
<li><a href="../../manual/module/ifs/base58.md.html" class="notranslate">base58</a></li>
<li><a href="../../manual/module/ifs/base64.md.html" class="notranslate">base64</a></li>
<li><a href="../../manual/module/ifs/child_process.md.html" class="notranslate">child_process</a></li>
<li><a href="../../manual/module/ifs/console.md.html" class="notranslate">console</a></li>
<li><a href="../../manual/module/ifs/constants.md.html" class="notranslate">constants</a></li>
<li><a href="../../manual/module/ifs/coroutine.md.html" class="notranslate">coroutine</a></li>
<li><a href="../../manual/module/ifs/crypto.md.html" class="notranslate">crypto</a></li>
<li><a href="../../manual/module/ifs/db.md.html" class="notranslate">db</a></li>
<li><a href="../../manual/module/ifs/dgram.md.html" class="notranslate">dgram</a></li>
<li><a href="../../manual/module/ifs/dns.md.html" class="notranslate">dns</a></li>
<li><a href="../../manual/module/ifs/encoding.md.html" class="notranslate">encoding</a></li>
<li><a href="../../manual/module/ifs/fs.md.html" class="notranslate">fs</a></li>
<li><a href="../../manual/module/ifs/fs_constants.md.html" class="notranslate">fs_constants</a></li>
<li><a href="../../manual/module/ifs/gd.md.html" class="notranslate">gd</a></li>
<li><a href="../../manual/module/ifs/global.md.html" class="notranslate">global</a></li>
<li><a href="../../manual/module/ifs/gui.md.html" class="notranslate">gui</a></li>
<li><a href="../../manual/module/ifs/hash.md.html" class="notranslate">hash</a></li>
<li><a href="../../manual/module/ifs/hex.md.html" class="notranslate">hex</a></li>
<li><a href="../../manual/module/ifs/http.md.html" class="notranslate">http</a></li>
<li><a href="../../manual/module/ifs/iconv.md.html" class="notranslate">iconv</a></li>
<li><a href="../../manual/module/ifs/io.md.html" class="notranslate">io</a></li>
<li><a href="../../manual/module/ifs/json.md.html" class="notranslate">json</a></li>
<li><a href="../../manual/module/ifs/mq.md.html" class="notranslate">mq</a></li>
<li><a href="../../manual/module/ifs/msgpack.md.html" class="notranslate">msgpack</a></li>
<li><a href="../../manual/module/ifs/multibase.md.html" class="notranslate">multibase</a></li>
<li><a href="../../manual/module/ifs/net.md.html" class="notranslate">net</a></li>
<li><a href="../../manual/module/ifs/os.md.html" class="notranslate">os</a></li>
<li><a href="../../manual/module/ifs/path.md.html" class="notranslate">path</a></li>
<li><a href="../../manual/module/ifs/path_posix.md.html" class="notranslate">path_posix</a></li>
<li><a href="../../manual/module/ifs/path_win32.md.html" class="notranslate">path_win32</a></li>
<li><a href="../../manual/module/ifs/perf_hooks.md.html" class="notranslate">perf_hooks</a></li>
<li><a href="../../manual/module/ifs/performance.md.html" class="notranslate">performance</a></li>
<li><a href="../../manual/module/ifs/process.md.html" class="notranslate">process</a></li>
<li><a href="../../manual/module/ifs/profiler.md.html" class="notranslate">profiler</a></li>
<li><a href="../../manual/module/ifs/punycode.md.html" class="notranslate">punycode</a></li>
<li><a href="../../manual/module/ifs/querystring.md.html" class="notranslate">querystring</a></li>
<li><a href="../../manual/module/ifs/registry.md.html" class="notranslate">registry</a></li>
<li><a href="../../manual/module/ifs/ssl.md.html" class="notranslate">ssl</a></li>
<li><a href="../../manual/module/ifs/string_decoder.md.html" class="notranslate">string_decoder</a></li>
<li><a href="../../manual/module/ifs/test.md.html" class="notranslate">test</a></li>
<li><a href="../../manual/module/ifs/timers.md.html" class="notranslate">timers</a></li>
<li><a href="../../manual/module/ifs/tty.md.html" class="notranslate">tty</a></li>
<li><a href="../../manual/module/ifs/url.md.html" class="notranslate">url</a></li>
<li><a href="../../manual/module/ifs/util.md.html" class="notranslate">util</a></li>
<li><a href="../../manual/module/ifs/uuid.md.html" class="notranslate">uuid</a></li>
<li><a href="../../manual/module/ifs/vm.md.html" class="notranslate">vm</a></li>
<li><a href="../../manual/module/ifs/worker_threads.md.html" class="notranslate">worker_threads</a></li>
<li><a href="../../manual/module/ifs/ws.md.html" class="notranslate">ws</a></li>
<li><a href="../../manual/module/ifs/xml.md.html" class="notranslate">xml</a></li>
<li><a href="../../manual/module/ifs/zip.md.html" class="notranslate">zip</a></li>
<li><a href="../../manual/module/ifs/zlib.md.html" class="notranslate">zlib</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_object" aria-controls="collapse_object"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet incorporé</font></font></a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../../manual/object/ifs/blskey.md.html" class="notranslate">BlsKey</a></li>
<li><a href="../../manual/object/ifs/buffer.md.html" class="notranslate">Buffer</a></li>
<li><a href="../../manual/object/ifs/bufferedstream.md.html" class="notranslate">BufferedStream</a></li>
<li><a href="../../manual/object/ifs/chain.md.html" class="notranslate">Chain</a></li>
<li><a href="../../manual/object/ifs/childprocess.md.html" class="notranslate">ChildProcess</a></li>
<li><a href="../../manual/object/ifs/cipher.md.html" class="notranslate">Cipher</a></li>
<li><a href="../../manual/object/ifs/condition.md.html" class="notranslate">Condition</a></li>
<li><a href="../../manual/object/ifs/dbconnection.md.html" class="notranslate">DbConnection</a></li>
<li><a href="../../manual/object/ifs/dgramsocket.md.html" class="notranslate">DgramSocket</a></li>
<li><a href="../../manual/object/ifs/digest.md.html" class="notranslate">Digest</a></li>
<li><a href="../../manual/object/ifs/eckey.md.html" class="notranslate">ECKey</a></li>
<li><a href="../../manual/object/ifs/ed25519key.md.html" class="notranslate">Ed25519Key</a></li>
<li><a href="../../manual/object/ifs/event.md.html" class="notranslate">Event</a></li>
<li><a href="../../manual/object/ifs/eventemitter.md.html" class="notranslate">EventEmitter</a></li>
<li><a href="../../manual/object/ifs/fswatcher.md.html" class="notranslate">FSWatcher</a></li>
<li><a href="../../manual/object/ifs/fiber.md.html" class="notranslate">Fiber</a></li>
<li><a href="../../manual/object/ifs/file.md.html" class="notranslate">File</a></li>
<li><a href="../../manual/object/ifs/handler.md.html" class="notranslate">Handler</a></li>
<li><a href="../../manual/object/ifs/heapgraphedge.md.html" class="notranslate">HeapGraphEdge</a></li>
<li><a href="../../manual/object/ifs/heapgraphnode.md.html" class="notranslate">HeapGraphNode</a></li>
<li><a href="../../manual/object/ifs/heapsnapshot.md.html" class="notranslate">HeapSnapshot</a></li>
<li><a href="../../manual/object/ifs/httpclient.md.html" class="notranslate">HttpClient</a></li>
<li><a href="../../manual/object/ifs/httpcollection.md.html" class="notranslate">HttpCollection</a></li>
<li><a href="../../manual/object/ifs/httpcookie.md.html" class="notranslate">HttpCookie</a></li>
<li><a href="../../manual/object/ifs/httphandler.md.html" class="notranslate">HttpHandler</a></li>
<li><a href="../../manual/object/ifs/httpmessage.md.html" class="notranslate">HttpMessage</a></li>
<li><a href="../../manual/object/ifs/httprepeater.md.html" class="notranslate">HttpRepeater</a></li>
<li><a href="../../manual/object/ifs/httprequest.md.html" class="notranslate">HttpRequest</a></li>
<li><a href="../../manual/object/ifs/httpresponse.md.html" class="notranslate">HttpResponse</a></li>
<li><a href="../../manual/object/ifs/httpserver.md.html" class="notranslate">HttpServer</a></li>
<li><a href="../../manual/object/ifs/httpuploaddata.md.html" class="notranslate">HttpUploadData</a></li>
<li><a href="../../manual/object/ifs/httpsserver.md.html" class="notranslate">HttpsServer</a></li>
<li><a href="../../manual/object/ifs/image.md.html" class="notranslate">Image</a></li>
<li><a href="../../manual/object/ifs/iterator.md.html" class="notranslate">Iterator</a></li>
<li><a href="../../manual/object/ifs/leveldb.md.html" class="notranslate">LevelDB</a></li>
<li><a href="../../manual/object/ifs/lock.md.html" class="notranslate">Lock</a></li>
<li><a href="../../manual/object/ifs/lrucache.md.html" class="notranslate">LruCache</a></li>
<li><a href="../../manual/object/ifs/memorystream.md.html" class="notranslate">MemoryStream</a></li>
<li><a href="../../manual/object/ifs/message.md.html" class="notranslate">Message</a></li>
<li><a href="../../manual/object/ifs/mongocollection.md.html" class="notranslate">MongoCollection</a></li>
<li><a href="../../manual/object/ifs/mongocursor.md.html" class="notranslate">MongoCursor</a></li>
<li><a href="../../manual/object/ifs/mongodb.md.html" class="notranslate">MongoDB</a></li>
<li><a href="../../manual/object/ifs/mongoid.md.html" class="notranslate">MongoID</a></li>
<li><a href="../../manual/object/ifs/mysql.md.html" class="notranslate">MySQL</a></li>
<li><a href="../../manual/object/ifs/odbc.md.html" class="notranslate">Odbc</a></li>
<li><a href="../../manual/object/ifs/pkey.md.html" class="notranslate">PKey</a></li>
<li><a href="../../manual/object/ifs/rangestream.md.html" class="notranslate">RangeStream</a></li>
<li><a href="../../manual/object/ifs/redis.md.html" class="notranslate">Redis</a></li>
<li><a href="../../manual/object/ifs/redishash.md.html" class="notranslate">RedisHash</a></li>
<li><a href="../../manual/object/ifs/redislist.md.html" class="notranslate">RedisList</a></li>
<li><a href="../../manual/object/ifs/redisset.md.html" class="notranslate">RedisSet</a></li>
<li><a href="../../manual/object/ifs/redissortedset.md.html" class="notranslate">RedisSortedSet</a></li>
<li><a href="../../manual/object/ifs/routing.md.html" class="notranslate">Routing</a></li>
<li><a href="../../manual/object/ifs/sqlite.md.html" class="notranslate">SQLite</a></li>
<li><a href="../../manual/object/ifs/sandbox.md.html" class="notranslate">SandBox</a></li>
<li><a href="../../manual/object/ifs/seekablestream.md.html" class="notranslate">SeekableStream</a></li>
<li><a href="../../manual/object/ifs/semaphore.md.html" class="notranslate">Semaphore</a></li>
<li><a href="../../manual/object/ifs/service.md.html" class="notranslate">Service</a></li>
<li><a href="../../manual/object/ifs/smtp.md.html" class="notranslate">Smtp</a></li>
<li><a href="../../manual/object/ifs/socket.md.html" class="notranslate">Socket</a></li>
<li><a href="../../manual/object/ifs/sslhandler.md.html" class="notranslate">SslHandler</a></li>
<li><a href="../../manual/object/ifs/sslserver.md.html" class="notranslate">SslServer</a></li>
<li><a href="../../manual/object/ifs/sslsocket.md.html" class="notranslate">SslSocket</a></li>
<li><a href="../../manual/object/ifs/stat.md.html" class="notranslate">Stat</a></li>
<li><a href="../../manual/object/ifs/statswatcher.md.html" class="notranslate">StatsWatcher</a></li>
<li><a href="../../manual/object/ifs/stream.md.html" class="notranslate">Stream</a></li>
<li><a href="../../manual/object/ifs/stringdecoder.md.html" class="notranslate">StringDecoder</a></li>
<li><a href="../../manual/object/ifs/ttyinputstream.md.html" class="notranslate">TTYInputStream</a></li>
<li><a href="../../manual/object/ifs/ttyoutputstream.md.html" class="notranslate">TTYOutputStream</a></li>
<li><a href="../../manual/object/ifs/tcpserver.md.html" class="notranslate">TcpServer</a></li>
<li><a href="../../manual/object/ifs/textdecoder.md.html" class="notranslate">TextDecoder</a></li>
<li><a href="../../manual/object/ifs/textencoder.md.html" class="notranslate">TextEncoder</a></li>
<li><a href="../../manual/object/ifs/timer.md.html" class="notranslate">Timer</a></li>
<li><a href="../../manual/object/ifs/urlobject.md.html" class="notranslate">UrlObject</a></li>
<li><a href="../../manual/object/ifs/websocket.md.html" class="notranslate">WebSocket</a></li>
<li><a href="../../manual/object/ifs/websocketmessage.md.html" class="notranslate">WebSocketMessage</a></li>
<li><a href="../../manual/object/ifs/webview.md.html" class="notranslate">WebView</a></li>
<li><a href="../../manual/object/ifs/worker.md.html" class="notranslate">Worker</a></li>
<li><a href="../../manual/object/ifs/x509cert.md.html" class="notranslate">X509Cert</a></li>
<li><a href="../../manual/object/ifs/x509crl.md.html" class="notranslate">X509Crl</a></li>
<li><a href="../../manual/object/ifs/x509req.md.html" class="notranslate">X509Req</a></li>
<li><a href="../../manual/object/ifs/xmlattr.md.html" class="notranslate">XmlAttr</a></li>
<li><a href="../../manual/object/ifs/xmlcdatasection.md.html" class="notranslate">XmlCDATASection</a></li>
<li><a href="../../manual/object/ifs/xmlcharacterdata.md.html" class="notranslate">XmlCharacterData</a></li>
<li><a href="../../manual/object/ifs/xmlcomment.md.html" class="notranslate">XmlComment</a></li>
<li><a href="../../manual/object/ifs/xmldocument.md.html" class="notranslate">XmlDocument</a></li>
<li><a href="../../manual/object/ifs/xmldocumenttype.md.html" class="notranslate">XmlDocumentType</a></li>
<li><a href="../../manual/object/ifs/xmlelement.md.html" class="notranslate">XmlElement</a></li>
<li><a href="../../manual/object/ifs/xmlnamednodemap.md.html" class="notranslate">XmlNamedNodeMap</a></li>
<li><a href="../../manual/object/ifs/xmlnode.md.html" class="notranslate">XmlNode</a></li>
<li><a href="../../manual/object/ifs/xmlnodelist.md.html" class="notranslate">XmlNodeList</a></li>
<li><a href="../../manual/object/ifs/xmlprocessinginstruction.md.html" class="notranslate">XmlProcessingInstruction</a></li>
<li><a href="../../manual/object/ifs/xmltext.md.html" class="notranslate">XmlText</a></li>
<li><a href="../../manual/object/ifs/zipfile.md.html" class="notranslate">ZipFile</a></li>
<li><a href="../../manual/object/ifs/object.md.html" class="notranslate">object</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_awesome" aria-controls="collapse_awesome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module communautaire</font></font></a></h4></div><div id="collapse_awesome" class="panel-collapse collapse in" aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="fib-session.md.html" class="notranslate">fib-session</a></li>
<li><a href="fib-pool.md.html" class="notranslate">fib-pool</a></li>
<li><a href="fib-orm.md.html" class="notranslate">fib-orm</a></li>
<li class="active"><a href="fib-app.md.html" class="notranslate">fib-app</a></li>
<li><a href="fib-kv.md.html" class="notranslate">fib-kv</a></li>
<li><a href="fib-rpc.md.html" class="notranslate">fib-rpc</a></li>
<li><a href="fib-qr.md.html" class="notranslate">fib-qr</a></li>
<li><a href="fib-pug.md.html" class="notranslate">fib-pug</a></li>
<li><a href="ejs.md.html" class="notranslate">ejs</a></li>
<li><a href="juicer.md.html" class="notranslate">Juicer</a></li>
<li><a href="highlight.js.md.html" class="notranslate">highlight.js</a></li>
<li><a href="marked.md.html" class="notranslate">marked</a></li>
<li><a href="node-cron.md.html" class="notranslate">node-cron</a></li>
<li><a href="debug.md.html" class="notranslate">debug</a></li>
<li><a href="benchmark.js.md.html" class="notranslate">benchmark.js</a></li>
<li><a href="sinon.md.html" class="notranslate">sinon</a></li>
<li><a href="node-mime.md.html" class="notranslate">node-mime</a></li>
<li><a href="validatorjs.md.html" class="notranslate">validatorjs</a></li>
<li><a href="superstruct.md.html" class="notranslate">superstruct</a></li>
<li><a href="cluster-server.md.html" class="notranslate">cluster-server</a></li>
<li><a href="synaptic.md.html" class="notranslate">synaptic</a></li>
<li><a href="source-map.md.html" class="notranslate">source-map</a></li>
<li><a href="json-format.md.html" class="notranslate">json-format</a></li>
<li><a href="viz.js.md.html" class="notranslate">viz.js</a></li>
<li><a href="nomnoml.md.html" class="notranslate">nomnoml</a></li>
<li><a href="pegjs.md.html" class="notranslate">pegjs</a></li>
<li><a href="uglify-js.md.html" class="notranslate">uglify-js</a></li>
<li><a href="js-beautify.md.html" class="notranslate">js-beautify</a></li>
<li><a href="chalk-animation.md.html" class="notranslate">chalk-animation</a></li>
<li><a href="jsrsasign.md.html" class="notranslate">jsrsasign</a></li>
<li><a href="crypto-js.md.html" class="notranslate">crypto-js</a></li>
<li><a href="ascii-table.md.html" class="notranslate">ascii-table</a></li>
<li><a href="logstream.md.html" class="notranslate">logstream</a></li>
<li><a href="ci.md.html" class="notranslate">ci</a></li>
<li><a href="fs-readdir-recursive.md.html" class="notranslate">fs-readdir-recursive</a></li>
<li><a href="mkdirp.md.html" class="notranslate">mkdirp</a></li>
<li><a href="rmdirr.md.html" class="notranslate">rmdirr</a></li>
<li><a href="detect-port.md.html" class="notranslate">detect-port</a></li>
<li><a href="bitcoinjs-lib.md.html" class="notranslate">bitcoinjs-lib</a></li>
<li><a href="rakuten.md.html" class="notranslate">Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class="content"><div class="social-share share-component" data-sites="weibo,twitter" data-description="分享"></div> <h1 id="fib-app"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fib-app</font></font></h1>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cadre d'api de base d'application fibjs</font></font></p>
<h2 id="Install"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installer</font></font></h2>
<pre><code class="lang-sh"><div class="line-numbers">1</div>npm install fib-app [--save]
</code></pre>
<h2 id="Test"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test</font></font></h2>
<pre><code class="lang-sh"><div class="line-numbers">1</div>npm <span class="hljs-built_in">test</span>
</code></pre>
<h2 id="建立基础脚本"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">construire le script de base</font></font></h2>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>)
<span class="hljs-keyword">const</span> Session = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fib-session'</span>)
<span class="hljs-keyword">const</span> App = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> App(<span class="hljs-string">'sqlite:test.db'</span>, {
  <span class="hljs-attr">uuid</span>: <span class="hljs-literal">true</span><font></font>
});<font></font>
app.db.use(<span class="hljs-built_in">require</span>(<span class="hljs-string">'./defs/person'</span>));<font></font>
<font></font>
<span class="hljs-keyword">var</span> session = <span class="hljs-keyword">new</span> Session(<span class="hljs-keyword">new</span> util.LruCache(<span class="hljs-number">20000</span>), {
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">60</span> * <span class="hljs-number">1000</span><font></font>
});<font></font>
<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, [<font></font>
  session.cookie_filter,<font></font>
  {<font></font>
    <span class="hljs-string">'/1.0'</span>: app<font></font>
  }<font></font>
]);<font></font>
svr.run();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parmi eux </font></font><code>person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se trouve le module de définition de modèle, dont le contenu est le suivant&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {<font></font>
  db.define(<span class="hljs-string">'person'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">sex</span>: [<span class="hljs-string">"male"</span>, <span class="hljs-string">"female"</span>],
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">Number</span><font></font>
  });<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il s'agit d'une définition orm standard, et vous pouvez également utiliser d'autres fonctions orm, telles que la vérification de type, les événements, etc.</font></font></p>
<h2 id="API-数据格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format de données API</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour les requêtes POST et PUT, le corps de la requête doit être au format JSON et le Content-Type de l'en-tête HTTP doit être défini sur application/json.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "tom","sex":"male","age":23}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour toutes les requêtes, le format de réponse est un objet JSON.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le succès d'une requête est indiqué par le code d'état HTTP. </font><font style="vertical-align: inherit;">Un code d'état 2XX indique le succès, tandis qu'un 4XX indique que la demande a échoué. </font><font style="vertical-align: inherit;">Lorsqu'une requête échoue, le corps de la réponse est toujours un objet JSON, mais contient toujours deux champs, code et message, que vous pouvez utiliser pour le débogage. </font><font style="vertical-align: inherit;">Par exemple, si une demande d'autorisation échoue, les informations suivantes seront renvoyées&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"code"</span>: <span class="hljs-number">4030501</span>,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"The operation isn’t allowed for clients due to class-level permissions."</span><font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code de code est divisé en trois parties, les trois premiers chiffres 403 représentent le type d'erreur, 05 représente le numéro de table de données et 01 représente le code d'erreur détaillé.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour une requête GET, les données d'objet sont généralement renvoyées et, selon l'adresse de la requête GET, un objet peut être renvoyé ou un tableau peut être renvoyé. </font><font style="vertical-align: inherit;">Par exemple:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
  <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
  <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span><font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12</div>[<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"lily"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"female"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">22</span><font></font>
  }<font></font>
]<font></font>
</code></pre>
<h2 id="特殊字段"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domaine spécial</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans les données d'objet, il existe quatre champs avec une signification spéciale, qui ne peuvent pas être modifiés via l'API. </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce sont , </font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>createdAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">respectivement </font></font><code>createdBy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parmi eux </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un </font></font><code>createdAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seul champ est automatiquement créé et modifié. </font></font><code>createdBy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous devez spécifier vous-même le type.</font></font></p>
<h2 id="基础对象访问-API"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API d'accès aux objets de base</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après avoir terminé cette définition de données, vous disposerez directement d'un ensemble d'appels d'interface conformes à la spécification de l'API REST&nbsp;:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">méthode</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:NomClasse</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POSTE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer un nouvel objet</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:NomClasse/:id</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OBTENIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire l'objet</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:NomClasse/:id</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">METTRE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modifier l'objet</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:NomClasse/:id</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SUPPRIMER</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer un objet</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:NomClasse</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OBTENIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste d'objets de requête</font></font></td>
</tr>
</tbody>
</table>
<h3 id="创建新对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer un nouvel objet</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afin de créer un nouvel objet, une requête POST doit être envoyée à l'URL de la classe, qui doit contenir l'objet lui-même. </font><font style="vertical-align: inherit;">Par exemple, pour créer l'objet décrit ci-dessus&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X POST \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "tom","sex":"male","age":23}'</span> \<font></font>
  http://localhost/1.0/person<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque la création réussit, le retour HTTP est 201 Created et le corps de la réponse est un objet JSON, y compris l'objectId et l'horodatage createdAt du nouvel objet&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
}<font></font>
</code></pre>
<h3 id="读取对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire l'objet</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque vous créez un objet, vous pouvez récupérer son contenu en envoyant une requête GET à l'en-tête renvoyé par Location. </font><font style="vertical-align: inherit;">Par exemple, pour obtenir l'objet que nous avons créé ci-dessus&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le corps renvoyé est un objet JSON contenant tous les champs fournis par l'utilisateur plus les champs </font></font><code>createdAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">et</font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><code>id</code><font style="vertical-align: inherit;"></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
  <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
  <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span>,
  <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En définissant le champ de retour </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vous pouvez personnaliser le contenu renvoyé. </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le contenu est une chaîne de noms de champs </font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">séparés&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000?keys=name%2Csex
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reviendra&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
  <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span><font></font>
}<font></font>
</code></pre>
<h3 id="修改对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modifier l'objet</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afin de modifier les données qu'un objet possède déjà, vous pouvez envoyer une requête PUT à l'URL correspondante de l'objet, et toute clé que vous ne spécifiez pas ne sera pas modifiée, vous ne pouvez donc mettre à jour qu'un sous-ensemble des données de l'objet . </font><font style="vertical-align: inherit;">Par exemple, modifions un champ d'âge de notre objet&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"age": 25}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'objet JSON renvoyé </font></font><code>updatedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contiendra </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des champs et indiquant quand la mise à jour a eu lieu&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
}<font></font>
</code></pre>
<h3 id="删除对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer un objet</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour supprimer un objet, envoyez une requête DELETE à l'URL de l'objet spécifié, par exemple&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X DELETE http://localhost/1.0/person/57fbbdb0a2400000
</code></pre>
<h3 id="查询对象列表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste d'objets de requête</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez récupérer plusieurs objets à la fois en envoyant une requête GET à l'URL de la classe sans aucun paramètre d'URL. </font><font style="vertical-align: inherit;">Voici un moyen simple d'obtenir tous les utilisateurs&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La valeur renvoyée est un objet JSON contenant le champ de résultats, dont la valeur est une liste d'objets&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</div>[<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span>,
    <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"lily"</span>,
    <span class="hljs-string">"sex"</span>: <span class="hljs-string">"female"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">22</span>,
    <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400001"</span><font></font>
  }<font></font>
]<font></font>
</code></pre>
<h4 id="keys-字段定制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">personnalisation du champ des clés</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme pour la requête d'objet, vous pouvez personnaliser les champs inclus dans le résultat renvoyé en </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">définissant . </font></font><code>keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le contenu de est une chaîne de nom de champ </font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">séparée , par exemple :</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?keys=name%2Cage
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spécifiera que seuls </font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les </font></font><code>age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">champs et seront retournés.</font></font></p>
<h4 id="where-过滤条件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">où l'état du filtre</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'objet de requête peut être contraint sous la forme de </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paramètres .</font></font></p>
<p><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La valeur du paramètre doit être encodée en JSON. </font><font style="vertical-align: inherit;">Cela dit, si vous regardez la demande d'URL réelle, elle doit être encodée en JSON puis encodée en URL. </font><font style="vertical-align: inherit;">La manière la plus simple d'utiliser </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des paramètres consiste à inclure la clé et la valeur comme prévu. </font><font style="vertical-align: inherit;">Par exemple, si nous voulons rechercher des utilisateurs avec le nom tom, nous devons construire la requête comme ceci :</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?<span class="hljs-built_in">where</span>=%7B%22name%22%3A%22tom%22%7D
</code></pre>
<p><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La valeur de est une chaîne JSON après urlencode, le contenu est&nbsp;:</font></font><code>{"name":"tom"}</code></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En plus de correspondre exactement à une valeur donnée, il </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prend également en charge les méthodes de comparaison, telles que contient. </font></font><code>where</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le paramètre prend en charge les options suivantes&nbsp;:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clé</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opération</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">goûter</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éq</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">égal</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"eq":"tom"}} ou {"name":"tom"}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas égal à</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"ne":"tom"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus que le</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"âge":{"gt":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gîte</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supérieur ou égal à</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"age":{"gte":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ça</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moins que</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"âge":{"lt":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LTE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inférieur ou égal à</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"âge":{"lte":"24"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comme</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requête floue</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"like":"%m"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas comme</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requête floue</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"not_like":"%m"}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entre</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparaison d'intervalle</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"âge":{"entre":[22,25]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas entre</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparaison d'intervalle</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"âge":{"not_between":[22,25]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">énumérer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"in":["tom","lily"]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas dedans</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">énumérer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"name":{"not_in":["tom","lily"]}}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OU opération</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"ou":[{"name":"tom"},{"age":24}]}</font></font></td>
</tr>
</tbody>
</table>
<h4 id="skip-跳过记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sauter sauter enregistrer</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grâce </font></font><code>skip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à l'option , vous pouvez ignorer le nombre d'enregistrements spécifié pour obtenir l'effet de tourner les pages.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?skip=100
</code></pre>
<h4 id="limit-返回记录限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">limite renvoie la limite d'enregistrement</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grâce </font></font><code>limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à l'option , vous pouvez limiter le nombre </font></font><code>limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d'enregistrements renvoyés, le nombre effectif est 1-1000 et la valeur par défaut est 100.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?<span class="hljs-built_in">limit</span>=100
</code></pre>
<h4 id="order-指定排序方式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordre spécifie la méthode de tri</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'option pour définir la méthode de tri du jeu de résultats renvoyé et le nom du champ contient </font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans l'ordre inverse.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?order=-id
</code></pre>
<h4 id="count-返回结果总数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">count renvoie le nombre total de résultats</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incrément sur demande Nombre total d'ensembles de résultats </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pouvant être renvoyés lors du renvoi du contenu spécifié.</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person?count=1&amp;<span class="hljs-built_in">limit</span>=1
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À ce moment, le résultat renvoyé contiendra </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>results</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deux champs, qui contiennent respectivement le total et le résultat&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13</div>{
  <span class="hljs-string">"count"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"results"</span>: [<font></font>
    {<font></font>
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"tom"</span>,
      <span class="hljs-string">"sex"</span>: <span class="hljs-string">"male"</span>,
      <span class="hljs-string">"age"</span>: <span class="hljs-number">23</span>,
      <span class="hljs-string">"createdAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
      <span class="hljs-string">"updatedAt"</span>: <span class="hljs-string">"2017-11-25T01:39:35.931Z"</span>,
      <span class="hljs-string">"id"</span>: <span class="hljs-string">"57fbbdb0a2400000"</span><font></font>
    }<font></font>
  ]<font></font>
}<font></font>
</code></pre>
<h2 id="建立扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer un objet d'extension</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En définissant hasOne et hasMany via orm, vous pouvez définir la relation entre les objets et la refléter sur l'API, par exemple&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {
  <span class="hljs-keyword">var</span> Person = db.models.person;<font></font>
<font></font>
  <span class="hljs-keyword">var</span> Pet = db.define(<span class="hljs-string">'pet'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span><font></font>
  });<font></font>
<font></font>
  Person.hasMany(<span class="hljs-string">'pets'</span>, Pet);<font></font>
};<font></font>
</code></pre>
<h2 id="扩展对象访问-API"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API d'accès étendu aux objets</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici la définition d'API pour l'objet d'extension&nbsp;:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">méthode</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">METTRE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">définir l'objet d'extension</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POSTE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer un objet d'extension</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName/:rid</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OBTENIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire l'objet d'extension</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName/:rid</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">METTRE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modifier l'objet d'extension</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName/:rid</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SUPPRIMER</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer l'objet d'extension</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/1.0/:className/:id/:extendName</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OBTENIR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interroger la liste des objets étendus</font></font></td>
</tr>
</tbody>
</table>
<h3 id="设置扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">définir l'objet d'extension</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définir un objet étendu consiste à établir une connexion entre deux objets indépendants. </font><font style="vertical-align: inherit;">Par exemple, tom adopte un animal de compagnie nommé chat, qui peut être réalisé par les opérations suivantes :</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"id": "57fbbdb0a2400007"}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000/pets<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l'appel, vous devez spécifier l'identifiant du chat dans le corps.</font></font></p>
<h3 id="创建扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer un objet d'extension</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créez directement des objets étendus, vous pouvez établir des connexions entre les objets lors de la création d'objets. </font><font style="vertical-align: inherit;">Par exemple:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X POST \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "cat"}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000/pets<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un animal nommé cat sera créé et associé à tom.</font></font></p>
<h3 id="读取扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire l'objet d'extension</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La lecture des objets d'extension est très similaire à la lecture des objets de base et prend également en charge l'option keys&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007
</code></pre>
<h3 id="修改扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modifier l'objet d'extension</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La lecture d'un objet d'extension est très similaire à la lecture d'un objet de base&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2
3
4</div>curl -X PUT \<font></font>
  -H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
  -d <span class="hljs-string">'{"name": "cat 1"}'</span> \<font></font>
  http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007<font></font>
</code></pre>
<h3 id="删除扩展对象"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer l'objet d'extension</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La suppression d'un objet étendu ne supprime pas l'objet lui-même, dissout uniquement la relation entre les objets&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X DETELE http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007
</code></pre>
<h3 id="查询扩展对象列表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interroger la liste des objets étendus</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'interrogation de la liste des objets étendus est très similaire à l'interrogation de la liste des objets de base et prend également en charge des options telles que les clés et le filtrage conditionnel&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000/pets
</code></pre>
<h2 id="ACL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACL</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les autorisations de données peuvent être contrôlées en définissant l'ACL du modèle. </font><font style="vertical-align: inherit;">Par exemple:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</div><span class="hljs-keyword">const</span> orm = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fib-orm'</span>);<font></font>
<font></font>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {<font></font>
  db.define(<span class="hljs-string">'blog'</span>, {
    <span class="hljs-attr">title</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">detail</span>: <span class="hljs-built_in">String</span>，
    <span class="hljs-attr">note</span>: <span class="hljs-built_in">String</span><font></font>
  }, {<font></font>
    <span class="hljs-attr">ACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"*"</span>: {
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">false</span><font></font>
        },<font></font>
        <span class="hljs-string">"57fbbdb0a2400000"</span>: {
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
        },<font></font>
        <span class="hljs-string">"roles"</span>: {
          <span class="hljs-string">"user"</span>: {
            <span class="hljs-string">"read"</span>: <span class="hljs-literal">true</span><font></font>
          }<font></font>
        }<font></font>
      };<font></font>
    }<font></font>
  });<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si aucune ACL n'est spécifiée lors de la définition du modèle, cela équivaut à définir les autorisations par défaut&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5</div>{
  <span class="hljs-string">"*"</span>: {
    <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
  }<font></font>
}<font></font>
</code></pre>
<h3 id="主体"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corps principal</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe trois types de descriptions de sujet ACL, user </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, user </font></font><code>role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui représentent un utilisateur spécifique, </font></font><code>role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">représentent des utilisateurs avec un certain rôle et </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">représentent tous les utilisateurs&nbsp;:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corps principal</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">décrire</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">priorité</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">identifiant</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">identifiant utilisateur spécifique</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rôle</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nom du groupe d'utilisateurs</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tous</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
</tr>
</tbody>
</table>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de la vérification des autorisations, il correspondra d'abord aux autorisations </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correspondantes . S'il n'est pas spécifié, correspond </font></font><code>role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aux autorisations correspondantes de l'utilisateur. S'il est toujours spécifié, vérifiez si les autorisations </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de . Si </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'est pas spécifié, il n'y a pas d'autorisation.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par exemple, dans la configuration des autorisations ci-dessus, le groupe </font></font><code>user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d'utilisateurs peut lire, l'utilisateur </font></font><code>57fbbdb0a2400000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dispose de toutes les autorisations et les autres utilisateurs n'ont aucune autorisation.</font></font></p>
<h3 id="权限"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autorisations</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACL classe les autorisations en cinq types en fonction du comportement de l'API&nbsp;:</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autorisations</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">décrire</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type autorisé</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer un objet</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai / faux / tableau</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire l'objet</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai / faux / tableau</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">écrire</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modifier l'objet</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai / faux / tableau</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer un objet</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai faux</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trouver</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste d'objets de requête</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai faux</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correspondre à toutes les autorisations</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai / faux / tableau</font></font></td>
</tr>
</tbody>
</table>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les autorisations sont définies </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour autoriser l'accès, </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interdire l'accès et </font></font><code>array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autoriser uniquement l'accès aux champs spécifiés. </font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>find</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne sont pas acceptés </font></font><code>array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et sont traités comme </font></font><code>array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s'ils </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si l'autorisation spécifiée n'existe pas, faites correspondre </font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'autorisation . </font><font style="vertical-align: inherit;">S'il n'en existe pas, interrogez à nouveau le sujet de la priorité suivante.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par exemple, dans l'exemple ci-dessus, si vous devez définir Autoriser </font></font><code>user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniquement la lecture </font></font><code>title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et que </font></font><code>detail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les autres peuvent lire   </font></font><code>title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vous pouvez le définir comme ceci&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14</div>{
  <span class="hljs-string">"*"</span>: {
    <span class="hljs-string">"*"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">"read"</span>: [<span class="hljs-string">'title'</span>]<font></font>
  },<font></font>
  <span class="hljs-string">"57fbbdb0a2400000"</span>: {
    <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
  },<font></font>
  <span class="hljs-string">"roles"</span>: {
    <span class="hljs-string">"user"</span>: {
      <span class="hljs-string">"read"</span>: [<span class="hljs-string">'title'</span>, <span class="hljs-string">'detail'</span>]<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre>
<h3 id="对象权限"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autorisations d'objet</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce qui est défini sur le modèle est l'autorité de toute la classe. Si vous devez définir l'autorité pour un objet spécifique, vous pouvez définir l'OACL pour y parvenir&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {<font></font>
  db.define(<span class="hljs-string">'person'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">sex</span>: [<span class="hljs-string">"male"</span>, <span class="hljs-string">"female"</span>],
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">Number</span><font></font>
  }, {<font></font>
    <span class="hljs-attr">ACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"*"</span>: {
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">false</span><font></font>
        }<font></font>
      }<font></font>
    },<font></font>
    <span class="hljs-attr">OACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">var</span> _acl = {};
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.id === session.id)<font></font>
        _acl[session.id] = {<font></font>
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
        };<font></font>
<font></font>
      <span class="hljs-keyword">return</span> _acl;<font></font>
    }<font></font>
  });<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet exemple, lorsque le visiteur est l'objet lui-même, toutes les opérations seront autorisées, sinon tout accès sera interdit. </font><font style="vertical-align: inherit;">Les autorisations sont vérifiées comme suit&nbsp;:</font></font></p>
<ul>
<li><code>person[57fbbdb0a2400000]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>OACL</code></li>
<li><code>person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>ACL</code></li>
</ul>
<h3 id="扩展对象权限"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autorisations d'objet étendues</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le contrôle d'accès des objets étendus est similaire à celui des objets de base, la seule différence est que l'ACL doit être spécifiée séparément&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</div><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">db</span> =&gt;</span> {
  <span class="hljs-keyword">var</span> Person = db.define(<span class="hljs-string">'person'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,
    <span class="hljs-attr">sex</span>: [<span class="hljs-string">"male"</span>, <span class="hljs-string">"female"</span>],
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">Number</span><font></font>
  },{<font></font>
    <span class="hljs-attr">ACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"*"</span>: {
          <span class="hljs-string">"read"</span>: [<span class="hljs-string">'name'</span>, <span class="hljs-string">'sex'</span>],
          <span class="hljs-string">"extends"</span>: {
            <span class="hljs-string">"pets"</span>: {
              <span class="hljs-string">"read"</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-string">"find"</span>: <span class="hljs-literal">true</span><font></font>
            }<font></font>
          }<font></font>
        }<font></font>
      }<font></font>
    },<font></font>
    <span class="hljs-attr">OACL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">session</span>) </span>{
      <span class="hljs-keyword">var</span> _acl = {};
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.id === session.id)<font></font>
        _acl[session.id] = {<font></font>
          <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-string">"extends"</span>: {
            <span class="hljs-string">"pets"</span>: {
              <span class="hljs-string">"*"</span>: <span class="hljs-literal">true</span><font></font>
            }<font></font>
          }<font></font>
        };<font></font>
<font></font>
      <span class="hljs-keyword">return</span> _acl;<font></font>
    }<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">var</span> Pet = db.define(<span class="hljs-string">'pet'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span><font></font>
  });<font></font>
<font></font>
  Person.hasMany(<span class="hljs-string">'pets'</span>, Pet);<font></font>
};<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cette définition, n'importe qui peut vérifier les informations personnelles </font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>sex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et vérifier et rechercher librement ses </font></font><code>pets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, l'utilisateur lui-même peut exploiter toutes ses propres données et avoir pleine autorité sur les informations de son propre animal de compagnie.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de la vérification des autorisations d'accès sur les objets étendus, les autorisations d'objet et les autorisations d'objet étendu sont vérifiées séparément. </font><font style="vertical-align: inherit;">Par exemple, la requête suivante&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -X GET http://localhost/1.0/person/57fbbdb0a2400000/pets/57fbbdb0a2400007
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les autorisations sont vérifiées comme suit&nbsp;:</font></font></p>
<ul>
<li><code>pets[57fbbdb0a2400007]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>OACL</code></li>
<li><code>person[57fbbdb0a2400000]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>OACL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>extends</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>pets</code></li>
<li><code>person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>ACL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; </font></font><code>extends</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>pets</code></li>
<li><code>pets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt;</font></font><code>ACL</code></li>
</ul>
<h2 id="Function"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonction</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'API peut être définie pour le modèle et les opérations de données complexes peuvent être effectuées en personnalisant la fonction.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La plupart des autorisations peuvent être contrôlées via ACL, et les autorisations basées sur les objets n'ont pas besoin d'être implémentées via Function. </font><font style="vertical-align: inherit;">La fonction peut être utilisée pour compléter les autorisations basées sur les données, telles que l'octroi d'autorisations à différents groupes d'utilisateurs en fonction du statut d'approbation. </font><font style="vertical-align: inherit;">Et plusieurs modifications, telles que la nécessité de modifier plusieurs enregistrements de base de données.</font></font></p>
<h2 id="绘制数据模型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dessiner le modèle de données</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après avoir terminé la définition des données, vous pouvez utiliser pour </font></font><code>app.diagram()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dessiner </font></font><code>svg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le diagramme de classes de format du modèle de données et l'enregistrer dans un fichier pour obtenir une image semblable à celle-ci&nbsp;:
</font></font><img src="./demo/diagram.svg" alt="diagramme"></p>
 </div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id="toc"></div></div></div></div><div class="footer"><div class="container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">© Copyright 2012-2021 fibjs.org | </font></font><a href="../../../support.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soutenez-nous</font></font></a></div></div><a id="back-to-top" href="#" class="btn btn-default btn-lg back-to-top" role="button" title="" data-toggle="tooltip" data-placement="left" data-original-title=""><span class="glyphicon glyphicon-chevron-up"></span></a><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript" src="../../../../js/common.js"></script><script type="text/javascript" src="../../../../js/docs.js"></script></body></html>