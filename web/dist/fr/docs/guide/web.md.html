<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel="icon" type="image/png" href="../../../imgs/icon.png"><title>Pratique d'application Web haute performance - JavaScript sur fibre</title><link href="../../../css/common.css" rel="stylesheet"><link href="../../../css/docs.css" rel="stylesheet"></head><body><div class="navbar navbar-default navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basculer la navigation</font></font></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="../../index.html"><img src="../../../imgs/logo-dark.png"></a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right notranslate"><li><a href="../../index.html">HOME</a></li><li><a href="readme.md.html">GUIDE</a></li><li><a href="../manual/module/readme.md.html">MODULE</a></li><li><a href="../manual/object/readme.md.html">OBJECT</a></li><li><a href="../awesome/readme.md.html">AWESOME</a></li><li><a href="../../../download/index.html">DOWNLOAD</a></li><li class="nav-item dropdown"><a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">LANGUAGE</a><div class="dropdown-menu"><a href="../../../docs/guide/web.md.html">中文</a> <a href="../../../ca/docs/guide/web.md.html">Catalan</a> <a href="../../../de/docs/guide/web.md.html">Deutsch</a> <a href="../../../en/docs/guide/web.md.html">English</a> <a href="../../../es/docs/guide/web.md.html">Español</a> <a href="../../../fr/docs/guide/web.md.html">Français</a> <a href="../../../gl/docs/guide/web.md.html">Galego</a> <a href="../../../it/docs/guide/web.md.html">Italiano</a> <a href="../../../nl/docs/guide/web.md.html">Nederlands</a> <a href="../../../ru/docs/guide/web.md.html">Русский</a> <a href="../../../ja/docs/guide/web.md.html">日本語</a> <a href="../../../ko/docs/guide/web.md.html">한국어</a> <a href="../../../zh-tw/docs/guide/web.md.html">繁體中文</a></div></li></ul></div></div></div><div class="band"><div class="container"><span class="group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guide de développement Guide</font></font></span><div class="search"><input type="text" class="searchbox" placeholder="Recherche"></div></div></div><div class="container"><ol class="breadcrumb"><li><a href="../../index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page de garde</font></font></a></li><li><a href="readme.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guide de développement</font></font></a></li><li class="active"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pratiques d'application Web haute performance</font></font></li></ol></div><div class="page-body"><div class="container"><div class="sidebar hidden-xs"><div class="panel-group" id="accordion" role="tablist">  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_guide" aria-controls="collapse_guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guide de développement</font></font></a></h4></div><div id="collapse_guide" class="panel-collapse collapse in" aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="about.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que fibjs?</font></font></a></li>
<li><a href="install.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer l'environnement d'exploitation</font></font></a></li>
<li><a href="hello.md.html" class="notranslate">hello, world</a></li>
<li><a href="test.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une vie meilleure commence par un test</font></font></a></li>
<li><a href="profiler.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez des tueurs de performance</font></font></a></li>
<li><a href="sync.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchrone et asynchrone</font></font></a></li>
<li><a href="server-hot-update.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour à chaud du module serveur</font></font></a></li>
<li class="active"><a href="web.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pratiques d'application Web haute performance</font></font></a></li>
<li><a href="host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Routage de domaine</font></font></a></li>
<li><a href="x509.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation du certificat X509 dans fibjs</font></font></a></li>
<li><a href="contribute.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter un module natif</font></font></a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_module" aria-controls="collapse_module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module de base</font></font></a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/module/ifs/assert.md.html" class="notranslate">assert</a></li>
<li><a href="../manual/module/ifs/base32.md.html" class="notranslate">base32</a></li>
<li><a href="../manual/module/ifs/base58.md.html" class="notranslate">base58</a></li>
<li><a href="../manual/module/ifs/base64.md.html" class="notranslate">base64</a></li>
<li><a href="../manual/module/ifs/child_process.md.html" class="notranslate">child_process</a></li>
<li><a href="../manual/module/ifs/console.md.html" class="notranslate">console</a></li>
<li><a href="../manual/module/ifs/constants.md.html" class="notranslate">constants</a></li>
<li><a href="../manual/module/ifs/coroutine.md.html" class="notranslate">coroutine</a></li>
<li><a href="../manual/module/ifs/crypto.md.html" class="notranslate">crypto</a></li>
<li><a href="../manual/module/ifs/db.md.html" class="notranslate">db</a></li>
<li><a href="../manual/module/ifs/dgram.md.html" class="notranslate">dgram</a></li>
<li><a href="../manual/module/ifs/dns.md.html" class="notranslate">dns</a></li>
<li><a href="../manual/module/ifs/encoding.md.html" class="notranslate">encoding</a></li>
<li><a href="../manual/module/ifs/fs.md.html" class="notranslate">fs</a></li>
<li><a href="../manual/module/ifs/fs_constants.md.html" class="notranslate">fs_constants</a></li>
<li><a href="../manual/module/ifs/gd.md.html" class="notranslate">gd</a></li>
<li><a href="../manual/module/ifs/global.md.html" class="notranslate">global</a></li>
<li><a href="../manual/module/ifs/gui.md.html" class="notranslate">gui</a></li>
<li><a href="../manual/module/ifs/hash.md.html" class="notranslate">hash</a></li>
<li><a href="../manual/module/ifs/hex.md.html" class="notranslate">hex</a></li>
<li><a href="../manual/module/ifs/http.md.html" class="notranslate">http</a></li>
<li><a href="../manual/module/ifs/iconv.md.html" class="notranslate">iconv</a></li>
<li><a href="../manual/module/ifs/io.md.html" class="notranslate">io</a></li>
<li><a href="../manual/module/ifs/json.md.html" class="notranslate">json</a></li>
<li><a href="../manual/module/ifs/mq.md.html" class="notranslate">mq</a></li>
<li><a href="../manual/module/ifs/msgpack.md.html" class="notranslate">msgpack</a></li>
<li><a href="../manual/module/ifs/multibase.md.html" class="notranslate">multibase</a></li>
<li><a href="../manual/module/ifs/net.md.html" class="notranslate">net</a></li>
<li><a href="../manual/module/ifs/os.md.html" class="notranslate">os</a></li>
<li><a href="../manual/module/ifs/path.md.html" class="notranslate">path</a></li>
<li><a href="../manual/module/ifs/path_posix.md.html" class="notranslate">path_posix</a></li>
<li><a href="../manual/module/ifs/path_win32.md.html" class="notranslate">path_win32</a></li>
<li><a href="../manual/module/ifs/perf_hooks.md.html" class="notranslate">perf_hooks</a></li>
<li><a href="../manual/module/ifs/performance.md.html" class="notranslate">performance</a></li>
<li><a href="../manual/module/ifs/process.md.html" class="notranslate">process</a></li>
<li><a href="../manual/module/ifs/profiler.md.html" class="notranslate">profiler</a></li>
<li><a href="../manual/module/ifs/punycode.md.html" class="notranslate">punycode</a></li>
<li><a href="../manual/module/ifs/querystring.md.html" class="notranslate">querystring</a></li>
<li><a href="../manual/module/ifs/registry.md.html" class="notranslate">registry</a></li>
<li><a href="../manual/module/ifs/ssl.md.html" class="notranslate">ssl</a></li>
<li><a href="../manual/module/ifs/string_decoder.md.html" class="notranslate">string_decoder</a></li>
<li><a href="../manual/module/ifs/test.md.html" class="notranslate">test</a></li>
<li><a href="../manual/module/ifs/timers.md.html" class="notranslate">timers</a></li>
<li><a href="../manual/module/ifs/tty.md.html" class="notranslate">tty</a></li>
<li><a href="../manual/module/ifs/url.md.html" class="notranslate">url</a></li>
<li><a href="../manual/module/ifs/util.md.html" class="notranslate">util</a></li>
<li><a href="../manual/module/ifs/uuid.md.html" class="notranslate">uuid</a></li>
<li><a href="../manual/module/ifs/vm.md.html" class="notranslate">vm</a></li>
<li><a href="../manual/module/ifs/worker_threads.md.html" class="notranslate">worker_threads</a></li>
<li><a href="../manual/module/ifs/ws.md.html" class="notranslate">ws</a></li>
<li><a href="../manual/module/ifs/xml.md.html" class="notranslate">xml</a></li>
<li><a href="../manual/module/ifs/zip.md.html" class="notranslate">zip</a></li>
<li><a href="../manual/module/ifs/zlib.md.html" class="notranslate">zlib</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_object" aria-controls="collapse_object"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet incorporé</font></font></a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/object/ifs/blskey.md.html" class="notranslate">BlsKey</a></li>
<li><a href="../manual/object/ifs/buffer.md.html" class="notranslate">Buffer</a></li>
<li><a href="../manual/object/ifs/bufferedstream.md.html" class="notranslate">BufferedStream</a></li>
<li><a href="../manual/object/ifs/chain.md.html" class="notranslate">Chain</a></li>
<li><a href="../manual/object/ifs/childprocess.md.html" class="notranslate">ChildProcess</a></li>
<li><a href="../manual/object/ifs/cipher.md.html" class="notranslate">Cipher</a></li>
<li><a href="../manual/object/ifs/condition.md.html" class="notranslate">Condition</a></li>
<li><a href="../manual/object/ifs/dbconnection.md.html" class="notranslate">DbConnection</a></li>
<li><a href="../manual/object/ifs/dgramsocket.md.html" class="notranslate">DgramSocket</a></li>
<li><a href="../manual/object/ifs/digest.md.html" class="notranslate">Digest</a></li>
<li><a href="../manual/object/ifs/eckey.md.html" class="notranslate">ECKey</a></li>
<li><a href="../manual/object/ifs/ed25519key.md.html" class="notranslate">Ed25519Key</a></li>
<li><a href="../manual/object/ifs/event.md.html" class="notranslate">Event</a></li>
<li><a href="../manual/object/ifs/eventemitter.md.html" class="notranslate">EventEmitter</a></li>
<li><a href="../manual/object/ifs/fswatcher.md.html" class="notranslate">FSWatcher</a></li>
<li><a href="../manual/object/ifs/fiber.md.html" class="notranslate">Fiber</a></li>
<li><a href="../manual/object/ifs/file.md.html" class="notranslate">File</a></li>
<li><a href="../manual/object/ifs/handler.md.html" class="notranslate">Handler</a></li>
<li><a href="../manual/object/ifs/heapgraphedge.md.html" class="notranslate">HeapGraphEdge</a></li>
<li><a href="../manual/object/ifs/heapgraphnode.md.html" class="notranslate">HeapGraphNode</a></li>
<li><a href="../manual/object/ifs/heapsnapshot.md.html" class="notranslate">HeapSnapshot</a></li>
<li><a href="../manual/object/ifs/httpclient.md.html" class="notranslate">HttpClient</a></li>
<li><a href="../manual/object/ifs/httpcollection.md.html" class="notranslate">HttpCollection</a></li>
<li><a href="../manual/object/ifs/httpcookie.md.html" class="notranslate">HttpCookie</a></li>
<li><a href="../manual/object/ifs/httphandler.md.html" class="notranslate">HttpHandler</a></li>
<li><a href="../manual/object/ifs/httpmessage.md.html" class="notranslate">HttpMessage</a></li>
<li><a href="../manual/object/ifs/httprepeater.md.html" class="notranslate">HttpRepeater</a></li>
<li><a href="../manual/object/ifs/httprequest.md.html" class="notranslate">HttpRequest</a></li>
<li><a href="../manual/object/ifs/httpresponse.md.html" class="notranslate">HttpResponse</a></li>
<li><a href="../manual/object/ifs/httpserver.md.html" class="notranslate">HttpServer</a></li>
<li><a href="../manual/object/ifs/httpuploaddata.md.html" class="notranslate">HttpUploadData</a></li>
<li><a href="../manual/object/ifs/httpsserver.md.html" class="notranslate">HttpsServer</a></li>
<li><a href="../manual/object/ifs/image.md.html" class="notranslate">Image</a></li>
<li><a href="../manual/object/ifs/iterator.md.html" class="notranslate">Iterator</a></li>
<li><a href="../manual/object/ifs/leveldb.md.html" class="notranslate">LevelDB</a></li>
<li><a href="../manual/object/ifs/lock.md.html" class="notranslate">Lock</a></li>
<li><a href="../manual/object/ifs/lrucache.md.html" class="notranslate">LruCache</a></li>
<li><a href="../manual/object/ifs/memorystream.md.html" class="notranslate">MemoryStream</a></li>
<li><a href="../manual/object/ifs/message.md.html" class="notranslate">Message</a></li>
<li><a href="../manual/object/ifs/mongocollection.md.html" class="notranslate">MongoCollection</a></li>
<li><a href="../manual/object/ifs/mongocursor.md.html" class="notranslate">MongoCursor</a></li>
<li><a href="../manual/object/ifs/mongodb.md.html" class="notranslate">MongoDB</a></li>
<li><a href="../manual/object/ifs/mongoid.md.html" class="notranslate">MongoID</a></li>
<li><a href="../manual/object/ifs/mysql.md.html" class="notranslate">MySQL</a></li>
<li><a href="../manual/object/ifs/odbc.md.html" class="notranslate">Odbc</a></li>
<li><a href="../manual/object/ifs/pkey.md.html" class="notranslate">PKey</a></li>
<li><a href="../manual/object/ifs/rangestream.md.html" class="notranslate">RangeStream</a></li>
<li><a href="../manual/object/ifs/redis.md.html" class="notranslate">Redis</a></li>
<li><a href="../manual/object/ifs/redishash.md.html" class="notranslate">RedisHash</a></li>
<li><a href="../manual/object/ifs/redislist.md.html" class="notranslate">RedisList</a></li>
<li><a href="../manual/object/ifs/redisset.md.html" class="notranslate">RedisSet</a></li>
<li><a href="../manual/object/ifs/redissortedset.md.html" class="notranslate">RedisSortedSet</a></li>
<li><a href="../manual/object/ifs/routing.md.html" class="notranslate">Routing</a></li>
<li><a href="../manual/object/ifs/sqlite.md.html" class="notranslate">SQLite</a></li>
<li><a href="../manual/object/ifs/sandbox.md.html" class="notranslate">SandBox</a></li>
<li><a href="../manual/object/ifs/seekablestream.md.html" class="notranslate">SeekableStream</a></li>
<li><a href="../manual/object/ifs/semaphore.md.html" class="notranslate">Semaphore</a></li>
<li><a href="../manual/object/ifs/service.md.html" class="notranslate">Service</a></li>
<li><a href="../manual/object/ifs/smtp.md.html" class="notranslate">Smtp</a></li>
<li><a href="../manual/object/ifs/socket.md.html" class="notranslate">Socket</a></li>
<li><a href="../manual/object/ifs/sslhandler.md.html" class="notranslate">SslHandler</a></li>
<li><a href="../manual/object/ifs/sslserver.md.html" class="notranslate">SslServer</a></li>
<li><a href="../manual/object/ifs/sslsocket.md.html" class="notranslate">SslSocket</a></li>
<li><a href="../manual/object/ifs/stat.md.html" class="notranslate">Stat</a></li>
<li><a href="../manual/object/ifs/statswatcher.md.html" class="notranslate">StatsWatcher</a></li>
<li><a href="../manual/object/ifs/stream.md.html" class="notranslate">Stream</a></li>
<li><a href="../manual/object/ifs/stringdecoder.md.html" class="notranslate">StringDecoder</a></li>
<li><a href="../manual/object/ifs/ttyinputstream.md.html" class="notranslate">TTYInputStream</a></li>
<li><a href="../manual/object/ifs/ttyoutputstream.md.html" class="notranslate">TTYOutputStream</a></li>
<li><a href="../manual/object/ifs/tcpserver.md.html" class="notranslate">TcpServer</a></li>
<li><a href="../manual/object/ifs/textdecoder.md.html" class="notranslate">TextDecoder</a></li>
<li><a href="../manual/object/ifs/textencoder.md.html" class="notranslate">TextEncoder</a></li>
<li><a href="../manual/object/ifs/timer.md.html" class="notranslate">Timer</a></li>
<li><a href="../manual/object/ifs/urlobject.md.html" class="notranslate">UrlObject</a></li>
<li><a href="../manual/object/ifs/websocket.md.html" class="notranslate">WebSocket</a></li>
<li><a href="../manual/object/ifs/websocketmessage.md.html" class="notranslate">WebSocketMessage</a></li>
<li><a href="../manual/object/ifs/webview.md.html" class="notranslate">WebView</a></li>
<li><a href="../manual/object/ifs/worker.md.html" class="notranslate">Worker</a></li>
<li><a href="../manual/object/ifs/x509cert.md.html" class="notranslate">X509Cert</a></li>
<li><a href="../manual/object/ifs/x509crl.md.html" class="notranslate">X509Crl</a></li>
<li><a href="../manual/object/ifs/x509req.md.html" class="notranslate">X509Req</a></li>
<li><a href="../manual/object/ifs/xmlattr.md.html" class="notranslate">XmlAttr</a></li>
<li><a href="../manual/object/ifs/xmlcdatasection.md.html" class="notranslate">XmlCDATASection</a></li>
<li><a href="../manual/object/ifs/xmlcharacterdata.md.html" class="notranslate">XmlCharacterData</a></li>
<li><a href="../manual/object/ifs/xmlcomment.md.html" class="notranslate">XmlComment</a></li>
<li><a href="../manual/object/ifs/xmldocument.md.html" class="notranslate">XmlDocument</a></li>
<li><a href="../manual/object/ifs/xmldocumenttype.md.html" class="notranslate">XmlDocumentType</a></li>
<li><a href="../manual/object/ifs/xmlelement.md.html" class="notranslate">XmlElement</a></li>
<li><a href="../manual/object/ifs/xmlnamednodemap.md.html" class="notranslate">XmlNamedNodeMap</a></li>
<li><a href="../manual/object/ifs/xmlnode.md.html" class="notranslate">XmlNode</a></li>
<li><a href="../manual/object/ifs/xmlnodelist.md.html" class="notranslate">XmlNodeList</a></li>
<li><a href="../manual/object/ifs/xmlprocessinginstruction.md.html" class="notranslate">XmlProcessingInstruction</a></li>
<li><a href="../manual/object/ifs/xmltext.md.html" class="notranslate">XmlText</a></li>
<li><a href="../manual/object/ifs/zipfile.md.html" class="notranslate">ZipFile</a></li>
<li><a href="../manual/object/ifs/object.md.html" class="notranslate">object</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_awesome" aria-controls="collapse_awesome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module communautaire</font></font></a></h4></div><div id="collapse_awesome" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../awesome/module/fib-session.md.html" class="notranslate">fib-session</a></li>
<li><a href="../awesome/module/fib-pool.md.html" class="notranslate">fib-pool</a></li>
<li><a href="../awesome/module/fib-orm.md.html" class="notranslate">fib-orm</a></li>
<li><a href="../awesome/module/fib-app.md.html" class="notranslate">fib-app</a></li>
<li><a href="../awesome/module/fib-kv.md.html" class="notranslate">fib-kv</a></li>
<li><a href="../awesome/module/fib-rpc.md.html" class="notranslate">fib-rpc</a></li>
<li><a href="../awesome/module/fib-qr.md.html" class="notranslate">fib-qr</a></li>
<li><a href="../awesome/module/fib-pug.md.html" class="notranslate">fib-pug</a></li>
<li><a href="../awesome/module/ejs.md.html" class="notranslate">ejs</a></li>
<li><a href="../awesome/module/juicer.md.html" class="notranslate">Juicer</a></li>
<li><a href="../awesome/module/highlight.js.md.html" class="notranslate">highlight.js</a></li>
<li><a href="../awesome/module/marked.md.html" class="notranslate">marked</a></li>
<li><a href="../awesome/module/node-cron.md.html" class="notranslate">node-cron</a></li>
<li><a href="../awesome/module/debug.md.html" class="notranslate">debug</a></li>
<li><a href="../awesome/module/benchmark.js.md.html" class="notranslate">benchmark.js</a></li>
<li><a href="../awesome/module/sinon.md.html" class="notranslate">sinon</a></li>
<li><a href="../awesome/module/node-mime.md.html" class="notranslate">node-mime</a></li>
<li><a href="../awesome/module/validatorjs.md.html" class="notranslate">validatorjs</a></li>
<li><a href="../awesome/module/superstruct.md.html" class="notranslate">superstruct</a></li>
<li><a href="../awesome/module/cluster-server.md.html" class="notranslate">cluster-server</a></li>
<li><a href="../awesome/module/synaptic.md.html" class="notranslate">synaptic</a></li>
<li><a href="../awesome/module/source-map.md.html" class="notranslate">source-map</a></li>
<li><a href="../awesome/module/json-format.md.html" class="notranslate">json-format</a></li>
<li><a href="../awesome/module/viz.js.md.html" class="notranslate">viz.js</a></li>
<li><a href="../awesome/module/nomnoml.md.html" class="notranslate">nomnoml</a></li>
<li><a href="../awesome/module/pegjs.md.html" class="notranslate">pegjs</a></li>
<li><a href="../awesome/module/uglify-js.md.html" class="notranslate">uglify-js</a></li>
<li><a href="../awesome/module/js-beautify.md.html" class="notranslate">js-beautify</a></li>
<li><a href="../awesome/module/chalk-animation.md.html" class="notranslate">chalk-animation</a></li>
<li><a href="../awesome/module/jsrsasign.md.html" class="notranslate">jsrsasign</a></li>
<li><a href="../awesome/module/crypto-js.md.html" class="notranslate">crypto-js</a></li>
<li><a href="../awesome/module/ascii-table.md.html" class="notranslate">ascii-table</a></li>
<li><a href="../awesome/module/logstream.md.html" class="notranslate">logstream</a></li>
<li><a href="../awesome/module/ci.md.html" class="notranslate">ci</a></li>
<li><a href="../awesome/module/fs-readdir-recursive.md.html" class="notranslate">fs-readdir-recursive</a></li>
<li><a href="../awesome/module/mkdirp.md.html" class="notranslate">mkdirp</a></li>
<li><a href="../awesome/module/rmdirr.md.html" class="notranslate">rmdirr</a></li>
<li><a href="../awesome/module/detect-port.md.html" class="notranslate">detect-port</a></li>
<li><a href="../awesome/module/bitcoinjs-lib.md.html" class="notranslate">bitcoinjs-lib</a></li>
<li><a href="../awesome/module/rakuten.md.html" class="notranslate">Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class="content"><div class="social-share share-component" data-sites="weibo,twitter" data-description="分享"></div> <h1 id="高性能-Web-应用程序实践"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pratiques d'application Web haute performance</font></font></h1>
<h2 id="介绍"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduire</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fibjs est un framework de serveur d'applications hautes performances conçu principalement pour le développement web backend. </font><font style="vertical-align: inherit;">Il est construit sur la base du moteur JavaScript Google v8 et choisit une solution de concurrence différente du rappel traditionnel. </font><font style="vertical-align: inherit;">fibjs utilise des fibres pour isoler la complexité métier causée par les appels asynchrones au niveau de la couche cadre, réduisant considérablement la difficulté de développement et réduisant les problèmes de performances causés par le traitement asynchrone fréquent dans l'espace utilisateur.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La conception de fibjs accorde une grande attention aux performances. Les modules d'E/S réseau et HTTP intégrés adoptent un modèle d'E/S non bloquant piloté par les événements, et les développeurs peuvent facilement implémenter des applications serveur à haute fiabilité. </font><font style="vertical-align: inherit;">Et parce que la couche inférieure est implémentée par C++, fibjs a d'excellentes performances, peut facilement gérer un accès simultané élevé et fournir des services extrêmement stables et fiables.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le même temps, fibjs prend également en charge WebSocket, qui est un protocole de communication en duplex intégral basé sur le protocole TCP.Il établit une connexion ininterrompue entre le navigateur et le serveur, qui peut réaliser une transmission de données bidirectionnelle en temps réel, et peut prendre en charge les données dans n'importe quel format de transmission. </font><font style="vertical-align: inherit;">Des applications de communication en temps réel avec de meilleurs effets de communication peuvent être facilement réalisées en utilisant WebSocket.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En bref, fibjs met non seulement l'accent sur les hautes performances et la haute fiabilité, mais fournit également des fonctionnalités de communication en temps réel telles que WebSocket, un framework très adapté au développement d'applications Web à haut débit.</font></font></p>
<h2 id="开发环境搭建"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer l'environnement de développement</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avant de commencer le développement de fibjs, nous devons d'abord préparer l'environnement de développement. </font><font style="vertical-align: inherit;">Ce chapitre présentera comment installer fibjs, comment utiliser l'outil fibjs pour initialiser le projet et comment utiliser l'environnement de développement intégré de l'IDE.</font></font></p>
<h3 id="安装-fibjs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer fibjs</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour différents systèmes d'exploitation, la façon d'installer fibjs est également légèrement différente.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour les utilisateurs Linux et macOS, fibjs peut être installé avec la commande suivante&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>curl -s https://fibjs.org/download/installer.sh | sh
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous utilisez macOS et utilisez le gestionnaire de packages Homebrew, vous pouvez également l'installer avec&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>brew install fibjs
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour les utilisateurs de Windows, vous devez télécharger le programme d'installation à partir du site Web officiel de fibjs, puis suivre les instructions pour l'installer.</font></font></p>
<h3 id="使用-fibjs-–init-创建新项目"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer un nouveau projet avec fibjs --init</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après avoir installé fibjs, vous pouvez utiliser l'outil fibjs pour créer rapidement de nouveaux projets. </font><font style="vertical-align: inherit;">Un modèle de projet de base peut être créé avec la commande suivante&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --init
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette commande créera une nouvelle structure de projet dans le répertoire actuel, y compris package.json, qui est utilisé pour stocker les informations de base du projet et les informations de dépendance.</font></font></p>
<h2 id="编写-Web-应用程序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rédiger une application Web</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le développement d'applications Web est actuellement le scénario d'application le plus couramment utilisé pour fibjs. fibjs fournit une série d'outils et de modules pour nous aider à créer des applications Web plus rapidement.</font></font></p>
<h3 id="编写-HTTP-服务器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écrire un serveur HTTP</font></font></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importez d'abord le module http ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instanciez http.Server et écoutez les requêtes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le serveur est démarré avec la fonction de démarrage.</font></font></li>
</ul>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {<font></font>
    req.response.write(<span class="hljs-string">'Hello World!'</span>);<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<h3 id="解析-URL-参数和请求体"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyser les paramètres d'URL et le corps de la requête</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'analyse des paramètres d'URL et du corps de la requête est très importante et appliquée à diverses applications serveur. </font><font style="vertical-align: inherit;">Dans fibjs, les paramètres d'URL entrants peuvent être analysés directement via req.query, tandis que le corps de la requête est lu via req.body.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">var</span> name = req.query.first(<span class="hljs-string">'name'</span>);
    <span class="hljs-keyword">var</span> msg = name ? <span class="hljs-string">`Hello <span class="hljs-subst">${name}</span>!`</span> : <span class="hljs-string">'Hello world!'</span>;<font></font>
    req.response.write(msg);<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<h3 id="实现接口访问控制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implémenter le contrôle d'accès à l'interface</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restreindre l'accès des utilisateurs via des interfaces est un scénario très courant. </font><font style="vertical-align: inherit;">Ci-dessous un exemple simple.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">if</span> (req.headers.first(<span class="hljs-string">'auth'</span>) === <span class="hljs-string">'ok'</span>) {<font></font>
        req.response.write(<span class="hljs-string">'Hello World!'</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        req.response.write(<span class="hljs-string">'Access Denied!'</span>);<font></font>
    }<font></font>
});<font></font>
server.start();<font></font>
</code></pre>
<h3 id="增加路由处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter un traitement de routage</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le routage est l'un des concepts les plus importants dans une application Web. Le routage fait référence à la distribution des requêtes reçues aux processeurs selon certaines règles. </font><font style="vertical-align: inherit;">Dans fibjs, vous pouvez écrire votre propre module de routage et le lier au serveur http, puis effectuer la correspondance d'URL et le traitement correspondant via une analyse de routage personnalisée.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> { Router } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mq'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> router = <span class="hljs-keyword">new</span> Router();<font></font>
router.get(<span class="hljs-string">'/hello/:name'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, name</span>) </span>{<font></font>
    req.response.write(<span class="hljs-string">'hello, '</span> + name);<font></font>
});<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, router);<font></font>
svr.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'exemple ci-dessus peut également être implémenté avec une syntaxe plus simple&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8</div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> svr = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
    <span class="hljs-string">'/hello/:name'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, name</span>) </span>{<font></font>
        req.response.write(<span class="hljs-string">'hello, '</span> + name);<font></font>
    }<font></font>
});<font></font>
svr.start();<font></font>
</code></pre>
<h3 id="错误处理与日志记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestion des erreurs et journalisation</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans fibjs, vous pouvez intercepter des exceptions logiques via le bloc try-catch et les afficher dans le fichier journal pour un enregistrement de débogage&nbsp;; s'il s'agit d'une exception fatale, vous pouvez la lancer directement dans le cadre supérieur pour traitement.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10</div><span class="hljs-keyword">const</span> <span class="hljs-built_in">console</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'console'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, (req) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ...</span>
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-built_in">console</span>.log(e.message, e.stack);<font></font>
    }<font></font>
});<font></font>
</code></pre>
<h2 id="WebSocket"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebSocket</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le protocole WebSocket est un protocole de communication en duplex intégral basé sur le protocole TCP.Il établit une connexion ininterrompue entre le navigateur et le serveur, peut réaliser une transmission de données bidirectionnelle en temps réel et peut prendre en charge la transmission de données dans n'importe quel format. </font><font style="vertical-align: inherit;">Dans fibjs, le module de support WebSocket fournit l'interface API correspondante, qui peut réaliser le développement du serveur et du client WebSocket.</font></font></p>
<h3 id="使用-fibjs-原生-WebSocket-模块实现-WebSocket-服务器端"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser le module WebSocket natif fibjs pour implémenter WebSocket côté serveur</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Côté serveur, les requêtes HTTP peuvent être converties en connexions WebSocket via la fonction de mise à niveau. </font><font style="vertical-align: inherit;">Lors de la création d'un objet serveur http, vous pouvez utiliser ws.upgrade(callback) et le transmettre à la méthode http.start() pour convertir la requête http en WebSocket.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
  <span class="hljs-string">'/ws'</span>: ws.upgrade(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">conn, req</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'a client connected.'</span>);<font></font>
<font></font>
    <span class="hljs-comment">// 监听消息事件</span>
    conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'received message: '</span>, evt.data);
      <span class="hljs-comment">// echo 消息回客户端</span>
      conn.send(<span class="hljs-string">'Server: '</span> + evt.data);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听关闭事件</span>
    conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'closed.'</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听错误事件</span>
    conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      <span class="hljs-built_in">console</span>.log(err);<font></font>
    };<font></font>
  })<font></font>
});<font></font>
<font></font>
server.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l'exemple ci-dessus, nous pouvons surveiller l'événement de message envoyé par le client et l'événement de fermeture de connexion entre le serveur et le client. </font><font style="vertical-align: inherit;">Lorsque le serveur reçoit un message client, il renvoie le même message au client. </font><font style="vertical-align: inherit;">À ce stade, une simple communication point à point WebSocket est réalisée.</font></font></p>
<h3 id="实现与数据存储的交互"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implémentation de l'interaction avec les magasins de données</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de l'utilisation de WebSocket pour la communication, en plus de l'envoi et de la réception simples de messages, des opérations telles que le stockage persistant et la requête de données doivent également être prises en compte. </font><font style="vertical-align: inherit;">À ce stade, vous devez utiliser la base de données et vous pouvez utiliser le module db intégré de fibjs pour interagir avec la base de données.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'exemple de code est le suivant&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">"ws"</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">var</span> db = <span class="hljs-built_in">require</span>(<span class="hljs-string">"db"</span>);<font></font>
<font></font>
<span class="hljs-comment">// 创建一个 MySQL 数据库连接对象</span>
<span class="hljs-keyword">var</span> mysql = db.openMySQL(<span class="hljs-string">"mysql://root:password@localhost/dbname"</span>);<font></font>
<font></font>
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, {
  <span class="hljs-string">"/ws"</span>: ws.upgrade(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">conn, req</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"a client connected."</span>);<font></font>
<font></font>
    <span class="hljs-comment">// 监听消息事件</span>
    conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"received message: "</span>, evt.data);<font></font>
<font></font>
      <span class="hljs-comment">// 查询数据库，返回满足条件的记录</span>
      <span class="hljs-keyword">var</span> rs = mysql.execute(<span class="hljs-string">"SELECT * FROM user WHERE name=?"</span>, evt.data.toString());<font></font>
      conn.send(<span class="hljs-built_in">JSON</span>.stringify(rs));<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听关闭事件</span>
    conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"closed."</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">// 监听错误事件</span>
    conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      <span class="hljs-built_in">console</span>.log(err);<font></font>
    };<font></font>
  })<font></font>
});<font></font>
<font></font>
server.start();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l'exemple ci-dessus, nous utilisons d'abord la méthode openMySQL du module db pour créer un objet de connexion à la base de données MySQL mysql, puis utilisons la méthode execute pour exécuter directement des requêtes SQL après avoir écouté les messages du client afin d'obtenir des enregistrements remplissant les conditions. </font><font style="vertical-align: inherit;">Enfin, les résultats de la requête sont renvoyés au client via le protocole WebSocket.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il convient de noter que dans le développement réel, la gestion des exceptions et la sécurité des données doivent être bien faites.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En résumé, à travers le module db, on peut facilement interagir avec la base de données, associée au protocole WebSocket, pour réaliser des applications Web temps réel et performantes.</font></font></p>
<h3 id="实现-WebSocket-客户端与服务器端通信"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implémenter la communication client-serveur WebSocket</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Côté client, vous pouvez vous connecter à un serveur WebSocket en créant une instance WebSocket et en spécifiant une URL, puis envoyer des messages au serveur.</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div><span class="hljs-keyword">var</span> ws = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);<font></font>
<font></font>
<span class="hljs-comment">// 创建 WebSocket 实例</span>
<span class="hljs-keyword">var</span> conn = <span class="hljs-keyword">new</span> ws.Socket(<span class="hljs-string">'ws://localhost:8080/ws'</span>);<font></font>
<font></font>
<span class="hljs-comment">// 监听打开事件</span>
conn.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
  conn.send(<span class="hljs-string">'hello'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// 监听消息事件</span>
conn.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'received message:'</span>, evt.data);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// 监听关闭事件</span>
conn.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, reason</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'closed.'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// 监听错误事件</span>
conn.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
  <span class="hljs-built_in">console</span>.log(err);<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le code client ci-dessus, nous créons une instance WebSocket et spécifions son URL. Une fois la connexion établie avec succès, nous pouvons envoyer des messages au serveur. </font><font style="vertical-align: inherit;">Lorsque le serveur reçoit un message client, il renvoie le même message au client. </font><font style="vertical-align: inherit;">À ce stade, une simple communication point à point WebSocket est réalisée.</font></font></p>
<h3 id="WebSocket-的优势和使用场景"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages et scénarios d'utilisation de WebSocket</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le protocole WebSocket a un modèle de communication bidirectionnel typique, permettant au serveur de transmettre activement des données au client, et est souvent utilisé pour implémenter des chats, des jeux en ligne et d'autres occasions qui nécessitent un temps réel et une grande immédiateté. </font><font style="vertical-align: inherit;">Par rapport aux autres protocoles de transport, le protocole WebSocket présente les avantages suivants :</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Performances en temps réel élevées, prise en charge de la communication bidirectionnelle • Spécification de protocole simple, facile à utiliser • Capable de gérer un grand nombre de connexions simultanées • Prise en charge de longues connexions, réduisant la consommation de temps de transmission réseau</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les scénarios d'utilisation les plus courants de WebSocket incluent le chat Web, la bataille de jeu, le jeu en ligne et la messagerie instantanée, etc.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour résumer, avec le module de support WebSocket, c'est très simple à mettre en place, et les développeurs peuvent construire rapidement leurs propres applications Web.</font></font></p>
<h2 id="单元测试"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test de l'unité</font></font></h2>
<h3 id="测试框架和测试方法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cadre de test et méthode de test</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le processus de développement logiciel, les tests sont un maillon très important, et les tests unitaires en sont une partie importante. Les tests unitaires peuvent vérifier efficacement si le code répond à la conception et aux exigences, et éviter les erreurs introduites lorsque le code est modifié. </font><font style="vertical-align: inherit;">Généralement, le principe des tests unitaires est de tester chaque fonction et méthode pour s'assurer que l'entrée et la sortie de chaque fonction et méthode sont correctes.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un framework de test est une base de code pour l'écriture, l'exécution et la vérification des cas de test, qui fournit des fonctions telles que la gestion, l'exécution et le reporting des cas de test. </font><font style="vertical-align: inherit;">Dans JavaScript et Node.js, les frameworks de tests unitaires populaires incluent Mocha, Jest et Jasmine, entre autres. </font><font style="vertical-align: inherit;">Dans fibjs, nous avons également notre propre framework de test, le module de test.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le processus de test unitaire, les méthodes de test généralement utilisées incluent les tests en boîte noire et les tests en boîte blanche.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le test de boîte noire est une méthode de test qui ne considère que l'entrée et la sortie d'une fonction sans tenir compte des détails d'implémentation à l'intérieur de la fonction. </font><font style="vertical-align: inherit;">Les tests de boîte noire sont basés sur l'analyse des exigences et les spécifications de conception, via l'analyse et l'exécution des cas de test, pour déterminer s'il existe des erreurs logiques, des erreurs de limites et des problèmes de sécurité dans le programme. </font><font style="vertical-align: inherit;">Son avantage est que le processus de test est simple et que les résultats du test sont fiables, mais l'inconvénient est que le test ne peut pas couvrir tous les chemins du programme.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le test de la boîte blanche est une méthode de test qui prend en compte les détails d'implémentation interne des fonctions, y compris les instructions conditionnelles, les instructions de boucle, la récursivité et la couverture du code. </font><font style="vertical-align: inherit;">Grâce à ces tests, vous pouvez trouver d'éventuels problèmes dans l'interaction entre les données partagées et le code. </font><font style="vertical-align: inherit;">L'avantage des tests en boîte blanche est qu'ils peuvent couvrir tous les chemins du programme. L'inconvénient est que le processus de test est plus compliqué et que les résultats des tests sont affectés par l'environnement et les méthodes de mise en œuvre.</font></font></p>
<h3 id="使用-test-模块编写测试用例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rédiger des cas de test à l'aide du module de test</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans fibjs, nous pouvons utiliser le module de test pour écrire des cas de test pour le serveur Web. </font><font style="vertical-align: inherit;">Voici un exemple simple&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14</div><span class="hljs-keyword">var</span> test = <span class="hljs-built_in">require</span>(<span class="hljs-string">'test'</span>);<font></font>
test.setup();<font></font>
<font></font>
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<font></font>
<font></font>
describe(<span class="hljs-string">'Web server test'</span>, () =&gt; {<font></font>
    it(<span class="hljs-string">'should return hello world'</span>, () =&gt; {
        <span class="hljs-keyword">var</span> r = http.get(<span class="hljs-string">'http://localhost:8080/hello'</span>);<font></font>
        assert.equal(r.statusCode, <span class="hljs-number">200</span>);<font></font>
        assert.equal(r.data.toString(), <span class="hljs-string">'Hello World'</span>);<font></font>
    });<font></font>
});<font></font>
<font></font>
test.run();<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet exemple, nous utilisons les fonctions describe et it pour définir respectivement le module de test et les cas de test, et utilisons la fonction assert pour la vérification des assertions.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la fonction describe, nous pouvons définir plusieurs fonctions it pour tester différents scénarios respectivement. </font><font style="vertical-align: inherit;">Dans chaque fonction informatique, nous pouvons utiliser la fonction http.get pour simuler une requête HTTP GET, obtenir la réponse de la requête et effectuer une vérification d'assertion telle que assertTrue et assertEqual.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En écrivant des scénarios de test, vous pouvez tester efficacement l'exactitude des fonctions et des modules, garantir la qualité du produit et améliorer la maintenabilité du code.</font></font></p>
<h2 id="热更新"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mise à jour à chaud</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La mise à jour à chaud fait référence à la mise à jour du code du serveur sans arrêter le service. </font><font style="vertical-align: inherit;">Dans le processus de développement d'un programme, afin d'itérer rapidement, il est souvent nécessaire d'ajuster le code et d'ajouter de nouvelles fonctions. </font><font style="vertical-align: inherit;">L'utilisation de la mise à jour à chaud peut utiliser un nouveau code pour terminer le travail d'itération plus efficacement sans arrêter le service.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans fibjs, nous pouvons utiliser le module SandBox pour obtenir des mises à jour à chaud fluides. </font><font style="vertical-align: inherit;">Le module SandBox peut fournir un environnement d'exécution sûr, simuler des variables globales et d'autres fonctions. </font><font style="vertical-align: inherit;">Pour une implémentation spécifique, veuillez vous référer aux étapes suivantes&nbsp;:</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chargez les fichiers de code qui doivent être mis à jour (tels que web.js).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via SandBox, créez un nouveau module de sécurité, chargez web.js dans ce module et générez un module de sécurité. </font><font style="vertical-align: inherit;">Remontez le gestionnaire du service en cours d'exécution via le module de sécurité généré.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le serveur continue de traiter les requêtes précédentes et les nouvelles requêtes seront montées sur le nouveau gestionnaire.</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici un exemple de code pour des mises à jour à chaud fluides à l'aide du module SandBox&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</div><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> { SandBox } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vm'</span>);<font></font>
<font></font>
<span class="hljs-keyword">let</span> FILE_PATH = <span class="hljs-string">'./web.js'</span>;
<span class="hljs-keyword">let</span> handler = <span class="hljs-keyword">new</span> SandBox().require(FILE_PATH).handler;<font></font>
<font></font>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> http.Server(<span class="hljs-number">8080</span>, handler);<font></font>
<font></font>
server.start();<font></font>
<font></font>
fs.watch(FILE_PATH, (event, filename) =&gt; {<font></font>
  handler = <span class="hljs-keyword">new</span> SandBox().require(FILE_PATH).handler;<font></font>
  server.handler = handler;<font></font>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleString()}</span>] server reloaded.`</span>);<font></font>
});<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans ce code, nous chargeons d'abord le code dans web.js une fois au démarrage du programme, puis créons une instance SandBox et chargeons le code dans l'instance. </font><font style="vertical-align: inherit;">Ensuite, nous avons créé un nouveau serveur HTTP et utilisé la méthode dans le gestionnaire pour traiter la requête.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le code, nous utilisons fs.watch pour surveiller les modifications du fichier web.js. Une fois le fichier modifié, nous rechargeons le code et mettons à jour l'implémentation dans le gestionnaire.</font></font></p>
<h2 id="性能优化"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optimisation des performances</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le processus de développement, nous devons souvent faire face à des problèmes de performances. </font><font style="vertical-align: inherit;">Optimiser le code et améliorer les performances est l'une des compétences nécessaires pour les développeurs. </font><font style="vertical-align: inherit;">Dans fibjs, nous pouvons utiliser CPU Profiler pour nous aider à analyser l'état d'exécution du programme et à optimiser le code.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans fibjs, il vous suffit d'utiliser le paramètre de ligne de commande --prof pour démarrer fibjs, c'est-à-dire que vous pouvez démarrer CPU Profiler (l'intervalle par défaut est de 1000 ms). </font><font style="vertical-align: inherit;">Si vous avez besoin de journaux d'analyse de plus grande précision, vous pouvez utiliser le paramètre --prof-interval pour définir l'intervalle de journalisation. </font><font style="vertical-align: inherit;">Par exemple:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1
2</div>$ fibjs --prof test.js   <span class="hljs-comment"># 启动 CPU Profiler，默认以 1000ms 为间隔</span>
$ fibjs --prof --prof-interval=10ms test.js <span class="hljs-comment"># 启动 CPU Profiler，以 10000us（即 10ms）为间隔</span>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque fibjs a fini de s'exécuter, un répertoire de nom de fichier source sera généré dans le répertoire courant, qui contient un fichier journal et quelques fichiers auxiliaires. </font><font style="vertical-align: inherit;">Le nom par défaut du fichier journal est fibjs-xxxx.log, où xxxx est un horodatage. </font><font style="vertical-align: inherit;">Le nom du fichier journal peut être spécifié avec l'option --log. </font><font style="vertical-align: inherit;">A ce stade, vous pouvez </font></font><code>--prof-process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traiter :</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --prof-process fibjs-xxxx.log prof.svg
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après l'exécution, ouvrez prof.svg avec un navigateur pour afficher le graphique de flamme de ce journal&nbsp;:
 </font></font><img src="./imgs/prof.svg" alt="Prof"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez cliquer pour afficher l'image en taille réelle. Dans l'image en taille réelle, vous pouvez utiliser la souris pour afficher des informations plus détaillées&nbsp;: </font></font><a href="./imgs/prof.svg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prof. svg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le diagramme de flamme généré, chaque bloc de couleur représente un point d'enregistrement. Plus le bloc de couleur est long, plus il a été enregistré&nbsp;; chaque ligne représente une couche de pile d'appels, et plus il y a de couches, plus il y a de couches d'appels&nbsp;; La disposition de la pile est inversée, plus le bloc de couleur est bas, plus la fonction d'origine est importante.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe deux types de blocs de couleur, l'un est rouge et l'autre est bleu. </font><font style="vertical-align: inherit;">Dans le profileur de fibjs, le rouge représente les opérations JavaScript et le bleu représente les opérations io ou les opérations natives. </font><font style="vertical-align: inherit;">Selon le problème que vous devez résoudre, les domaines sur lesquels vous devez vous concentrer varient. </font><font style="vertical-align: inherit;">Par exemple, si vous devez résoudre le problème de l'utilisation élevée du processeur, vous devez faire attention au bloc de couleur rouge à ce moment&nbsp;; et si votre application a une faible utilisation du processeur mais une réponse lente, vous devez faire attention au bleu bloc de couleur. </font><font style="vertical-align: inherit;">Plus le bloc de couleur près du haut est grand, plus il faut d'attention et d'optimisation.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous pouvons essayer d'ajuster les fonctions qui consomment plus de ressources CPU, implémenter IO via des méthodes asynchrones ou optimiser le code lors de l'écriture.</font></font></p>
<h2 id="部署上线"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">déploiement en ligne</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour que notre projet fonctionne en production, nous devons le compiler et le déployer. </font><font style="vertical-align: inherit;">Nous présentons ici comment utiliser le fichier package.json pour configurer la compilation et le déploiement.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le projet, nous pouvons utiliser package.json pour gérer les dépendances du projet, configurer la compilation et le déploiement. </font><font style="vertical-align: inherit;">Prenons un exemple simple package.json comme exemple&nbsp;:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7</div>{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"my-project"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"fib-pool"</span>: <span class="hljs-string">"^1.0.0"</span><font></font>
  }<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque nous devons compiler et déployer le projet, nous n'avons qu'à entrer le répertoire du projet dans le terminal, puis exécuter la commande suivante&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --install
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette commande installera automatiquement les modules dont dépend le projet. </font><font style="vertical-align: inherit;">Ensuite, nous pouvons démarrer le projet avec la commande suivante&nbsp;:</font></font></p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs app.js
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">👉【</font></font><a href="host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Routage de nom de domaine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">】</font></font></p>
 </div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id="toc"></div></div></div></div><div class="footer"><div class="container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">© Copyright 2012-2021 fibjs.org | </font></font><a href="../../support.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soutenez-nous</font></font></a></div></div><a id="back-to-top" href="#" class="btn btn-default btn-lg back-to-top" role="button" title="" data-toggle="tooltip" data-placement="left" data-original-title=""><span class="glyphicon glyphicon-chevron-up"></span></a><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript" src="../../../js/common.js"></script><script type="text/javascript" src="../../../js/docs.js"></script></body></html>