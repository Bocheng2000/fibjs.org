<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel=icon type=image/png href=../../../imgs/icon.png><title> Table of Contents - JavaScript on Fiber</title><link href=../../../css/common.css rel=stylesheet><link href=../../../css/docs.css rel=stylesheet></head><body><div class="navbar navbar-default navbar-static-top" role=navigation><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../../../index.html><img src=../../../imgs/logo-dark.png></a></div><div id=navbar class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href=../../../index.html>HOME</a></li><li><a href=../../guide/readme.md.html>GUIDE</a></li><li><a href=../../manual/module/readme.md.html>MODULE</a></li><li><a href=../../manual/object/readme.md.html>OBJECT</a></li><li><a href=../readme.md.html>AWESOME</a></li><li><a href=../../../download/index.html>DOWNLOAD</a></li></ul></div></div></div><div class=band><div class=container><span class=group> Awesome 社区模块 </span><div class=search><input type=text class=searchbox placeholder=Search></div></div></div><div class=container><ol class=breadcrumb><li><a href=../../../index.html>首页</a></li><li><a href=../readme.md.html> 社区模块 </a></li><li class=active> Table of Contents </li></ol></div><div class=page-body><div class=container><div class="sidebar hidden-xs"><div class=panel-group id=accordion role=tablist>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_guide" aria-controls="collapse_guide"> 开发指南 </a></h4></div><div id="collapse_guide" class="panel-collapse collapse " aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=../../guide/about.md.html>fibjs 是什么？</a></li>
<li><a href=../../guide/install.md.html>安装运行环境</a></li>
<li><a href=../../guide/hello.md.html>hello, world</a></li>
<li><a href=../../guide/test.md.html>美好生活从测试开始</a></li>
<li><a href=../../guide/profiler.md.html>找出性能杀手</a></li>
</ul>
 </div></div></div>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_module" aria-controls="collapse_module"> 基础模块 </a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=../../manual/module/ifs/assert.md.html>assert</a></li>
<li><a href=../../manual/module/ifs/base32.md.html>base32</a></li>
<li><a href=../../manual/module/ifs/base64.md.html>base64</a></li>
<li><a href=../../manual/module/ifs/base64vlq.md.html>base64vlq</a></li>
<li><a href=../../manual/module/ifs/bson.md.html>bson</a></li>
<li><a href=../../manual/module/ifs/console.md.html>console</a></li>
<li><a href=../../manual/module/ifs/constants.md.html>constants</a></li>
<li><a href=../../manual/module/ifs/coroutine.md.html>coroutine</a></li>
<li><a href=../../manual/module/ifs/crypto.md.html>crypto</a></li>
<li><a href=../../manual/module/ifs/db.md.html>db</a></li>
<li><a href=../../manual/module/ifs/encoding.md.html>encoding</a></li>
<li><a href=../../manual/module/ifs/fs.md.html>fs</a></li>
<li><a href=../../manual/module/ifs/gd.md.html>gd</a></li>
<li><a href=../../manual/module/ifs/global.md.html>global</a></li>
<li><a href=../../manual/module/ifs/gui.md.html>gui</a></li>
<li><a href=../../manual/module/ifs/hash.md.html>hash</a></li>
<li><a href=../../manual/module/ifs/hex.md.html>hex</a></li>
<li><a href=../../manual/module/ifs/http.md.html>http</a></li>
<li><a href=../../manual/module/ifs/iconv.md.html>iconv</a></li>
<li><a href=../../manual/module/ifs/io.md.html>io</a></li>
<li><a href=../../manual/module/ifs/json.md.html>json</a></li>
<li><a href=../../manual/module/ifs/mq.md.html>mq</a></li>
<li><a href=../../manual/module/ifs/net.md.html>net</a></li>
<li><a href=../../manual/module/ifs/os.md.html>os</a></li>
<li><a href=../../manual/module/ifs/path.md.html>path</a></li>
<li><a href=../../manual/module/ifs/path_posix.md.html>path_posix</a></li>
<li><a href=../../manual/module/ifs/path_win32.md.html>path_win32</a></li>
<li><a href=../../manual/module/ifs/process.md.html>process</a></li>
<li><a href=../../manual/module/ifs/profiler.md.html>profiler</a></li>
<li><a href=../../manual/module/ifs/punycode.md.html>punycode</a></li>
<li><a href=../../manual/module/ifs/querystring.md.html>querystring</a></li>
<li><a href=../../manual/module/ifs/registry.md.html>registry</a></li>
<li><a href=../../manual/module/ifs/ssl.md.html>ssl</a></li>
<li><a href=../../manual/module/ifs/string_decoder.md.html>string_decoder</a></li>
<li><a href=../../manual/module/ifs/test.md.html>test</a></li>
<li><a href=../../manual/module/ifs/timers.md.html>timers</a></li>
<li><a href=../../manual/module/ifs/tty.md.html>tty</a></li>
<li><a href=../../manual/module/ifs/url.md.html>url</a></li>
<li><a href=../../manual/module/ifs/util.md.html>util</a></li>
<li><a href=../../manual/module/ifs/uuid.md.html>uuid</a></li>
<li><a href=../../manual/module/ifs/vm.md.html>vm</a></li>
<li><a href=../../manual/module/ifs/ws.md.html>ws</a></li>
<li><a href=../../manual/module/ifs/xml.md.html>xml</a></li>
<li><a href=../../manual/module/ifs/zip.md.html>zip</a></li>
<li><a href=../../manual/module/ifs/zlib.md.html>zlib</a></li>
<li><a href=../../manual/module/ifs/zmq.md.html>zmq</a></li>
</ul>
 </div></div></div>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_object" aria-controls="collapse_object"> 内置对象 </a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=../../manual/object/ifs/buffer.md.html>Buffer</a></li>
<li><a href=../../manual/object/ifs/bufferedstream.md.html>BufferedStream</a></li>
<li><a href=../../manual/object/ifs/chain.md.html>Chain</a></li>
<li><a href=../../manual/object/ifs/cipher.md.html>Cipher</a></li>
<li><a href=../../manual/object/ifs/condition.md.html>Condition</a></li>
<li><a href=../../manual/object/ifs/dbconnection.md.html>DbConnection</a></li>
<li><a href=../../manual/object/ifs/digest.md.html>Digest</a></li>
<li><a href=../../manual/object/ifs/event.md.html>Event</a></li>
<li><a href=../../manual/object/ifs/eventemitter.md.html>EventEmitter</a></li>
<li><a href=../../manual/object/ifs/eventinfo.md.html>EventInfo</a></li>
<li><a href=../../manual/object/ifs/fiber.md.html>Fiber</a></li>
<li><a href=../../manual/object/ifs/file.md.html>File</a></li>
<li><a href=../../manual/object/ifs/handler.md.html>Handler</a></li>
<li><a href=../../manual/object/ifs/handlerex.md.html>HandlerEx</a></li>
<li><a href=../../manual/object/ifs/heapgraphedge.md.html>HeapGraphEdge</a></li>
<li><a href=../../manual/object/ifs/heapgraphnode.md.html>HeapGraphNode</a></li>
<li><a href=../../manual/object/ifs/heapsnapshot.md.html>HeapSnapshot</a></li>
<li><a href=../../manual/object/ifs/httpclient.md.html>HttpClient</a></li>
<li><a href=../../manual/object/ifs/httpcollection.md.html>HttpCollection</a></li>
<li><a href=../../manual/object/ifs/httpcookie.md.html>HttpCookie</a></li>
<li><a href=../../manual/object/ifs/httphandler.md.html>HttpHandler</a></li>
<li><a href=../../manual/object/ifs/httpmessage.md.html>HttpMessage</a></li>
<li><a href=../../manual/object/ifs/httprequest.md.html>HttpRequest</a></li>
<li><a href=../../manual/object/ifs/httpresponse.md.html>HttpResponse</a></li>
<li><a href=../../manual/object/ifs/httpserver.md.html>HttpServer</a></li>
<li><a href=../../manual/object/ifs/httpuploaddata.md.html>HttpUploadData</a></li>
<li><a href=../../manual/object/ifs/httpsserver.md.html>HttpsServer</a></li>
<li><a href=../../manual/object/ifs/image.md.html>Image</a></li>
<li><a href=../../manual/object/ifs/int64.md.html>Int64</a></li>
<li><a href=../../manual/object/ifs/leveldb.md.html>LevelDB</a></li>
<li><a href=../../manual/object/ifs/lock.md.html>Lock</a></li>
<li><a href=../../manual/object/ifs/lrucache.md.html>LruCache</a></li>
<li><a href=../../manual/object/ifs/mssql.md.html>MSSQL</a></li>
<li><a href=../../manual/object/ifs/memorystream.md.html>MemoryStream</a></li>
<li><a href=../../manual/object/ifs/message.md.html>Message</a></li>
<li><a href=../../manual/object/ifs/mongocollection.md.html>MongoCollection</a></li>
<li><a href=../../manual/object/ifs/mongocursor.md.html>MongoCursor</a></li>
<li><a href=../../manual/object/ifs/mongodb.md.html>MongoDB</a></li>
<li><a href=../../manual/object/ifs/mongoid.md.html>MongoID</a></li>
<li><a href=../../manual/object/ifs/mysql.md.html>MySQL</a></li>
<li><a href=../../manual/object/ifs/pkey.md.html>PKey</a></li>
<li><a href=../../manual/object/ifs/redis.md.html>Redis</a></li>
<li><a href=../../manual/object/ifs/redishash.md.html>RedisHash</a></li>
<li><a href=../../manual/object/ifs/redislist.md.html>RedisList</a></li>
<li><a href=../../manual/object/ifs/redisset.md.html>RedisSet</a></li>
<li><a href=../../manual/object/ifs/redissortedset.md.html>RedisSortedSet</a></li>
<li><a href=../../manual/object/ifs/routing.md.html>Routing</a></li>
<li><a href=../../manual/object/ifs/sqlite.md.html>SQLite</a></li>
<li><a href=../../manual/object/ifs/sandbox.md.html>SandBox</a></li>
<li><a href=../../manual/object/ifs/seekablestream.md.html>SeekableStream</a></li>
<li><a href=../../manual/object/ifs/semaphore.md.html>Semaphore</a></li>
<li><a href=../../manual/object/ifs/service.md.html>Service</a></li>
<li><a href=../../manual/object/ifs/smtp.md.html>Smtp</a></li>
<li><a href=../../manual/object/ifs/socket.md.html>Socket</a></li>
<li><a href=../../manual/object/ifs/sslhandler.md.html>SslHandler</a></li>
<li><a href=../../manual/object/ifs/sslserver.md.html>SslServer</a></li>
<li><a href=../../manual/object/ifs/sslsocket.md.html>SslSocket</a></li>
<li><a href=../../manual/object/ifs/stat.md.html>Stat</a></li>
<li><a href=../../manual/object/ifs/stats.md.html>Stats</a></li>
<li><a href=../../manual/object/ifs/stream.md.html>Stream</a></li>
<li><a href=../../manual/object/ifs/stringdecoder.md.html>StringDecoder</a></li>
<li><a href=../../manual/object/ifs/subprocess.md.html>SubProcess</a></li>
<li><a href=../../manual/object/ifs/tcpserver.md.html>TcpServer</a></li>
<li><a href=../../manual/object/ifs/timer.md.html>Timer</a></li>
<li><a href=../../manual/object/ifs/urlobject.md.html>UrlObject</a></li>
<li><a href=../../manual/object/ifs/websocket.md.html>WebSocket</a></li>
<li><a href=../../manual/object/ifs/websocketmessage.md.html>WebSocketMessage</a></li>
<li><a href=../../manual/object/ifs/webview.md.html>WebView</a></li>
<li><a href=../../manual/object/ifs/worker.md.html>Worker</a></li>
<li><a href=../../manual/object/ifs/x509cert.md.html>X509Cert</a></li>
<li><a href=../../manual/object/ifs/x509crl.md.html>X509Crl</a></li>
<li><a href=../../manual/object/ifs/x509req.md.html>X509Req</a></li>
<li><a href=../../manual/object/ifs/xmlattr.md.html>XmlAttr</a></li>
<li><a href=../../manual/object/ifs/xmlcdatasection.md.html>XmlCDATASection</a></li>
<li><a href=../../manual/object/ifs/xmlcharacterdata.md.html>XmlCharacterData</a></li>
<li><a href=../../manual/object/ifs/xmlcomment.md.html>XmlComment</a></li>
<li><a href=../../manual/object/ifs/xmldocument.md.html>XmlDocument</a></li>
<li><a href=../../manual/object/ifs/xmldocumenttype.md.html>XmlDocumentType</a></li>
<li><a href=../../manual/object/ifs/xmlelement.md.html>XmlElement</a></li>
<li><a href=../../manual/object/ifs/xmlnamednodemap.md.html>XmlNamedNodeMap</a></li>
<li><a href=../../manual/object/ifs/xmlnode.md.html>XmlNode</a></li>
<li><a href=../../manual/object/ifs/xmlnodelist.md.html>XmlNodeList</a></li>
<li><a href=../../manual/object/ifs/xmlprocessinginstruction.md.html>XmlProcessingInstruction</a></li>
<li><a href=../../manual/object/ifs/xmltext.md.html>XmlText</a></li>
<li><a href=../../manual/object/ifs/zipfile.md.html>ZipFile</a></li>
<li><a href=../../manual/object/ifs/zmqsocket.md.html>ZmqSocket</a></li>
<li><a href=../../manual/object/ifs/object.md.html>object</a></li>
</ul>
 </div></div></div>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_awesome" aria-controls="collapse_awesome"> 社区模块 </a></h4></div><div id="collapse_awesome" class="panel-collapse collapse in" aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=fib-session.md.html>fib-session</a></li>
<li><a href=fib-pool.md.html>fib-pool</a></li>
<li><a href=fib-orm.md.html>fib-orm</a></li>
<li><a href=fib-app.md.html>fib-app</a></li>
<li><a href=fib-kv.md.html>fib-kv</a></li>
<li><a href=fib-rpc.md.html>fib-rpc</a></li>
<li><a href=fib-qr.md.html>fib-qr</a></li>
<li><a href=ejs.md.html>ejs</a></li>
<li><a href=juicer.md.html>Juicer</a></li>
<li><a href=highlight.js.md.html>highlight.js</a></li>
<li><a href=marked.md.html>marked</a></li>
<li><a href=node-cron.md.html>node-cron</a></li>
<li><a href=debug.md.html>debug</a></li>
<li><a href=benchmark.js.md.html>benchmark.js</a></li>
<li><a href=sinon.md.html>sinon</a></li>
<li><a href=node-mime.md.html>node-mime</a></li>
<li><a href=validatorjs.md.html>validatorjs</a></li>
<li><a href=cluster-server.md.html>cluster-server</a></li>
<li><a href=synaptic.md.html>synaptic</a></li>
<li><a href=source-map.md.html>source-map</a></li>
<li><a href=json-format.md.html>json-format</a></li>
<li><a href=viz.js.md.html>viz.js</a></li>
<li class="active"><a href=pegjs.md.html>pegjs</a></li>
<li><a href=uglify-js.md.html>uglify-js</a></li>
<li><a href=js-beautify.md.html>js-beautify</a></li>
<li><a href=chalk-animation.md.html>chalk-animation</a></li>
<li><a href=jsrsasign.md.html>jsrsasign</a></li>
<li><a href=crypto-js.md.html>crypto-js</a></li>
<li><a href=ascii-table.md.html>ascii-table</a></li>
<li><a href=logstream.md.html>logstream</a></li>
<li><a href=ci.md.html>ci</a></li>
<li><a href=fs-readdir-recursive.md.html>fs-readdir-recursive</a></li>
<li><a href=mkdirp.md.html>mkdirp</a></li>
<li><a href=rmdirr.md.html>rmdirr</a></li>
<li><a href=detect-port.md.html>detect-port</a></li>
<li><a href=bitcoinjs-lib.md.html>bitcoinjs-lib</a></li>
<li><a href=rakuten.md.html>Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class=content><div class=social-share data-sites=weibo,twitter data-description=分享></div> <p><a href="https://travis-ci.org/pegjs/pegjs"><img src="https://img.shields.io/travis/pegjs/pegjs.svg?label=travis" alt="Build status"></a>
<a href="https://www.npmjs.com/package/pegjs"><img src="https://img.shields.io/npm/v/pegjs.svg?label=npm/pegjs" alt="npm/pegjs version"></a>
<a href="https://www.npmjs.com/package/pegjs-dev"><img src="https://img.shields.io/npm/v/pegjs-dev.svg?label=npm/pegjs-dev" alt="npm/pegjs-dev version"></a>
<a href="https://github.com/pegjs/bower"><img src="https://img.shields.io/bower/v/pegjs.svg?label=bower/pegjs" alt="Bower version"></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/license-mit-blue.svg" alt="License"></a></p>
<p>PEG.js is a simple parser generator for JavaScript that produces fast parsers with excellent error reporting. You can use it to
process complex data or computer languages and build transformers, interpreters, compilers and other tools easily.</p>
<blockquote>
<p>PEG.js is still very much work in progress. There are no compatibility guarantees until version 1.0</p>
</blockquote>
<h2 id="Table-of-Contents">Table of Contents</h2>
<ul>
<li><a href="#features">Features</a></li>
<li><a href="#getting-Started">Getting Started</a></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#nodejs">Node.js</a></li>
<li><a href="#browser">Browser</a></li>
<li><a href="#latest">Latest</a></li>
</ul>
</li>
<li><a href="#generating-a-parser">Generating a Parser</a><ul>
<li><a href="#command-line">Command Line</a></li>
<li><a href="#javascript-api">JavaScript API</a></li>
</ul>
</li>
<li><a href="#using-the-parser">Using the Parser</a></li>
<li><a href="#grammar-syntax-and-semantics">Grammar Syntax and Semantics</a><ul>
<li><a href="#case-insensitivity">Case-insensitivity</a></li>
<li><a href="#backtracking">Backtracking</a></li>
<li><a href="#parsing-expression-types">Parsing Expression Types</a></li>
<li><a href="#action-execution-environment">Action Execution Environment</a></li>
<li><a href="#balanced-braces">Balanced Braces</a></li>
</ul>
</li>
<li><a href="#error-messages">Error Messages</a></li>
<li><a href="#compatibility">Compatibility</a></li>
<li><a href="#development">Development</a><ul>
<li><a href="#useful-links">Useful Links</a></li>
<li><a href="#contribution">Contribution</a></li>
</ul>
</li>
</ul>
<h2 id="Features">Features</h2>
<ul>
<li>Simple and expressive grammar syntax</li>
<li>Integrates both lexical and syntactical analysis</li>
<li>Parsers have excellent error reporting out of the box</li>
<li>Based on <a href="http://en.wikipedia.org/wiki/Parsing_expression_grammar">parsing expression
grammar</a> formalism
— more powerful than traditional LL(<em>k</em>) and LR(<em>k</em>) parsers</li>
<li>Usable <a href="https://pegjs.org/online">from your browser</a>, from the command line,
or via JavaScript API</li>
</ul>
<h2 id="Getting-Started">Getting Started</h2>
<p><a href="https://pegjs.org/online">Online version</a> is the easiest way to generate a
parser. Just enter your grammar, try parsing few inputs, and download generated
parser code.</p>
<h2 id="Installation">Installation</h2>
<h3 id="Node.js">Node.js</h3>
<p>To use the <code>pegjs</code> command, install PEG.js globally:</p>
<pre><code class="lang-console"><div class="line-numbers">1</div><span class="hljs-meta">$</span><span class="bash"> npm install -g pegjs</span>
</code></pre>
<p>To use the JavaScript API, install PEG.js locally:</p>
<pre><code class="lang-console"><div class="line-numbers">1</div><span class="hljs-meta">$</span><span class="bash"> npm install pegjs</span>
</code></pre>
<p>If you need both the <code>pegjs</code> command and the JavaScript API, install PEG.js both
ways.</p>
<h3 id="Browser">Browser</h3>
<p><a href="https://pegjs.org/#download">Download</a> the PEG.js library (regular or minified
version) or install it using Bower:</p>
<pre><code class="lang-console"><div class="line-numbers">1</div><span class="hljs-meta">$</span><span class="bash"> bower install pegjs</span>
</code></pre>
<h3 id="Latest">Latest</h3>
<p>To use the latest features, fixes and changes of PEG.js, directly install from the repository:</p>
<pre><code class="lang-console"><div class="line-numbers">1</div><span class="hljs-meta">$</span><span class="bash"> npm install pegjs/pegjs<span class="hljs-comment">#master</span></span>
</code></pre>
<p>Alternatively, you can use the most recently packaged version of the PEG.js code hosted on GitHub:</p>
<pre><code class="lang-console"><div class="line-numbers">1</div><span class="hljs-meta">$</span><span class="bash"> npm install pegjs-dev</span>
</code></pre>
<h2 id="Generating-a-Parser">Generating a Parser</h2>
<p>PEG.js generates parser from a grammar that describes expected input and can
specify what the parser returns (using semantic actions on matched parts of the
input). Generated parser itself is a JavaScript object with a simple API.</p>
<h3 id="Command-Line">Command Line</h3>
<p>To generate a parser from your grammar, use the <code>pegjs</code> command:</p>
<pre><code class="lang-console"><div class="line-numbers">1</div><span class="hljs-meta">$</span><span class="bash"> pegjs arithmetics.pegjs</span>
</code></pre>
<p>This writes parser source code into a file with the same name as the grammar
file but with “.js” extension. You can also specify the output file explicitly:</p>
<pre><code class="lang-console"><div class="line-numbers">1</div><span class="hljs-meta">$</span><span class="bash"> pegjs -o arithmetics-parser.js arithmetics.pegjs</span>
</code></pre>
<p>If you omit both input and output file, standard input and output are used.</p>
<p>By default, the generated parser is in the Node.js module format. You can
override this using the <code>--format</code> option.</p>
<p>You can tweak the generated parser with several options:</p>
<ul>
<li><code>-a</code>, <code>--allowed-start-rules</code> — comma-separated list of rules the parser will be allowed to start parsing from (default: the first rule in the grammar)</li>
<li><code>--cache</code> — makes the parser cache results, avoiding exponential parsing time in pathological cases but making the parser slower</li>
<li><code>-d</code>, <code>--dependency</code> — makes the parser require a specified dependency (can be specified multiple times)</li>
<li><code>-e</code>, <code>--export-var</code> — name of a global variable into which the parser object is assigned to when no module loader is detected</li>
<li><code>--extra-options</code> — additional options (in JSON format) to pass to <code>peg.generate</code></li>
<li><code>-c</code>, <code>--config</code>, <code>--extra-options-file</code> — file with additional options (in JSON format) to pass to <code>peg.generate</code></li>
<li><code>-f</code>, <code>--format</code> — format of the generated parser: <code>amd</code>, <code>bare</code>, <code>commonjs</code>, <code>es</code>, <code>globals</code>, <code>umd</code> (default: <code>commonjs</code>)</li>
<li><code>-O</code>, <code>--optimize</code> — selects between optimizing the generated parser for parsing speed (<code>speed</code>) or code size (<code>size</code>) (default: <code>speed</code>)</li>
<li><code>-p</code>, <code>--plugin</code> — makes PEG.js use a specified plugin (can be specified multiple times)</li>
<li><code>--trace</code> — makes the parser trace its progress</li>
</ul>
<p><strong>NOTE:</strong> On the command line, unless it&#39;s a repeatable option, any option on the right side will take priority over either the same option mentioned
before or it&#39;s counter part:</p>
<ul>
<li><code>pegjs -f es -f bare</code> will set <code>options.format</code> to <code>bare</code></li>
<li><code>pegjs --no-trace --trace</code> will set <code>options.trace</code> to <code>true</code></li>
<li><code>pegjs -a start,Rule -a Rule,Template</code> will set <code>options.allowedStartRules</code> to <code>[ &quot;start&quot;, &quot;Rule&quot;, &quot;Template&quot; ]</code></li>
</ul>
<h3 id="JavaScript-API">JavaScript API</h3>
<p>In Node.js, require the PEG.js parser generator module:</p>
<pre><code class="lang-javascript"><div class="line-numbers">1</div><span class="hljs-keyword">var</span> peg = <span class="hljs-built_in">require</span>(<span class="hljs-string">"pegjs"</span>);
</code></pre>
<p>In browser, include the PEG.js library in your web page or application using the
<code>&lt;script&gt;</code> tag. If PEG.js detects an AMD loader, it will define itself as a
module, otherwise the API will be available in the <code>peg</code> global object.</p>
<p>To generate a parser, call the <code>peg.generate</code> method and pass your grammar as a
parameter:</p>
<pre><code class="lang-javascript"><div class="line-numbers">1</div><span class="hljs-keyword">var</span> parser = peg.generate(<span class="hljs-string">"start = ('a' / 'b')+"</span>);
</code></pre>
<p>The method will return generated parser object or its source code as a string
(depending on the value of the <code>output</code> option — see below). It will throw an
exception if the grammar is invalid. The exception will contain <code>message</code>
property with more details about the error.</p>
<p>You can tweak the generated parser by passing a second parameter with an options
object to <code>peg.generate</code>. The following options are supported:</p>
<ul>
<li><code>allowedStartRules</code> — rules the parser will be allowed to start parsing from (default: the first rule in the grammar)</li>
<li><code>cache</code> — if <code>true</code>, makes the parser cache results, avoiding exponential parsing time in pathological cases but making the parser slower (default: <code>false</code>)</li>
<li><code>dependencies</code> — parser dependencies, the value is an object which maps variables used to access the dependencies to module IDs used to load them;<br><pre><code><div class="line-numbers">1</div>             valid only when `format` is set to `<span class="hljs-string">"amd"</span>`, `<span class="hljs-string">"commonjs"</span>`, `<span class="hljs-string">"es"</span>`, or `<span class="hljs-string">"umd"</span>` (default: `{}`)
</code></pre></li>
<li><code>exportVar</code> — name of an optional global variable into which the parser object is assigned to when no module loader is detected;<pre><code><div class="line-numbers">1</div>          valid only when `format` is set to `<span class="hljs-string">"globals"</span>` or `<span class="hljs-string">"umd"</span>`
</code></pre></li>
<li><code>format</code> — format of the generated parser (<code>&quot;amd&quot;</code>, <code>&quot;bare&quot;</code>, <code>&quot;commonjs&quot;</code>, <code>&quot;es&quot;</code>, <code>&quot;globals&quot;</code>, or <code>&quot;umd&quot;</code>);<pre><code><div class="line-numbers">1</div>       valid only when `output` is set to `<span class="hljs-string">"source"</span>` (default: `<span class="hljs-string">"bare"</span>`)
</code></pre></li>
<li><code>optimize</code>— selects between optimizing the generated parser for parsing speed (<code>&quot;speed&quot;</code>) or code size (<code>&quot;size&quot;</code>) (default: <code>&quot;speed&quot;</code>)</li>
<li><code>output</code> — if set to <code>&quot;parser&quot;</code> (default), the method will return generated parser object;<pre><code><div class="line-numbers">1</div>       <span class="hljs-keyword">if</span> <span class="hljs-built_in">set</span> <span class="hljs-built_in">to</span> `<span class="hljs-string">"source"</span>`, <span class="hljs-keyword">it</span> will <span class="hljs-literal">return</span> parser source code <span class="hljs-keyword">as</span> <span class="hljs-keyword">a</span> <span class="hljs-keyword">string</span>
</code></pre></li>
<li><code>plugins</code> — plugins to use</li>
<li><code>trace</code> — makes the parser trace its progress (default: <code>false</code>)</li>
</ul>
<h2 id="Using-the-Parser">Using the Parser</h2>
<p>Using the generated parser is simple — just call its <code>parse</code> method and pass an
input string as a parameter. The method will return a parse result (the exact
value depends on the grammar used to generate the parser) or throw an exception
if the input is invalid. The exception will contain <code>location</code>, <code>expected</code>,
<code>found</code>,  and <code>message</code> properties with more details about the error.</p>
<pre><code class="lang-javascript"><div class="line-numbers">1
2
3</div>parser.parse(<span class="hljs-string">"abba"</span>); <span class="hljs-comment">// returns ["a", "b", "b", "a"]</span>

parser.parse(<span class="hljs-string">"abcd"</span>); <span class="hljs-comment">// throws an exception</span>
</code></pre>
<p>You can tweak parser behavior by passing a second parameter with an options
object to the <code>parse</code> method. The following options are supported:</p>
<ul>
<li><code>startRule</code> — name of the rule to start parsing from</li>
<li><code>tracer</code> — tracer to use</li>
</ul>
<p>Parsers can also support their own custom options.</p>
<h2 id="Grammar-Syntax-and-Semantics">Grammar Syntax and Semantics</h2>
<p>The grammar syntax is similar to JavaScript in that it is not line-oriented and
ignores whitespace between tokens. You can also use JavaScript-style comments
(<code>// ...</code> and <code>/* ... */</code>).</p>
<p>Let&#39;s look at example grammar that recognizes simple arithmetic expressions like
<code>2*(3+4)</code>. A parser generated from this grammar computes their values.</p>
<pre><code class="lang-pegjs"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</div>start
  = <span class="hljs-built_in">additive</span>

<span class="hljs-built_in">additive</span>
  = left:<span class="hljs-built_in">multiplicative</span> <span class="hljs-string">"+"</span> right:<span class="hljs-built_in">additive</span> { <span class="hljs-built_in">return</span> left + right; }
  / <span class="hljs-built_in">multiplicative</span>

<span class="hljs-built_in">multiplicative</span>
  = left:primary <span class="hljs-string">"*"</span> right:<span class="hljs-built_in">multiplicative</span> { <span class="hljs-built_in">return</span> left * right; }
  / primary

primary
  = <span class="hljs-built_in">integer</span>
  / <span class="hljs-string">"("</span> <span class="hljs-built_in">additive</span>:<span class="hljs-built_in">additive</span> <span class="hljs-string">")"</span> { <span class="hljs-built_in">return</span> <span class="hljs-built_in">additive</span>; }

<span class="hljs-built_in">integer</span> <span class="hljs-string">"integer"</span>
  = digits:[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]+ { <span class="hljs-built_in">return</span> parseInt(digits.<span class="hljs-built_in">join</span>(<span class="hljs-string">""</span>), <span class="hljs-number">10</span>); }
</code></pre>
<p>On the top level, the grammar consists of <em>rules</em> (in our example, there are
five of them). Each rule has a <em>name</em> (e.g. <code>integer</code>) that identifies the rule,
and a <em>parsing expression</em> (e.g. <code>digits:[0-9]+ { return
parseInt(digits.join(&quot;&quot;), 10); }</code>) that defines a pattern to match against the
input text and possibly contains some JavaScript code that determines what
happens when the pattern matches successfully. A rule can also contain
<em>human-readable name</em> that is used in error messages (in our example, only the
<code>integer</code> rule has a human-readable name). The parsing starts at the first rule,
which is also called the <em>start rule</em>.</p>
<p>A rule name must be a JavaScript identifier. It is followed by an equality sign
(“=”) and a parsing expression. If the rule has a human-readable name, it is
written as a JavaScript string between the name and separating equality sign.
Rules need to be separated only by whitespace (their beginning is easily
recognizable), but a semicolon (“;”) after the parsing expression is allowed.</p>
<p>The first rule can be preceded by an <em>initializer</em> — a piece of JavaScript code
in curly braces (“{” and “}”). This code is executed before the generated parser
starts parsing. All variables and functions defined in the initializer are
accessible in rule actions and semantic predicates. The code inside the
initializer can access options passed to the parser using the <code>options</code>
variable. Curly braces in the initializer code must be <a href="#balanced-braces">balanced</a>.
Let&#39;s look at the example grammar from above using a simple initializer.</p>
<pre><code class="lang-pegjs"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</div>{
  function makeInteger(o) {
    <span class="hljs-built_in">return</span> parseInt(o.<span class="hljs-built_in">join</span>(<span class="hljs-string">""</span>), <span class="hljs-number">10</span>);
  }
}

start
  = <span class="hljs-built_in">additive</span>

<span class="hljs-built_in">additive</span>
  = left:<span class="hljs-built_in">multiplicative</span> <span class="hljs-string">"+"</span> right:<span class="hljs-built_in">additive</span> { <span class="hljs-built_in">return</span> left + right; }
  / <span class="hljs-built_in">multiplicative</span>

<span class="hljs-built_in">multiplicative</span>
  = left:primary <span class="hljs-string">"*"</span> right:<span class="hljs-built_in">multiplicative</span> { <span class="hljs-built_in">return</span> left * right; }
  / primary

primary
  = <span class="hljs-built_in">integer</span>
  / <span class="hljs-string">"("</span> <span class="hljs-built_in">additive</span>:<span class="hljs-built_in">additive</span> <span class="hljs-string">")"</span> { <span class="hljs-built_in">return</span> <span class="hljs-built_in">additive</span>; }

<span class="hljs-built_in">integer</span> <span class="hljs-string">"integer"</span>
  = digits:[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]+ { <span class="hljs-built_in">return</span> makeInteger(digits); }
</code></pre>
<p>The parsing expressions of the rules are used to match the input text to the
grammar. There are various types of expressions — matching characters or
character classes, indicating optional parts and repetition, etc. Expressions
can also contain references to other rules. See detailed description below.</p>
<p>If an expression successfully matches a part of the text when running the
generated parser, it produces a <em>match result</em>, which is a JavaScript value. For
example:</p>
<ul>
<li>An expression matching a literal string produces a JavaScript string
containing matched text.</li>
<li>An expression matching repeated occurrence of some subexpression produces a
JavaScript array with all the matches.</li>
</ul>
<p>The match results propagate through the rules when the rule names are used in
expressions, up to the start rule. The generated parser returns start rule&#39;s
match result when parsing is successful.</p>
<p>One special case of parser expression is a <em>parser action</em> — a piece of
JavaScript code inside curly braces (“{” and “}”) that takes match results of
some of the the preceding expressions and returns a JavaScript value. This value
is considered match result of the preceding expression (in other words, the
parser action is a match result transformer).</p>
<p>In our arithmetics example, there are many parser actions. Consider the action
in expression <code>digits:[0-9]+ { return parseInt(digits.join(&quot;&quot;), 10); }</code>. It
takes the match result of the expression [0-9]+, which is an array of strings
containing digits, as its parameter. It joins the digits together to form a
number and converts it to a JavaScript <code>number</code> object.</p>
<h3 id="Case-insensitivity">Case-insensitivity</h3>
<p>Appending <code>i</code> right after either <a href="#literalliteral">a literal</a> or a <a href="#characters">a character set</a> makes the match
case-insensitive. The rules shown in the following example all produce the same result:</p>
<pre><code class="lang-pegjs"><div class="line-numbers">1
2
3
4</div><span class="hljs-attr">a1</span> = <span class="hljs-string">"a"</span> / <span class="hljs-string">"b"</span> / <span class="hljs-string">"c"</span> / <span class="hljs-string">"A"</span> / <span class="hljs-string">"B"</span> / <span class="hljs-string">"C"</span>
<span class="hljs-attr">a2</span> = <span class="hljs-string">"a"</span>i / <span class="hljs-string">"b"</span>i / <span class="hljs-string">"c"</span>i
<span class="hljs-attr">a3</span> = [a-cA-C]
<span class="hljs-attr">a4</span> = [a-c]i
</code></pre>
<h3 id="Backtracking">Backtracking</h3>
<p>Unlike in regular expressions, there is no backtracking in PEG.js expressions.</p>
<p>For example, using the input &quot;hi!&quot;:</p>
<pre><code class="lang-pegjs"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div>
<span class="hljs-comment">// This will fail</span>
HI = <span class="hljs-string">"hi"</span> / <span class="hljs-string">"hi!"</span>

<span class="hljs-comment">// This will pass</span>
HI = <span class="hljs-string">"hi!"</span> / <span class="hljs-string">"hi"</span>

<span class="hljs-comment">// This will also pass</span>
HI = w:<span class="hljs-string">"hi"</span> !<span class="hljs-string">"!"</span> { return w } / <span class="hljs-string">"hi!"</span>
</code></pre>
<p>For more information on backtracking in PEG, <a href="https://stackoverflow.com/a/24809596/1518408">checkout this excellent answer on Stack Overflow</a>.</p>
<h3 id="Parsing-Expression-Types">Parsing Expression Types</h3>
<p>There are several types of parsing expressions, some of them containing
subexpressions and thus forming a recursive structure:</p>
<ul>
<li><a href="#literalliteral">&quot;literal&quot;</a></li>
<li><a href="#-dot-character">. (dot character)</a></li>
<li><a href="#characters">[characters]</a></li>
<li><a href="#rule">rule</a></li>
<li><a href="#-expression-">( expression )</a></li>
<li><a href="#expression-">expression *</a></li>
<li><a href="#expression--1">expression +</a></li>
<li><a href="#expression--2">expression ?</a></li>
<li><a href="#-expression">&amp; expression</a></li>
<li><a href="#-expression-1">! expression</a></li>
<li><a href="#--predicate-">&amp; { predicate }</a></li>
<li><a href="#--predicate--1">! { predicate }</a></li>
<li><a href="#-expression-2">$ expression</a></li>
<li><a href="#label--expression">label : expression</a></li>
<li><a href="#expression1-expression2---expressionn">expression1 expression2 ... expressionN</a></li>
<li><a href="#expression--action-">expression { action }</a></li>
<li><a href="#expression1--expression2----expressionn">expression1 / expression2 / ... / expressionN</a></li>
</ul>
<h4 id=""*literal*"<br>'*literal*'">&quot;<em>literal</em>&quot;<br>&#39;<em>literal</em>&#39;</h4>
<p>Match exact literal string and return it. The string syntax is the same as in
JavaScript. Appending <code>i</code> right after the literal makes the match
case-insensitive.</p>
<h4 id=".-*(dot-character)*">. <em>(dot character)</em></h4>
<p>Match exactly one character and return it as a string.</p>
<h4 id="[*characters*]">[<em>characters</em>]</h4>
<p>Match one character from a set and return it as a string. The characters in the
list can be escaped in exactly the same way as in JavaScript string. The list of
characters can also contain ranges (e.g. <code>[a-z]</code> means “all lowercase letters”).
Preceding the characters with <code>^</code> inverts the matched set (e.g. <code>[^a-z]</code> means
“all character but lowercase letters”). Appending <code>i</code> right after the right
bracket makes the match case-insensitive.</p>
<h4 id="*rule*"><em>rule</em></h4>
<p>Match a parsing expression of a rule recursively and return its match result.</p>
<h4 id="(-*expression*-)">( <em>expression</em> )</h4>
<p>Match a subexpression and return its match result.</p>
<h4 id="*expression*-\*"><em>expression</em> *</h4>
<p>Match zero or more repetitions of the expression and return their match results
in an array. The matching is greedy, i.e. the parser tries to match the
expression as many times as possible. Unlike in regular expressions, there is no
backtracking.</p>
<h4 id="*expression*-+"><em>expression</em> +</h4>
<p>Match one or more repetitions of the expression and return their match results
in an array. The matching is greedy, i.e. the parser tries to match the
expression as many times as possible. Unlike in regular expressions, there is no
backtracking.</p>
<h4 id="*expression*-?"><em>expression</em> ?</h4>
<p>Try to match the expression. If the match succeeds, return its match result,
otherwise return <code>null</code>. Unlike in regular expressions, there is no
backtracking.</p>
<h4 id="&-*expression*">&amp; <em>expression</em></h4>
<p>Try to match the expression. If the match succeeds, just return <code>undefined</code> and
do not consume any input, otherwise consider the match failed.</p>
<h4 id="!-*expression*">! <em>expression</em></h4>
<p>Try to match the expression. If the match does not succeed, just return
<code>undefined</code> and do not consume any input, otherwise consider the match failed.</p>
<h4 id="&-{-*predicate*-}">&amp; { <em>predicate</em> }</h4>
<p>This is a positive assertion. No input is consumed.</p>
<p>The predicate should be JavaScript code, and it&#39;s executed as a
function. Curly braces in the predicate must be <a href="#balanced-braces">balanced</a>.</p>
<p>The predicate should <code>return</code> a boolean value. If the result is
truthy, the match result is <code>undefined</code>, otherwise the match is
considered failed.</p>
<p>The predicate has access to all variables and functions in the
<a href="#action-execution-environment">Action Execution Environment</a>.</p>
<h4 id="!-{-*predicate*-}">! { <em>predicate</em> }</h4>
<p>This is a negative assertion. No input is consumed.</p>
<p>The predicate should be JavaScript code, and it&#39;s executed as a
function. Curly braces in the predicate must be <a href="#balanced-braces">balanced</a>.</p>
<p>The predicate should <code>return</code> a boolean value. If the result is
falsy, the match result is <code>undefined</code>, otherwise the match is
considered failed.</p>
<p>The predicate has access to all variables and functions in the
<a href="#action-execution-environment">Action Execution Environment</a>.</p>
<h4 id="$-*expression*">$ <em>expression</em></h4>
<p>Try to match the expression. If the match succeeds, return the matched text
instead of the match result.</p>
<h4 id="*label*-:-*expression*"><em>label</em> : <em>expression</em></h4>
<p>Match the expression and remember its match result under given label. The label
must be a JavaScript identifier.</p>
<p>Labeled expressions are useful together with actions, where saved match results
can be accessed by action&#39;s JavaScript code.</p>
<h4 id="*expression<sub>1</sub>*-*expression<sub>2</sub>*-...-*expression<sub>n</sub>*"><em>expression<sub>1</sub></em> <em>expression<sub>2</sub></em> ...  <em>expression<sub>n</sub></em></h4>
<p>Match a sequence of expressions and return their match results in an array.</p>
<h4 id="*expression*-{-*action*-}"><em>expression</em> { <em>action</em> }</h4>
<p>If the expression matches successfully, run the action, otherwise
consider the match failed.</p>
<p>The action should be JavaScript code, and it&#39;s executed as a
function. Curly braces in the action must be <a href="#balanced-braces">balanced</a>.</p>
<p>The action should <code>return</code> some value, which will be used as the
match result of the expression.</p>
<p>The action has access to all variables and functions in the
<a href="#action-execution-environment">Action Execution Environment</a>.</p>
<h4 id="*expression<sub>1</sub>*-/-*expression<sub>2</sub>*-/-...-/-*expression<sub>n</sub>*"><em>expression<sub>1</sub></em> / <em>expression<sub>2</sub></em> / ... / <em>expression<sub>n</sub></em></h4>
<p>Try to match the first expression, if it does not succeed, try the second one,
etc. Return the match result of the first successfully matched expression. If no
expression matches, consider the match failed.</p>
<h3 id="Action-Execution-Environment">Action Execution Environment</h3>
<p>Actions and predicates have these variables and functions
available to them.</p>
<ul>
<li><p>All variables and functions defined in the initializer at the
beginning of the grammar are available.</p>
</li>
<li><p>Labels from preceding expressions are available as local
variables, which will have the match result of the labelled
expressions.</p>
<p>A label is only available after its labelled expression is
matched:</p>
<pre><code class="lang-pegjs"><div class="line-numbers">1</div>rule = A:(<span class="hljs-string">'a'</span> B:<span class="hljs-string">'b'</span> { /* B <span class="hljs-keyword">is</span> available, A <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> */ } )
</code></pre>
<p>A label in a sub-expression is only valid within the
sub-expression:</p>
<pre><code class="lang-pegjs"><div class="line-numbers">1</div>rule = <span class="hljs-string">A:</span><span class="hljs-string">'a'</span> (<span class="hljs-string">B:</span> <span class="hljs-string">'b'</span>) (<span class="hljs-string">C:</span> <span class="hljs-string">'b'</span> { <span class="hljs-comment">/* A and C are available, B is not */</span> })
</code></pre>
</li>
<li><p><code>options</code> is a variable that contains the parser options.</p>
</li>
<li><p><code>error(message, where)</code> will report an error and throw an
exception. <code>where</code> is optional; the default is the value of
<code>location()</code>.</p>
</li>
<li><p><code>expected(message, where)</code> is similar to <code>error</code>, but reports</p>
<blockquote>
<p>Expected <em>message</em> but &quot;<em>other</em>&quot; found.</p>
</blockquote>
</li>
<li><p><code>location()</code> returns an object like this:</p>
<pre><code class="lang-javascript"><div class="line-numbers">1
2
3
4</div>{
  <span class="hljs-attr">start</span>: { <span class="hljs-attr">offset</span>: <span class="hljs-number">23</span>, <span class="hljs-attr">line</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">column</span>: <span class="hljs-number">6</span> },
  <span class="hljs-attr">end</span>: { <span class="hljs-attr">offset</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">line</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">column</span>: <span class="hljs-number">8</span> }
}
</code></pre>
<p>For actions, <code>start</code> refers to the position at the beginning of
the preceding expression, and <code>end</code> refers to the position
after the end of the preceding expression.</p>
<p>For predicates, <code>start</code> and <code>end</code> are the same, the location
where the predicate is evaluated.</p>
<p><code>offset</code> is a 0-based character index within the source text.
<code>line</code> and <code>column</code> are 1-based indices.</p>
<p>Note that <code>line</code> and <code>column</code> are somewhat expensive to
compute, so if you need location frequently, you might want to
use <code>offset()</code> or <code>range()</code> instead.</p>
</li>
<li><p><code>offset()</code> returns the start offset.</p>
</li>
<li><p><code>range()</code> returns an array containing the start and end
offsets, such as <code>[23, 25]</code>.</p>
</li>
<li><p><code>text()</code> returns the source text between <code>start</code> and <code>end</code>
(which will be &quot;&quot; for predicates).</p>
</li>
</ul>
<h3 id="Balanced-Braces">Balanced Braces</h3>
<p>Code fragments such as actions and predicates must have balanced curly braces,
because pegjs doesn&#39;t parse the contents. It only looks at balanced braces to
find the end of the code fragment.</p>
<p>If your code fragment needs an unbalanced brace in a string literal, you
can balance it in a comment. For example:</p>
<pre><code class="lang-pegjs"><div class="line-numbers">1
2
3</div>brace = [{}] {
  <span class="hljs-keyword">return</span> text() === <span class="hljs-string">"{"</span> ? <span class="hljs-number">1</span> : -1;  // } <span class="hljs-keyword">for</span> balance
}
</code></pre>
<h2 id="Error-Messages">Error Messages</h2>
<p>As described above, you can annotate your grammar rules with human-readable
names that will be used in error messages. For example, this production:</p>
<pre><code><div class="line-numbers">1
2</div>integer <span class="hljs-string">"integer"</span>
  = digits:<span class="hljs-string">[0-9]</span>+
</code></pre><p>will produce an error message like:</p>
<blockquote>
<p>Expected integer but &quot;a&quot; found.</p>
</blockquote>
<p>when parsing a non-number, referencing the human-readable name &quot;integer.&quot;
Without the human-readable name, PEG.js instead uses a description of the
character class that failed to match:</p>
<blockquote>
<p>Expected [0-9] but &quot;a&quot; found.</p>
</blockquote>
<p>Aside from the text content of messages, human-readable names also have a
subtler effect on <em>where</em> errors are reported. PEG.js prefers to match
named rules completely or not at all, but not partially. Unnamed rules,
on the other hand, can produce an error in the middle of their
subexpressions.</p>
<p>For example, for this rule matching a comma-separated list of integers:</p>
<pre><code><div class="line-numbers">1
2</div>seq
  = <span class="hljs-built_in">integer</span> (<span class="hljs-string">","</span> <span class="hljs-built_in">integer</span>)*
</code></pre><p>an input like <code>1,2,a</code> produces this error message:</p>
<blockquote>
<p>Expected integer but &quot;a&quot; found.</p>
</blockquote>
<p>But if we add a human-readable name to the <code>seq</code> production:</p>
<pre><code><div class="line-numbers">1
2</div>seq <span class="hljs-string">"list of numbers"</span>
  = <span class="hljs-built_in">integer</span> (<span class="hljs-string">","</span> <span class="hljs-built_in">integer</span>)*
</code></pre><p>then PEG.js prefers an error message that implies a smaller attempted parse
tree:</p>
<blockquote>
<p>Expected end of input but &quot;,&quot; found.</p>
</blockquote>
<h2 id="Compatibility">Compatibility</h2>
<p>Both the parser generator and generated parsers should run well in the following
environments:</p>
<ul>
<li>Node.js 4+</li>
<li>Internet Explorer 9+</li>
<li>Edge</li>
<li>Firefox</li>
<li>Chrome</li>
<li>Safari</li>
<li>Opera</li>
</ul>
<h2 id="Development">Development</h2>
<p>PEG.js is currently maintained by <a href="https://github.com/futagoza">Futago-za Ryuu</a>. Since it&#39;s <a href="https://www.google.com/search?q=inception+meaning">inception</a> in 2010, PEG.js was maintained by <a href="https://majda.cz/">David Majda</a> (<a href="http://twitter.com/dmajda">@dmajda</a>), until <a href="https://github.com/pegjs/pegjs/issues/503">May 2017</a>.</p>
<p>The <a href="https://github.com/pegjs/bower">Bower package</a> is maintained by <a href="http://www.michel-kraemer.com/">Michel Krämer</a> (<a href="https://twitter.com/michelkraemer">@michelkraemer</a>).</p>
<h3 id="Useful-Links">Useful Links</h3>
<ul>
<li><a href="https://pegjs.org/">Project website</a></li>
<li><a href="https://github.com/pegjs/pegjs/wiki">Wiki</a></li>
<li><a href="https://github.com/pegjs/pegjs">Source code</a></li>
<li><a href="https://github.com/pegjs/pegjs/issues">Issue tracker</a></li>
<li><a href="http://groups.google.com/group/pegjs">Google Group</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/pegjs">Stack Overflow</a></li>
<li><a href="http://twitter.com/peg_js">Twitter</a></li>
</ul>
<h3 id="Contribution">Contribution</h3>
<p>You are welcome to contribute code using <a href="https://github.com/pegjs/pegjs/pulls">GitHub pull requests</a>.  Unless your contribution is really trivial you should get in touch with me first (preferably by creating a new issue on the <a href="https://github.com/pegjs/pegjs/issues">issue tracker</a>) - this can prevent wasted effort on both sides.</p>
<blockquote>
<p>Before submitting a pull request, please make sure you&#39;ve checked out the <a href="https://github.com/pegjs/pegjs/blob/master/CONTRIBUTING.md">Contribution Guidelines</a>.</p>
</blockquote>
<ol>
<li>Create a fork of <a href="https://github.com/pegjs/pegjs">https://github.com/pegjs/pegjs</a></li>
<li>Clone your fork, and optionally create a new branch</li>
<li>Run the command <code>npm install</code> from the root of your clone</li>
<li>Add and commit your changes</li>
<li>Validate your changes:<ul>
<li>Lint the JavaScript changes (command line only, run <code>gulp lint</code> or <code>npm run lint</code>)</li>
<li>Run tests to ensure nothing&#39;s broken: <a href="https://github.com/pegjs/pegjs/blob/master/test/README.md">see separate documentation</a></li>
<li>Optionally, check benchmark results: <a href="https://github.com/pegjs/pegjs/blob/master/benchmark/README.md">see separate documentation</a></li>
<li>Optionally, check commit impact (this is a bash script, run <code>tools/impact</code>)</li>
</ul>
</li>
<li>If validation fails: reverse your commit, fix the problem and then add/commit again</li>
<li>Push the commits from your clone to the fork</li>
<li>From your fork, start a new pull request</li>
</ol>
<p>It&#39;s also a good idea to check out the <a href="https://github.com/pegjs/pegjs/blob/master/gulpfile.js">gulpfile.js</a> that defines
various tasks that are commented with a description of each task.</p>
<p>To see the list of contributors check out the <a href="https://github.com/pegjs/pegjs/graphs/contributors">repository&#39;s contributors page</a>.</p>
 </div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id=toc></div></div></div></div><div class=footer><div class=container>&copy; Copright 2017 fibjs.org | <a href=../../../support.html>支持我们</a></div></div><a id=back-to-top href=# class="btn btn-default btn-lg back-to-top" role=button title="Click to return on the top page" data-toggle=tooltip data-placement=left><span class="glyphicon glyphicon-chevron-up"></span></a><script type=text/javascript src=https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js></script><script type=text/javascript src=../../../js/common.js></script><script type=text/javascript src=../../../js/docs.js></script></body></html>